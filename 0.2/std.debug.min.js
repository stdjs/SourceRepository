/**
    Std Javascript Library v0.3
    http://www.StdJS.com
*/
!function(e,t,r,n,o,a,s,u,l,c,f,d,m){var h,p,v,g,b,y,x,_,w,k,S,T,C,N,F,A,L,z,D,H,E,j,M,O,P,B,I,W=e.Std=function(){};W.version=.3,W.models={},W.modules={},W.eval=function(t){s(t)||W.debug({path:"Std.eval",description:" String contains an invalid character"});var r=e&&e.eval;return r?r(t):new Function(t)()},W.property=function(e,t,r){return W.init.defineProperty?Object.defineProperty(e,t,{value:r,enumerable:!1}):e[t]=r,e},"undefined"==typeof console&&(console={log:function(){},error:function(){},trace:function(){},group:function(){},groupEnd:function(){}}),W.debug=function(e,t,r){if("undefined"==typeof console)throw e;if(l(t))return h(t,function(e,t){l(t)?W.debug.apply(W,t):W.debug.call(W,t)}),W;if(u(e))return console.group(e.description||"Std.debug"),"path"in e&&W.debug.row("error from",e.path),"module"in e&&W.debug.row("module",e.module),"memberType"in e&&W.debug.row("member type",e.memberType),"memberName"in e&&W.debug.row("member name",e.memberName),"description"in e&&W.debug.row("description",e.description),"file"in e&&!f(e.file)&&W.debug.row("file",e.file),"line"in e&&W.debug.row("line",e.line),"position"in e&&W.debug.row("position",e.position),"data"in e&&console.log(e.data),"content"in e&&console.log("%c"+e.content,"color:#4D4D4D;"),console.groupEnd(),W.debug.end(r),W;t===n&&(t={});var i="%c"+e,o="";if("size"in t&&(o+="font-size: "+t.size+"px;"),"bold"in t&&(o+="font-weight: bold;"),"underline"in t&&(o+="text-decoration: underline;"),"italic"in t&&(o+="font-style: italic;"),"color"in t&&(o+="color: "+t.color+";"),"background"in t&&(o+="background:"+t.background+";"),"css"in t)if(s(t.css))o+=t.css;else if(u(t.css))for(var a in t.css)t.css.hasOwnProperty(a)&&(o+=a+":"+t.css[a]+";");if("type"in t){if("error"===t.type)return console.error("Error:",e),W;if("info"===t.type)return console.info(i,o),W}return console.log(i,o),W},W.debug.level=1,W.debug.row=function(e,t){console.info(e+": %c"+t,"color:green;font-weight: bold;")},W.debug.end=function(e){throw console.trace("%ccode trace","color:red;font-weight: bold;"),e||null},h=W.each=function(e,t,i,a){var s=r,u=typeof e;if(!e||!o(t))return r;if("string"===u&&(e=e.split(a===n?" ":a)),l(e)){i===!0&&(s=[]);for(var c=0,f=e.length;f>c;c++){var d=t.call(e,c,e[c]);if(d!==n){if(i!==!0)return d;s.push(d)}}}else if("object"===u||"function"===u){i===!0&&(s={});for(var m in e){var d=t.call(e,m,e[m]);if(d!==n){if(i!==!0)return d;s[m]=d}}}return s},p=W.extend=function(e,t,r,n){if(!e||!u(t)&&!o(t))return e;var i,a,s,f="__Std";switch(r){case 1:for(i in t)i.substr(0,5)!==f&&(a=t[i],s=e[i],l(a)?l(s)?e[i].mergeArray(a):e[i]=[].mergeArray(a):e[i]=a);break;case 2:for(i in t)a=t[i],s=e[i],a!==t&&i.substr(0,5)!==f&&(e[i]=c(a)&&c(s)&&!l(a)&&!l(s)?p(s,a,2):a);break;case 3:for(i in t)a=t[i],s=e[i],a!==t&&i.substr(0,5)!==f&&(l(a)?l(s)?e[i].mergeArray(a):e[i]=[].mergeArray(a):e[i]=c(a)&&c(s)&&!l(a)&&!l(s)?p(s,a,3):a);break;default:for(i in t)n===!1&&i in e||i.substr(0,5)!==f&&(e[i]=t[i])}return e},p(Math,{over:function(e,t){return 0===t?0:e/t},rand:function(e,t){return t===n?Math.random()*e:Math.random()*(t-e)+e},val:function(e,t,r){return"+"===t?e+=r:"-"===t?e-=r:"*"===t?e*=r:"/"===t?e/=r:e=r,e},check:function(e,t,r){var i=!1;if(""===t&&""===r)return!i;if(r==n)return i;switch(t){case">":i=float(e)>float(r);break;case"<":i=float(e)<float(r);break;case"=":case"==":i=e==r;break;case"===":i=e===r;break;case">=":i=float(e)>=float(r);break;case"<=":i=float(e)<=float(r);break;case"!=":i=e!==r;break;case"~=":i=(" "+e+" ").indexOf(r)>-1;break;case"^=":i=0==e.indexOf(r);break;case"$=":i=e.slice(-r.length)===r;break;case"*=":s(e)&&(i=e.indexOf(r)>-1);break;case"|=":i=e===r||e.slice(0,r.length+1)==r+"-"}return i}}),p(Object,{clear:function(e){for(var t in e)delete e[t];return e},keys:function(e){var t=[],r={}.hasOwnProperty;return W.each(e,function(n){r.call(e,n)&&t.push(n)}),t},merge:function(){for(var e=arguments,t={},r=Object.prototype.hasOwnProperty,n=0,i=e.length;i>n;n++)for(var o in e[n])r.call(e[n],o)&&(t[o]=e[n][o]);return t},contains:function(e,t){if(e===n||!t)return!1;if(e===t)return!0;var r=l(t),i=t.length;if(r||a(i))for(var o=0;i>o;o++)if(t[o]===e)return!0;return r?!1:e in t}},0,!1),p(Function.prototype,{bind:function(){var e=this,t=Array.prototype.slice,r=t.call(arguments),n=r.shift();return function(){return e.apply(n,r.concat(t.call(arguments)))}},iof:function(e){return e instanceof this}},0,!1),p(Array,{slice:function(e,t,r){return Array.prototype.slice.call(e,t,r)},from:function(e){var t,r=e.length;if(u(e))if(t=[],a(r))for(var n=0;r>n;n++)t[n]=e[n];else for(var i in e)t.push(e[i]);else s(e)&&(t=e.split(""));return t}},0,!1),p(Array.prototype,{each:function(e,t,r){return h.call(this,this,e,t,r)},has:function(e){return-1!==this.indexOf(e)},clear:function(){return this.remove()},insert:function(e,t){return!a(t)||-1===t||t>=this.length?this.push(e):this.splice(t,0,e),this},map:function(e,t){var r=this,n=[],i=Object.prototype.hasOwnProperty;return o(e)||W.debug({path:"Array",memberType:"public",memberName:"map",description:e+" is not a function"}),h(r,function(o,a){i.call(r,o)&&n.push(e.call(t,a,o,r))},!0),n},filter:function(e,t){var r=this,n=[],i=Object.prototype.hasOwnProperty;return o(e)||W.debug({path:"Array",memberType:"public",memberName:"filter",description:e+" is not a function"}),h(r,function(o,a){i.call(r,o)&&e.call(t,a,o,r)===!0&&n.push(a)},!0),n},last:function(){return this[this.length-1]},merge:function(){for(var e=0,t=arguments,r=t.length;r>e;e++)this.mergeArray(t[e]);return this},union:function(){for(var e=0,t=arguments,r=t.length;r>e;e++)this.mergeArray(t[e],!0);return this},push_uniq:function(e){var t=this;return t.has(e)||t.push(e),t},limit:function(e,t){var r=[],i=this.length,o=0,a=0;if(t===n?a=e:(o=e,a=e+t),i>o)for(a=a>=i?i:a;a>o;o++)r.push(this[o]);return r},swap:function(e,t){var r=this,n=r[e];return r[e]=r[t],r[t]=n,r},indexOf:function(e,t){var r=this,i=r.length;for(t=t===n?0:t;i>t;t++)if(e===r[t])return t;return-1},move:function(e,t){var r=this,n=r.length;if(e!==t&&e>=0&&n>=e&&t>=0&&n>=t){var i=r[e];if(t>e)for(;t>e;)r[e]=r[++e];else for(;e>t;)r[e]=r[--e];r[t]=i}return r},unique:function(){for(var e=this,t=e.length,r=[],n=0,i=0;t>i;i++)-1==r.indexOf(e[i])&&(r[n++]=e[i]);for(var o=0;n>o;o++)e[o]=r[o];return e.length=n,e},mergeArray:function(e,t){var r=this;if(u(e))for(var n=e.length||0,i=0;n>i;i++)t===!0&&r.has(e[i])||r.push(e[i]);return r},remove:function(e,t){var r=this;if(e===n)r.length=0;else if(a(e))r.splice(e,t||1);else if(l(e)){for(var i=[],o=0,s=r.length;s>o;o++){var u=e.indexOf(o);-1===u?i.push(r[o]):e.splice(u,1)}for(o=0,s=r.length=i.length;s>o;o++)r[o]=i[o]}return r}},0,!1),p(String.prototype,function(){var e="replace",t=/(^\s*)|(\s*$)/g,i=/-([a-z])/gi,o=/[A-Z]/g,u=/[<>&"]/g;return{trim:function(){return this.replace(t,"")},isNumber:function(){return S.number(this)},capitalize:function(){return this.charAt(0).toUpperCase()+this.substr(1)},has:function(e){return-1!==this.indexOf(e)},left:function(e){return a(e)||W.debug({path:"String.prototype",memberName:"left",description:"illegal parameter"}),this.substr(0,e)},right:function(e){return a(e)||W.debug({path:"String.prototype",memberName:"right",description:"illegal parameter"}),this.substring(this.length-e)},retype:function(){var e=this.toString();return"true"===e?e=!0:"false"===e?e=!1:"null"===e?e=r:S.number(e)&&(e=int(e)),e},byteLen:function(){for(var e=this,t=e.length,r=t-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&2047>=n?t++:n>2047&&65535>=n&&(t+=2)}return t},between:function(e,t,n){var i=this,o=a(e)?e:i.indexOf(e,n),u=a(t)?t:i.indexOf(t,o+e.length);return-1===o||-1===u?r:(s(e)&&(o+=e.length),i.substring(o,u))},reverse:function(){for(var e="",t=this.length-1;t>=0;t--)e+=this.charAt(t);return e},toObject:function(){var e=this.trim();if(e.length<2)return r;var t=e.left(1),n=e.right(1);if("["==t&&"]"==n||"{"==t&&"}"==n)try{return new Function("return "+e)()}catch(i){W.debug({path:"String",memberType:"prototype",memberName:"toObject",description:i.message},null,e)}return r},count:function(e){var t=0,r=this,i=-1;if(e===n)return r.length;for(s(e)||W.debug({path:"String.prototype",memberName:"count",description:"illegal parameter"});-1!=(i=r.indexOf(e,i+1));)t++;return t},line:function(e,t){a(e)||W.debug({path:"String.prototype",memberName:"line",description:"illegal parameter"});var r=0,n=this.toString(),i=-1;do if(++r===e){var o=n.indexOf("\n",i+1);return t===!0?i+1:n.substring(r>0?i+1:i,-1==o?n.length:o)}while(-1!=(i=n.indexOf("\n",i+1)));return null},camelCase:function(e){var t=this;return e===!0&&(t=t.capitalize()),-1!=t.indexOf("-")?t.replace(i,function(e,t){return t.toUpperCase()}):t.toString()},unCamelCase:function(){return this.replace(o,function(e){return"-"+e.toLowerCase()})},utf8Encode:function(){return unescape(encodeURIComponent(this))},utf8Decode:function(){try{return decodeURIComponent(escape(this))}catch(e){return this.toString()}},escapeString:function(e){for(var t=this,r="",n=0,i=t.length;i>n;n++){var o=t.charAt(n),a=t.charAt(n+1);switch(o){case e:r+="\\"+o;break;case"\r":r+="\\r";break;case"\n":r+="\\n";break;case"\\":a===o?(r+="\\\\",n++):a===e&&(r+="\\"+e,n++);break;default:r+=o}}return r},escapeHTML:function(){return this.replace(u,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2f;","`":"&#x60;"}[e]||e})},unescapeHTML:function(){return this[e](/&amp;/,"&")[e](/&lt;/g,"<")[e](/&gt;/g,">")[e](/&#39;/g,"'")[e](/&quot;/g,'"')[e](/&#(\d+)/g,function(e,t){return String.formCharCode(int(t,10))})}}}(),0,!1),p(Number.prototype,{"float":function(e){var t=Math.pow(10,e===n?0:e);return Math.round(this*t)/t},isFloat:function(){return Math.ceil(this)-this!=0}}),p(Date,{now:function(){return(new Date).getTime()}},0,!1),p(Date.prototype,{format:function(e,t){var r=this;if(t===n){var i={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};f(e)&&(e="yyyy-M-d h:m:s"),/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return e}for(var a={},s="y M d h m s".split(" "),u="",l=[],c=0,d=-1,m=e.length;m>c;c++){var h=e.charAt(c),p=-1!=s.indexOf(h);p&&h!==u?l[++d]=u=h:p||h===u?l[d]+=h:l[++d]=u=h}for(c=0,d=0,m=l.length;m>c;c++){var v=l[c],g=t.substring(d,d+=v.length);if(!g)break;-1!=s.indexOf(v.charAt(0))&&(a[v.charAt(0)]=~~g)}for(var b in a){var y=~~a[b];"y"==b?y.length<4?r.setYear(y):r.setFullYear(y):"M"==b?r.setMonth(y-1):"d"==b?r.setDate(y):"h"==b?r.setHours(y):"m"==b?r.setMinutes(y):"s"==b&&r.setSeconds(y)}return r}},0,!1),p(e,{"int":parseInt,"float":function(e,t){var r=parseFloat(e);return t===!0?Math.ceil(r)-r!=0:r},newDom:function(e,r){s(e)||W.debug({path:"global",memberName:"newDom",description:"illegal parameter"});var n=t.createElement(e);return s(r)&&(n.className=r),new O(n,!1)},newDiv:function(e){return newDom("div",e)},sprintf:function(){for(var e=arguments,t=e.length,r=arguments[0],n=1,i="",o=0,a=r.length;a>o;o++){var s=r.charAt(o);if(a-1>o&&"%"==r.charAt(o)){var u=r.charAt(o+1);if("%"==u)i+="%";else if(t>n){var l=e[n];switch(u){case"c":i+=(l+"").charAt(0);break;case"s":i+=l+"";break;case"d":i+=int(l);break;case"f":i+=float(l);break;case"o":i+=int(l).toString(8);break;case"x":i+=int(l).toString(16);break;case"X":i+=int(l).toString(16).toUpperCase();break;case".":if(a-3>o){var c=int(r.charAt(o+2));c>0&&"f"==r.charAt(o+3)&&(i+=float(l).toFixed(c),o+=2)}}n++}o++}else i+=s}return i}}),W.init=function(){var r,n,i,o,a=!!e.ActiveXObject,u=a&&!e.XMLHttpRequest,l=a&&!!t.documentMode,c=a&&!u&&!l,f={ie:{n:a,6:u,7:c,8:l},on:i={},cssName:o={}},d=function(e){return e.capitalize()},m=function(e){return t.createElement(e)},h="opacity",p="animation",v="keyframes",g="defineProperty",b=g in Object;if(b){var y=function(){},x=y.prototype={};try{Object[g](x,"a",{value:1})}catch(_){b=!1}1!==x.a&&(b=!1)}return f[g]=b,!function(){var e=m("a"),a=e.style;e.innerHTML="  <link/><table></table><script>;</script>",a.cssText="top:1px;float:left;"+h+":.5;",r=f.css={inlineBlock:!(u||c),opacity:/^0.5/.test(a[h]),cssFloat:!!a.cssFloat},n=f.dom={dataset:!!e.dataset,tbody:!e.getElementsByTagName("tbody").length,innerFullHTML:3!==e.firstChild.nodeType,outerHTML:!!e.outerHTML,htmlSerialize:!!e.getElementsByTagName("link").length,contains:!!e.contains,compareDocPos:!!e.compareDocumentPosition,cloneBug:""==e.lastChild.cloneNode(!0).innerHTML};for(var l=["submit","focusin","change"],d=0,g=l.length;g>d;d++){var b=l[d],y="on"+b;(i[b]=y in t)||(e.setAttribute(y,"t"),i[b]=e.attributes[y].expando===!1)}for(var x in a)if(g=x.length,s(x)&&x.toLowerCase().substring(g-9)===p){f.anim=(x=x==p?"":"-"+x.substr(0,g-9)+"-")+v,o.animation=x+p;break}}(),!function(){var n,i,a=f.platformPrefix={O:"-o-",MS:"-ms-",Moz:"-moz-",WebKit:"-webkit-"},s="",u=t.documentElement,l=f.styles=[],c=e.getComputedStyle,m="requestAnimationFrame",h="cancelAnimationFrame",p=e[m],v=e[h];if(!p){for(n in a)if(p=e[(n=n.toLowerCase())+d(m)],v=e[n+d(h)],p)return!0;p||(p=function(e){setTimeout(e,1e3/60)}),v||(v=function(e){clearTimeout(e)}),e[m]=p,e[h]=v}if(c){i=c(u,"");for(n in i)isNumeric(n)&&l.push(i[n])}else{i=u.currentStyle;for(n in i)l.push(n.unCamelCase())}for(var g=0,b=l.length;b>g;g++)if("-"===(n=l[g]).charAt(0))for(var y in a){var x=a[y];0==n.indexOf(x)&&(""===s&&(s=x),o[n.substring(x.length).camelCase()]=n)}r.prefix=s,r.boxSizing=l.has("box-sizing")}(),f}(),W.count=function(e){var t=0,r={}.hasOwnProperty;if(l(e)||s(e))t=e.length;else if(u(e))if("length"in e&&a(e.length))t=e.length;else for(var n in e)r.call(e,n)&&t++;else t++;return t},W.clone=function(e){var t={}.hasOwnProperty,r=function(e){for(var t=[],r=0,n=e.length;n>r;r++)t[r]=i(e[r]);return t},n=function(e){var r={};for(var n in e){var o=e[n];o!==e&&t.call(e,n)&&(r[n]=i(o))}return r},i=function(e){var t;return t=l(e)?r(e):isElement(e)?O.clone(e):u(e)?n(e):o(e)?e:e};return i(e)},v=W.func=function(e,t){if(e==n)return function(){};if(isBool(e))return function(){return e};s(e)&&(e=new Function(e));var i=r,d=r,m=0,p=!1,g=!1,b=!1,y=!1,x=!0,_=" ",w="array",k="object",S="string",T="plainObject",C=[Array,l,w],N=[Object,u,k],F=[c,T],A=[String,s,S],L=function(t,r,i,o,a){var s,u=d||this;if(t===n)0!==m&&m.call(u),s=e.call(u);else if(p===!0&&l(t))for(var f=0,v=t.length;v>f;f++)L.call(u,t[f],r,i,o,a);else if(b===!0&&typeof t===S)-1===t.indexOf(" ")?e.call(u,t,r,i,o,a):h(t,function(t,n){e.call(u,n,r,i,o,a)},!1,_);else if(g===!0&&typeof t===k||F===!0&&c(t))for(var y in t)e.call(u,y,t[y],i,o,a);else 0!==m&&m.call(u,t,r,i,o,a),s=e.call(u,t,r,i,o,a);return s===n&&x===!0&&(s=u),s};if(u(t)){var z=t.each||t.a,D=t.split||t.b,H=t.parent||t.c,E=t.delay||t.d,j=t.packages||t.f,M=t.beforeLoad;if(d=t.bind||t.e,t.rebuild&&(e=v.rebuild(e)),t.chaining===!1&&(x=!1),s(D)&&(_=D),a(E)&&(i=E),l(z)?h(z,function(e,t){C.has(t)?p=!0:N.has(t)?g=!0:A.has(t)?b=!0:F.has(t)&&(y=!0)}):u(z)&&(f(z[w])||(p=z[w]),f(z[k])||(g=z[k]),f(z[S])||(b=z[S])),o(H)?m=H:l(H)&&(m=function(){for(var e=0,t=arguments,r=H.length;r>e;e++)H[e].apply(this,t)}),j){var O=L;L=function(){var e=this,t=arguments;return o(M)&&M.call(d||e,t),W.use(j,function(){O.apply(d||e,t)}),x===!0?e:n}}}else a(t)&&(i=t);return i!==r?function(){var e=d||this,t=arguments;return setTimeout(function(){L.apply(e,t)},i),e}:L},v.exec=function(e,t){return v(e,t)()},v.malloc=function(e,t){var r="prototype",n=function(){e.apply(this,t)};return n[r]=e[r],new n},g=W.model=function(e,t){var r=W.models;if(s(e)){if(t===n)return W.models[e]}else t===n&&u(e)&&(t=e);return o(t)&&(t=t()),u(t)?(s(e)&&(e in r&&W.debug.level>1&&W.debug({path:"Std.model",description:"model ["+e+"] already exist."}),r[e]=t),t):{}},g.get=function(e,t,r){var i=b.shortName(),o=g(e);if(t===n)return o;var a=t in o?o[t]:o[i[t]];return r===n?a:s(r)?a[r]:void 0},g("dnd",function(){var e="marginLeft",t="marginTop",i="original",a="position",c="absolute",f="sortable",v="cursorStatus",g=function(e){O.emit(e,"mouseover mouseenter")},b=function(e,t){return e&&e.contains(t)},x=function(e,t,r,n){var i=!1,o=t||e;return r=O(r),n&&e.context(r,n)||(d(o)?i=b(o[0],r):S.DOM(o)&&e.contains(o)?i=b(O(o),r):s(o)&&(i=e.is(o)||r.is(o)||b(e,r.parent(o)))),i},_=function(m,y,_){var w,k,T,C,N,F,A,L,D,H,E,M,P,I,R,q,U,X,Y,V,K,$,G,Q,Z,J,ee,te,re,ne,ie,oe,ae,se,ue,le,ce,fe,de,me,he,pe,ve,ge=O(_),be=O(ge.document()),ye=O(O.documentElement(ge)),xe=0,_e=y.touch,we=B.status,ke=y.containerItems;"auto"==_e&&(_e="ontouchstart"in ge);var Se=function(e){return _e?e.touches[0].pageX:e.pageX},Te=function(e){return _e?e.touches[0].pageY:e.pageY},Ce={down:_e?"touchstart":"mousedown",move:_e?"touchmove":"mousemove",up:_e?"touchend":"mouseup"},Ne=function(e,t){var r,n=Z;((r=n.plugin(e))||(n=Z.ui())&&(r=n.plugin(e)))&&(o(r._receive)&&r._receive.call(n,t),r.emit("receive",t))},Fe=function(e,t){var r=!!Z&&Z.not(C),n={x:re-H,y:ne-E,selfX:ue,selfY:le,offsetX:re-(K-Y),offsetY:ne-($-V),name:e,self:D,helper:L,index:-1,target:O(G),width:U,height:X,pageX:ee,pageY:te,original:k,behavior:y.behavior,traitor:r,sender:y.sender||_};return L&&(n.helper=L),me&&(n.placeHolder=me),ce&&(n.item=ce,n.itemRect=fe),de&&(1==de||3==de?n.side="before":(2==de||4==de)&&(n.side="after")),Q&&(n.accept=Q,n.containment=Z),J&&(n.containmentOffset=J,n.positionX=ee-J.x-ue,n.positionY=te-J.y-le),u(t)&&p(n,t),o(m["_"+e])&&m["_"+e](n),m.emit(e,n),!r||"sort"!=e&&"drop"!=e||Ne(m.pluginName,n),o(t)?t.call(m,n):void 0},Ae=function(){ie&&(clearInterval(ie),ie=r),l(oe)&&W.doms(oe).destroy(),L=G=Q=Z=J=ce=de=fe=r},Le=function(){oe=[],W.doms("iframe").each(function(e,t){var r=t.offset();oe[e]=O.absDiv(r.x,r.y,t.offsetWidth(),t.offsetHeight(),we.zIndex+1,"body").opacity(0)})},ze=function(e){e!==m[v]&&(j.cursor(m[v]=e),m.emit("cursorChange",e))},De=function(e){Z&&Z.toggleClass(y.activeClass,e)},He=function(){var e=y.placeHolder,t=y.placeHolderClass;"default"===e?(me=newDom(D.nodeName(),D.className()).html("î ’"),!t&&me.css("visibility","hidden")):"clone"===e?me=D.clone().opacity(y.opacity):"sep"===e?(me=O.absDiv(0,0,0,0,B.status.zIndex+1,"body").css("background","blue"),he=!0):o(e)&&(me=e.call(m,D)),S.DOM(me)||W.debug({path:"Std.plugin",module:m.pluginName,description:"placeHolder option error",content:e}),he||(y.forcePlaceHolderSize&&me.css({outerWidth:D.outerWidth(),outerHeight:D.outerHeight()}),me.insertBefore(D)),me.addClass(t)},Ee=function(e){if(de!==e){me||He(),ve=me.computeRect(),de=e,fe=ce.computeRect();var t,r=function(e){return D.not(e)?e:void 0},n=function(){(t=ce.not(me.nextSibling(r)))&&me.insertBefore(ce)},i=function(){(t=ce.not(me.prevSibling(r)))&&me.insertAfter(ce)};if(he){var o=fe.x,a=fe.y,s=fe.width,u=fe.height,l=y.sepBold;2==e?o+=s:4==e&&(a+=u),3>e?s=l:u=l,me.css({left:o,top:a,width:s,height:u})}else 1==e?n():2==e?i():3==e?ve.y>=fe.y+fe.height&&n():4==e&&ve.y<=fe.y+fe.height&&i();t&&(pe=1,Fe("change"))}},je=function(){var e=!1,t=fe.y,r=fe.x,n=fe.width,i=fe.height,o=y.orientation,a=ve.y,s=ve.x,u=function(){t+i/2>te&&te>t?e=3:te>t+i/2&&t+i>te&&(e=4)},l=function(){ee>r&&r+n/2>ee?e=1:ee>r+n/2&&r+n>ee&&(e=2)};"auto"===o?a>=t+i||t>=a+ve.height?u():(s>=r+n||r>=s+ve.width)&&l():"horizontal"===o?l():"vertical"===o&&u(),e&&Ee(e)},Me=function(e){var t,r=function(n){return s(n)?t=(Z||ge).context(e,n):d(n)||S.DOM(n)?(O(n).is(e)||O(n).contains(e))&&(t=O(n)):l(n)&&h(n,function(e,n){return(t=r(n))?!0:void 0}),t};O(e).not(me)&&(r(y.items)||r(ke))&&(!Q&&ge.contains(t)||Q&&Z.contains(t))&&(de=pe=0,ce&&ce.is(t)||(ce=O(t),Ee()))},Oe=function(e,t){D.css({left:e,top:t})},Pe=function(e,t){return e?s(e)?D=ge.context(t,e):d(e)||S.DOM(e)?D=O(e):l(e)&&h(e,function(e,r){return(D=Pe(r,t))?!0:void 0}):D=ge,b(ge,D)||(D=r),D},Be=function(){F=L.outerWidth(),A=L.outerHeight()},Ie=function(){me&&(me.destroy(),me=he=r),y.originalHelperVisible||D.show()},We=function(){var e=y.data;"clone"==N?L=D.clone():"html"==N?L=newDiv().html(e):"rect"==N?L=newDiv(y.helperClass||"Std_rect"):"image"==N?(L=newDiv(),u(e)?L.append(e):s(e)&&z.image(e,function(){L.append(this),Be()})):o(N)?(L=N.call(m,D,e),S.DOM(L)||W.debug({path:"Std.plugin",module:m.pluginName,description:"dnd model's helper function must return a DOM element",content:N+""})):W.debug({path:"Std.model",description:"helper error",content:N+""}),y.forceHelperSize&&L.css({outerWidth:D.outerWidth(),outerHeight:D.outerHeight()}),y.originalHelperVisible||D.hide(),L.addClass(y.helperClass).appendTo("body").css(a,c)},Re=function(){k||We(),y.sortable&&!me&&He(),k&&(y.forceHelperSize&&D.styleTo({width:D.width(),height:D.height()}),m.initCSSPosition(L=D)),L.styleTo({zoom:1,marginLeft:0,marginTop:0,opacity:y.opacity,zIndex:y.zIndex==r?we.zIndex+1:y.zIndex}),Be()},qe=function(e,t){var r=e;return u(e)&&b(O(e),t)||s(e)&&(O(r=t).is(e)||(r=O(t).parent(e)))?O(r):void 0},Ue=function(){var e=L&&L.elementBehindPoint((y.x?ee:K-ue)-be.scrollLeft(),(y.y?te:$-le)-be.scrollTop());if(e&&"HTML"!==e.nodeName&&e!==G&&O(e).not(me)){if(Fe("out"),G=e,Fe("over"),(y[f]||y.droppable)&&!Xe(e))return ze("no-drop"),ce=r,void(he&&me.hide());y[f]&&Me(e),he&&me.visible(!!ce),ze(y.cursor)}},Xe=function(e){var t=y.accept,n=r,i=function(t){return!(n=qe(t,e))||Z&&O(n).is(Z)?void 0:(Z&&(De(!1),Fe("leave")),Q=t,Z=n,J=O(n).offset(),ce=r,De(!0),Fe("enter"),!0)};if(o(t))(t=t.call(m,e))&&i(t);else{if(l(t))for(var a=0,s=t.length;s>a&&!i(t[a]);a++);else i(t);n||i(C)}return n||Q==r||(De(!1),Fe("leave"),Q=Z=J=ce=r),!!n},Ye=function(e){m.once("animateComplete",e)},Ve=function(e,t){0==t?e():(T=!0,L.animate({to:{top:k?V+E:$,left:k?Y+H:K}},{duration:y.duration,timingFunction:"ease"},function(){T=!1,e(),m.emit("animateComplete")}))},Ke=function(r,n){r.styleBack(["zIndex","opacity",e,t]),y.forceHelperSize&&r.styleBack("width height"),n||r.styleBack(a)},$e=function(){var e=y.revert,t=y.draggable,r=y.droppable&&Z&&C.not(Z),n=y[f]&&ce&&D.not(ce),i=L,o=function(){k?(Ke(D),Oe(M,P)):y.destroyHelper&&i.destroy(),Ie()},a=function(){var e=-1,t=function(e,t){return D.is(t)?!1:void 0};return he?ce&&(e=ce.index(t),e+=2==de||4==de?1:0):e=me.index(t),e};if(n||r){var s=me&&{index:me?a():-1,container:Q||null,containment:Z||C};o(),Fe(n?"sort":"drop",s)}else t?!1!==Fe("drag",function(t){return t.cancel?(Fe("cancel"),e&&Ve(o),!1):void 0})&&(k?(Ke(D,!0),Oe(re-H,ne-E)):(m.initCSSPosition(D),Oe(re-(K-Y),ne-($-V)),y.destroyHelper&&L.destroy()),Ie()):(Fe("cancel"),Ve(o,e))},Ge=function(){var e=m.minTop(),t=m.maxTop(),n=m.minLeft(),i=m.maxLeft();(re=ee-(k?ae:ue))<0?re=0:re+F>R&&(re=R-F),n!=r&&(k||(n+=K-Y,i+=K-Y),n>re?re=n:re>i&&(re=i)),(ne=te-(k?se:le))<0?ne=0:ne+A>q&&(ne=q-A),e!=r&&(k||(e+=$-V,t+=$-V),e>ne?ne=e:ne>t&&(ne=t)),L.top(ne=y.y?ne:k?V+E:$),L.left(re=y.x?re:k?Y+H:K),y[f]&&ce&&1!=pe&&je()},Qe=function(){xe=2,ze(y.cursor),y.iframeFix&&Le(),Re(),g(!1),Ge(),Fe("start"),!ie&&w&&(ie=setInterval(Ue()||Ue,10))},Ze=function(){var e=function(){2==xe&&Fe("stop"),we.lock=!1,Ae(),g(!0)};return be.off(Ce.move,Je).off(Ce.up,Ze),L&&$e(),De(!1),ze(r),T?Ye(e):void e()},Je=function(e){ee=Se(e),te=Te(e),1==xe&&Qe(),2==xe&&(Ge(),Fe("move",{e:e})),e.preventDefault()},et=function(r){var n=O(r.target);if(!(T||!_e&&1!=r.which||we.lock||!(w=y.droppable||y[f])&&!y.draggable||!x(ge,y.handle,n,y.cancel)||!Pe(y.items,n)||d(_)&&!_.enable()||o(y.check)&&y.check.call(m,D,r)===!1)){var a=D.offset(),s=D.position();N=y.helper,k=N==i,ee=Se(r),te=Te(r),C=D.parent(),xe=1,I=k?D.offsetParent():be,U=D.outerWidth(),X=D.outerHeight(),Y=s.x,V=s.y,K=a.x,$=a.y,M=D.style("left"),P=D.style("top"),ae=ee-Y-(H=D.css(e)),se=te-V-(E=D.css(t)),ue=ee-K,le=te-$,R=(I.is(ye)?be:I).sizeControl("width",["paddingLeft","paddingRight"]),q=(I.is(ye)?be:I).sizeControl("height",["paddingTop","paddingBottom"]),we.lock=!0,be.on(Ce.move,Je).on(Ce.up,Ze),Fe("mousedown",{e:r}),r.preventDefault()}};m._un=function(){Ae(),ge.off(Ce.down,et)},ge.on(Ce.down,et,2==y.level?1:3==y.level?0:n)};return{e:{x:!0,y:!0,level:1,touch:"auto",opacity:.6,sender:r,handle:r,cursor:"move",accept:r,helper:"original",helperClass:"",behavior:"none",data:r,items:r,zIndex:r,minLeft:r,maxLeft:r,minTop:r,maxTop:r,revert:!1,draggable:!1,droppable:!1,sortable:!1,iframeFix:!1,forceHelperSize:!0,forcePlaceHolderSize:!0,destroyHelper:!0,duration:150,sepBold:2,cancel:"input,textarea,option",activeClass:"",placeHolder:"default",placeHolderClass:"",orientation:"auto",originalHelperVisible:!0},f:{handleCheck:function(e,t,r,n){return x(e,t,r,n)}},i:{init:function(e,t,r){_(e,t,r)},initCSSPosition:function(e){y.or(c+" fixed",e.css(a))||e.styleTo(a,c)}},j:{destroy:function(){this._un()}},l:function(e,t){t[v]=r,h("draggable droppable sortable cursor activeClass helper helperClass accept data behavior minLeft maxLeft minTop maxTop orientation",function(e,r){t[r]=function(e){return this.opt(r,e)}})},k:function(e,t,r){m(r)&&W.debug({path:"Std.plugin",description:"plugin ["+e.__Std__.name+"] doesn't support on layout module"}),e.init(e,t,r)}}}),function(){var e="__Std__",t="__StdPool__",i="__StdInit__",a="__StdName__",c="events",f="prototype",d="protected",m="defineProperty";b=W.module=function(y,x,_){if(s(y)){if(x===n)return W.modules[y]||r}else _=x,x=y;_===n&&(_=W),o(x)&&!u(x=x.call(_))&&W.debug({path:"Std.module",description:"illegal parameter"},null,y);var w=b.inheritance,k=x.model||x.a;s(k)&&(k=k.split(" ")),l(k)?h(k,function(e,t){var n=r;s(t)?n=g(t):u(t)&&(n=t),n==r&&s(t)&&W.debug({path:"Std.module",description:"load model failed,model "+t+" doesn't exist."},null,y),b.loadModel(x,n)}):u(k)&&b.loadModel(x,k);var S=x.parent||x.b||r,T=x[c]||x.c||[],C=x.mix||x.d||r,N=x.option||x.e||r,F=x["static"]||x.f,L=x.extend||x.g||{},z=x["private"]||x.h,D=x[d]||x.i,H=x["public"]||x.j,E=x.main||x.k||v(),j=x.entrance||x.l,M=x.support||x.m||{},O=x.initialize||x.n,P=x.__constructor__||x.z,B=E,I=r,R=S;s(S)&&!(S=_.modules[S])&&W.debug({path:"Std.module",description:"parent module "+R+" doesn't exist."},null,y);var q=function(){var e=arguments;return S.apply(this,e),E.apply(this,e)};o(P)?(B=P,o(S)&&w(B,S)):1===x.type?o(S)?(B=function(e,t,r,n,i){return new q(e,t,r,n,i)},w(B,S),w(q,S)):(B=function(e,t,r,n,i){return new E(e,t,r,n,i)},E[f]=B[f]={}):o(S)&&(B=q,w(B,S));var U=B[f],X=function(e,t,r){if(S&&b.isProtected(S,e))return W.debug({path:"Std.module",description:"cannot overwrite protected member ["+e+"]"},null,y),!1;var n=u(t)?t.value:t;if(W.init[m]){var i=u(t)?t:{configurable:!1,enumerable:1===r,writable:!0,value:n};Object[m](U,e,i)}else U[e]=n;return o(n)&&(n[a]=e),S&&e in S[f]&&o(U[e])&&(U[e].parent=S[f][e]),!0};if(s(T)&&(T=T.split(" ")),o(S)&&(S[f][e]&&(T=T.union(S[f][e][c])),b.extendMembers(B,L,S),p(B,S,3)),N!==r){var Y={};if(o(S)){var V=S[f][e];u(V)&&(N=V.option.get(N))}N=Y=new A(N),B.opts=function(e){return e===n?N:void(N&&N.set(e))},U.opt=function(e,t,r){var i=this,o=i.opts[e];if(t===n)return o;if(i.opts[e]=t,"function"==typeof r){var a=r.call(i,o);if(a!==n)return a}return i},U.init_opts=function(e){return this.opts=Y.get(u(e)?e:{})},U.call_opts=function(t,r){var n=this,i=n.opts,a=n[e].option;if(s(t))o(n[t])||W.debug({path:"Std.module",memberType:"public",memberName:"call_opts",description:"function ["+d+"] doesn't exist."},null,y),r===!0?i[t]!==a.get(t)&&n[t](i[t]):n[t](i[t]);else if(l(t))for(var c=0,f=t.length;f>c;c++){var d=t[c];o(n[d])||W.debug({path:"Std.module",memberType:"public",memberName:"call_opts",description:"function ["+d+"] doesn't exist."},null,y),r===!0?i[d]!==a.get(d)&&n[d](i[d]):n[d](i[d])}else if(u(t))for(var d in t)o(n[d])||W.debug({path:"Std.module",memberType:"public",memberName:"call_opts",description:"function ["+d+"] doesn't exist."},null,y),r===!0?i[d]!==t[d]&&n[d](i[d]):n[d](t[d]);return n}}if(l(C)?h(C,function(e,t){p(B,t,3),h(t[f],function(e,t){X(e,t,1)})}):(u(C)||o(C))&&(p(B,C,3),h(C[f],function(e,t){X(e,t,1)})),u(F)&&p(B,F,3),u(D)&&h(D,function(e,t){I||(I=[]),X(e,t,2)&&I.push(e)}),u(z)&&h(z,function(e,t){X("_"+e,t,3)}),u(O)&&h(O,function(e,t){o(t)&&X(e,function(){var r=this,n=r[i];return n||(n=r[i]={}),n[e]?!1:(n[e]=!0,t.apply(r,arguments),r)},4)}),u(H)&&h(H,function(e,t){X(e,t,1)}),o(j)&&j.call(B,B,U,N),u(M)||(M={}),o(S)){var K=S[f][e].support;for(var $ in K){var G=K[$];G["private"]!==!0&&(M[$]=p(p({},G,3),M[$]))}}h(U,function(e,t){o(t)&&(t[a]=e)}),U.__final__=function(e,r){var n=this,i=n[t];return o(r)||(r=r===!0?function(){n.emit(e)}:v()),i&&i[e]&&0!==i[e].length?(i||(i=n[t]={}),i[e]||(i[e]=[]),i[e].push(r)):r.call(n,e),n};var Q={type:x.type||0,name:y||r,model:k||r,parent:S,option:N,events:T,support:M,"protected":I||r,main:E};return W.init[m]?Object[m](U,e,{configurable:!1,enumerable:!1,writable:!0,value:Q}):U[e]=Q,s(y)&&(_.modules[y]=B),B},b.shortName=function(){var e={b:"parent",d:"mix",e:"option",f:"static",g:"extend",h:"private",i:"protected",j:"public",k:"main",m:"support",n:"initialize",l:"entrance"};return function(t){if(t===n)return e;var r={};return h(t,function(t,n){r[n]=e[n]}),r}}(),b.create=function(e,t,n,i,o,a,s,u,l){var c=b(e);return c?new c(t,n,i,o,a,s,u,l):r},b.inheritance=function(e,t){var r=v();return r[f]=t[f],e[f]=new r,e[f].constructor=e,e},b.extendMembers=function(e,r,i){return h(r,function(r,a){var s=i[f][r];if(s===n&&(s=v()),o(s)&&o(a)){var u=e[f][r]=function(){var e=this,i=arguments,o=e[t];o||(o=e[t]={}),o[r]||(o[r]=[]);var l=s.apply(e,i);if((l===e||l===n)&&(l=a.apply(e,i))===n&&(l=e),e[r]===u){var c=o[r].length;if(c>0){if(1===c)o[r][0].call(e,r);else for(var f=0;c>f;f++)o[r][f].call(e,r);o[r].length=0}}return l};e[f][r].parent=s}}),e},b.loadModel=function(e,t){var r=t[c]||t.c,n=e[c];return s(r)&&(r=r.split(" ")),l(r)&&(n?(s(n)&&(n=n.split(" ")),l(n)&&(e[c]=[].union(r,n))):e[c]=r),h(b.shortName("b k l"),function(r,n){var i=t[n]||t[r],o=e[n]||e[r];!o&&i&&(e[n]=i)}),h(b.shortName("d e f g h i j m n"),function(r,n){var i=t[n]||t[r];if(u(i)){var o=p(p({},i,3),n in e?e[n]:e[r]);r in e?e[r]=o:e[n]=o}}),e},b.property=function(t,i,o){var a,s=t;if(o!==!0)return(a=s[f][e])?a[i]:r;for(var l=[];(a=s[f][e])&&u(a)&&a[i]!==n&&(l.push(a[i]),s=a.parent););return l},b.isProtected=function(t,r){for(var n,i=t;(n=i[f][e])&&u(n);){if(l(n[d])&&n[d].has(r))return!0;if(!(i=n.parent))break}return!1},b.support=function(e,t,i,a){if(s(e)){var l=e;if(!(e=(a||W).module(e)))return W.debug({path:"Std.module",memberType:"static",memberName:"support",description:"load failed,module ["+l+"] doesn't exist"}),r}if(u(e)||o(e)){var c=b.property(e,"support");if(s(t)){if(i===n)return c[t]||r;o(i)&&(c[t]=i),u(i)&&p(c,i)}return c}return r}}(),y=W.mold={0:function(e,t){return s(e)&&o(t)},1:function(e){return s(e)||a(e)},2:function(e,t){return t in e?e[t]:e[t]={}},3:function(e,t){return t in e?e[t]:e[t]=[]},or:function(e,t){var n=!1;s(e=e==r?"":e)&&(e=e.split(" "));for(var i=0,o=e.length;o>i;i++)if(e[i]===t){n=!0;break}return n},ins:function(e,t){if(!t)return!1;s(e)&&(e=e.split(" "));for(var r=0,n=e.length;n>r;r++)if(!(e[r]in t))return!1;return!0},ui:function(e,t,n){var i=r;if(o(n)&&(n=n()),s(t)){var a={text:t};n&&p(a,n),i=B(e,a)}else d(t)?i=t:u(t)&&(u(n)&&p(t,n),i=B(t.ui||e,t));return i},dataPath:function(e,t){if(s(e)&&(e=e.toObject()),s(t)&&!f(t=t.trim())&&(t=t.split(".")),!u(e)||!l(t)||f(t))return e;for(var r=0,n=t.length;n>r;r++){var i=t[r];if(!(u(e)&&i in e))return!1;e=e[i]}return e}},A=W.options=b({f:{data:{},get:function(e,t){if(s(e)){var r=A.data[e];return r?r.get(t):{}}if(S.DOM(e)){var n=O(e).attr("std-option");return s(n)&&(n=n.toObject()),u(n)?n:{}}}},j:{keys:function(){return Object.keys(this.data.prototype)},get:function(e){if(s(e))return this.data.prototype[e];var t=new this.data;if("object"!=typeof e)return t;for(var r in e)t[r]=e[r];return t},set:v(function(e,t){this.data.prototype[e]=t},{each:[l,u]}),remove:v(function(e){delete this.data.prototype[e]},{each:[l]})},k:function(e,t){var r=this;if(A.iof(r))return r.data=v(),r.set(e);if(u(e))for(var i in e)A(i,e[i]);else if(s(e)){if(t===n)return A.get(e);u(t)&&(A.data[e]=new A(t))}return A}}),W.items=b(function(){var e="string",t="length",i="__StdItemName__",c={indexOf:function(e,t){return this._list.indexOf(e,t)},itemIndex:function(e){
return this.indexOf(this.items(e))},push:function(e){return this[t]++,this._list.push(e)},merge:function(e){var r=this;return r._list.merge(e),r[t]+=e.length,r},prepend:function(e,t,r){return this.insert(e,t,0,r)},append:function(t,n,o){var a=this,s=r;return n==r&&(n=t,t=r),(s={name:t})&&(o=o||a.converter)&&(n=o.call(a,n,s)),n!=r&&(typeof s.name===e&&W.property(n,i,a._map[s.name]=n),a.push(n)),n||r},insert:function(o,a,s,u){var l=this,c=l._list,f=r;return a==r?(a=o,o=n):s===n&&"number"==typeof a&&(s=a,a=o,o=n),"number"!=typeof s&&(s=-1),(f={name:o,index:s})&&(u=u||l.converter)&&(a=u.call(l,a,f)),a!=r&&(-1===f.index?c.push(a):c.insert(a,f.index),typeof f.name===e&&W.property(a,i,l._map[f.name]=a),l[t]++),a||r},remove:function(e){var n=this,o=n._map,l=n._list,c=r;if(a(e)&&e<n[t])(c=l[e])&&(l.remove(e),n[t]--);else if(s(e))(c=o[e])&&(l.remove(l.indexOf(c)),n[t]--);else{var f=l.indexOf(c=e);-1!==f&&(l.remove(f),n[t]--)}return u(c)&&i in c&&delete o[c[i]],n},items:function(t,i){var a=this,s=a._list,l=r;return t===n?l=s:"number"==typeof t?l=s[t]:typeof t===e?l=a._map[t]:o(t)?l=h(s,function(e,r){return t.call(a,e,r)},i):u(t)&&(l=-1!==s.indexOf(t)?t:h(s,function(e,r){var n=O.get(r);return null!==n&&n===O.get(t)?r:void 0})||l),l},clear:function(){var e=this;return e[t]>0&&(e[t]=0,e._list.clear(),Object.clear(e._map)),e}};return{type:1,j:c,k:function(e){var r=this;r._map={},r._list=[],r[t]=0,l(e)?r.merge(e):u(e)?h(e,function(e,t){r.append(e,t)}):o(e)&&(r.converter=e)}}}),W.unite=function(e,t,i){var c="prototype",f=W.unite.addMember,d=v(),m=t||v(),p=W.unite.methods;return d[c]=e[c],m[c]={length:0,_:function(e){var t=this,i=r;return e===n?i=t:s(e)?i=p[e].apply(t,Array[c].slice.call(arguments,1)):l(e)?i=p.merge.call(t,e):a(e)?i=t[e]:(o(e)||u(e))&&(i=p.push.call(t,e)),i},each:function(e){return p.each.call(this,e)}},h(new d,function(e,t){o(t)&&f(m,e)}),h(i,function(e,t){o(t)&&f(m,e)}),m},W.unite.addMember=function(e,t){e.prototype[t]=function(){for(var e=this,r=0,n=e.length;n>r;r++){var i=e[r][t];i&&i.apply(e[r],arguments)}return e}},W.unite.methods=function(){var e=Array.prototype,t={push:function(e){return this[this.length++]=e},splice:function(t,r){return e.splice.call(this,t,r),this},indexOf:function(t,r){return e.indexOf.call(this,t,r)},has:function(t){return e.has.call(this,t)},remove:function(e){return e===n?this.clear():t.splice.call(this,e,1)},clear:function(){for(var e=this;e.length>0;)delete e[--e.length];return e},merge:function(e){u(e)||W.debug({path:"Std.unite.methods",memberType:"static",memberName:"merge",description:"illegal parameter"});for(var t=this,r=0,n=e.length;n>r;r++)t[t.length++]=e[r];return t},each:function(e){o(e)||W.debug({path:"Std.unite.methods",memberType:"static",memberName:"each",description:"illegal parameter"});for(var t=this,r=0,n=this.length;n>r&&e.call(t[r],r,t[r])!==!1;r++);return t}};return t}(),g("events",function(){var e="__StdEvents__";return{j:{eventExist:function(t,r){var n=this[e];return n&&n[t]?o(r)?n[t].has(r):!0:!1},eventAssign:function(e,t){var n=this;if(!o(t))return n;if(s(e)&&(e=e.split(" ")),l(e))for(var i=e.length,a=[],u=0,c=function(e,o){a[e]=r,n.once(o,function(r){a[e]=r,++u==i&&t.apply(n,a)})},f=0;i>f;f++)c(f,e[f]);return n},on:v(function(t,r,n){var i=y[2](this,e);if(y[0](t,r)){var o=i[t];o||(o=i[t]=[]),a(n)?o.insert(r,n):o.push(r)}},{each:[l,u,s]}),off:v(function(t,r){var i=this,a=i[e];t===n?h(a,function(e){i.off(e)}):r===n&&t in a?a[t].clear():a&&o(r)&&h(a[t],function(e,n){n===r&&a[t].remove(e)})},{each:[l,u,s]}),once:v(function(e,t,r){var n=this;if(y[0](e,t)){var i=function(){return n.off(e,i),t.apply(n,arguments)};n.on(e,i,r)}},{each:[l,u,s]}),emit:v(function(t,r,n){var i,a=this,s=a[e];if(isBool(t))return void(a.emitTurn=t);if(s&&(i=s[t])&&a.emitTurn!==!1){var u=i.length,l=n===!0?"apply":"call";if(1===u)return void i[0][l](a,r);for(var c=0;u>c;){var f=i[c];o(f)&&f[l](a,r),f===i[c]&&c++}}},{each:[l,s]})}}}()),x=W.events=b({a:"events",f:{connect:function(e,t,r,n){var i="__StdConnection__",a=function(){var e=arguments;return o(n)?n.apply(r,e):y[0](n,r[n])?r[n].apply(r,e):void(l(n)&&h(n,function(t,n){if(s(n)){if(o(r[n])&&r[n].apply(r,e)===!1)return!1}else if(o(n)&&n.apply(r,e)===!1)return!1}))};return e[i]||(e[i]={}),e[i][t]||(e[i][t]=[]),e[i][t].push({source:e,sourceEvent:t,target:r,targetMethod:n,handle:a}),e.on(t,a),x},disconnect:function(e,t,r,n){var i="__StdConnection__";if(!e||!e[i])return x;if(!e[i][t]){for(var t in e[i])x.disconnect(e,t);return x}return r?(h(e[i][t],function(o,a){(!n||a.target===r&&a.targetMethod===n)&&(a.source.off(t,a.handle),e[i][t].remove(o))}),x):(h(e[i][t],function(r,n){x.disconnect(e,t,n.target)}),x)}},k:function(e){x.iof(this)&&u(e)&&this.on(e)}}),w=W.action=b({a:"events",e:{text:r,icon:r,main:r,option:r,enable:!0,hotKey:r,hotKeyContext:r,preventDefault:!1},f:{actions:{},func:function(e){if(s(e)||S.action(e)){var t=w(e);t&&(e=function(){t.call.apply(t,arguments)})}return o(e)||(e=v()),e}},n:{init:function(){var e=this,r=e.opts;r.on&&e.on(r.on),r.hotKey&&h(r.hotKey,function(n,i){O(r.hotKeyContext||t).on("keydown["+i+"]",function(t){r.enable&&(e.call(t),r.preventDefault&&t.preventDefault())})})}},j:{call:function(){var e=this,t=arguments,r=e.opts.main;return e.opts.enable&&o(r)?r.apply(e.emit("trigger",t,!0),t):void 0},bind:v(function(e){var t=this.emit("bind",e),n=t.opts,i=n.option;if(e&&o(e.init_opts)&&u(e.opts)&&(n.text!==r&&((i=i||{}).text=n.text),n.icon!==r&&((i=i||{}).icon=n.icon),u(i)&&p(e.opts,i),e.on&&e.off)){var a=t.call.bind(t);h(e.opts.actionTrigger,function(t,r){e.on(r,a)})}})},k:function(e,t){var r=this;if(w.iof(r)){var i=u(e)?e:{};o(e)&&(i.main=e),r.init_opts(i),r.init()}else{if(s(e)){var a=w.actions;return t===n?a[e]:a[e]=new w(t)}if(w.iof(e))return e;c(e)&&h(e,function(e,t){w(e,t)})}}}),W.model("hooker",function(){var e="__StdHook__",t=function(t){return e in t||(t[e]={hooks:{},hands:{}}),t[e]};return{j:{hook:v(function(e,r){var n=this,i=t(n),o=i.hooks;e in o?o[e].push(r):(o[e]=[r],i.hands[e]=function(){for(var t=0,r=o[e].length;r>t;t++)if(o[e][t].apply(this,arguments)===!1)return!1;return!0})},{each:[u,l,s]}),unhook:v(function(e,r){var i=this,o=t(i),a=o.hooks;return e in a?void(r===n?(delete a[e],delete o.hands[e]):h(a[e],function(e,t){return t===r?(this.remove(e),!0):void 0})):!1},{each:[u,l,s]}),act:function(e){var r=this,n=t(r),i=n.hands;return e in i?i[e].apply(r,Array.slice(arguments,1)):!0}}}}),W.hooker=b({a:"hooker",f:{hijack:function(e,t,r){var i,a,l;if(o(e)&&o(t))a=e,l=t;else{if(!((o(e)||u(e))&&s(t)&&o(e[t])&&o(r)))return e;a=e[t],l=r,i=!0}var c=function(){var e=this,t=arguments,r=l.call(e,t);return r===n?a.apply(this,t):r};return i&&(e[t]=c),c}},k:function(e){u(e)&&this.hook(e)}}),k=W.queue=b({a:"events",e:{auto:!1,tasks:r,timeout:0,interval:0},h:{pos:0,retry:0,timer:r},j:{length:0,pos:function(){return this._pos},timeout:function(e){return this.opt("timeout",T.timeUnit(e,"ms"))},interval:function(e){return this.opt("interval",T.timeUnit(e,"ms"))},auto:function(e){return this.opt("auto",e)},prev:function(){return this.jump(this._pos-1,arguments)},next:function(){return this.jump(this._pos+1,arguments)},done:function(){return this.next()},has:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},push:v(function(e){var t=this;o(e)&&(t[t.length++]=e)}),merge:function(e){var t=this;if(l(e))for(var r=0,n=e.length;n>r;r++)o(e[r])&&(t[t.length++]=e[r]);return t},error:function(e){var t=this;return o(e)?t.on("error",e):t.emit("error",[t._pos,e],!0),t},complete:function(e){var t=this;return o(e)?t.on("complete",e):t.emit("complete",e,!0),t},jump:function(e,t){var r=this,n=r.length;return r._retry=0,0>e?r:(n-1>=e&&r[r._pos=e].apply(r,t),e===n&&r.complete(t),r.emit("jump",[e,t],!0))},exec:function(){for(var e=this,t=e.length,r=0;t>r;r++)e[e._pos=r].apply(e,arguments);return r>=t-1&&e.complete(),e},start:function(){var e=this,t=e.opts;return t.timeout>0&&(e._timer=setTimeout(function(){e.emit("timeout")},t.timeout)),e.length>0?e[0].apply(e,arguments):e.complete.apply(e,arguments),e.emit("start")},retry:function(e,t,r){var n=this,i=n._pos;return n._retry++<e?setTimeout(function(){n[i].apply(n,t)},n.interval()):(o(r)&&r.call(n,i),n.error(t)),n},remove:function(e){var t=this;if(e===n)t.clear();else if(a(e)){delete t[e];for(var r=e+1;r<t.length;r++)t[r-1]=t[r],delete t[r];t.length--}else if(o(e))for(var r=t.length;r--;)if(t[r]===e){t.remove(r);break}return t},clear:function(){for(var e=this,t=e.length;t>=0;t--)delete e[t];return e._pos=0,e.length=0,clearTimeout(e._timer),e}},k:function(e){var t=this;t._map={},t.init_opts(u(e)?e:{}),l(e)?t.merge(e):o(e)?t.complete(e):u(e)&&(l(e.tasks)&&t.merge(e.tasks),u(e.on)&&t.on(e.on))}}),W.holder=b(function(){var e="length",t="complete";return{a:"events",j:{length:0,push:v(function(t){var r=this;r[e]++,r._tasks.push({hand:t})},{each:[l]}),hold:function(e){var t=this.push(e);return o(e)?(e.call(t,t,e),t.emit("hold",e)):l(e)&&h(e,function(e,r){r.call(t,t,r),t.emit("hold",r)}),t},release:v(function(r){var n=this;h(n._tasks,function(i,o){return o.hand===r?((0==n.emit("release",r)[e]||0==--n[e])&&n.emit(t),this.remove(i)):void 0})},{each:[l]}),complete:function(r){var n=this.once(t,r);return 0===n[e]&&n.emit(t),n}},k:function(e){var r=this;r._tasks=[],o(e)?r.on(t,e):l(e)&&r.hold(e)}}}),g("plugin",{j:{plugin:v(function(e,t){var r=this,i=y[2](O.iof(r)?r.dom:r,"__StdPlugins__");return t===n?i[e]||null:i[e]=_(e,r,t)},{each:[u]}),removePlugin:v(function(e){var t=this,r=y[2](O.iof(t)?t.dom:t,"__StdPlugins__");if(e===n)for(var i in r)r[i]&&r[i].destroy(),delete r[i];else e in r&&(r[e].destroy(),delete r[e])})}}),_=W.plugin=b({f:{modules:{},exist:function(e){return s(e)||W.debug({path:"Std.plugin",memberType:"static",memberName:"exist",description:"illegal parameter,pluginName must be a string"}),e in _.modules},create:function(e,t,n){var i=y[2](t,"plugins");return e in i&&(o(i[e].destroy)&&i[e].destroy(),delete i[e]),s(e)?(_.exist(e)||W.debug({path:"Std.plugin",memberType:"static",memberName:"create",description:"plugin "+e+" doesn't exist"}),new _.modules[e](t,n)):r},module:function(e,t){if(s(e)){if(t===n)return _.exist(e)||W.debug({path:"Std.plugin",memberType:"static",memberName:"module",description:"plugin "+e+" doesn't exist"}),_.modules[e]||r}else t=e;s(e)&&o(t)&&(t=t.call(W,_)),t=p({},t);var i,a=[],u="prototype";return t.__constructor__=function(e,t){var n=this,i=n.opt?n.init_opts(t||{}):r;n.owner=e,i&&i.on&&n.on(i.on),n.emit("create");for(var o=a.length-1;o>=0&&a[o].call(n,n,i,e)!==!1;o--);},(i=b(e,t,_))===r?i:(i[u].destroy||(i[u].destroy=v()),i[u].pluginName=e,h("on off once emit",function(e,t){i[u][t]=x[u][t]}),a=b.property(i,"main",!0),i)}},k:function(e,t,i){return t===n&&s(e)?_.modules[e]||r:_.create(e,t,i)}}),_.module("drag",{a:"dnd",e:{draggable:!0}}),_.module("drop",function(){var e="activeClass",t="containment",r="toggleClass";return{a:"dnd",e:{level:2,copy:!1,revert:!0,droppable:!0},h:{drop:function(n){var i=this.opts,o=n.self,a=n.containment;switch(i.copy&&(o=o.clone()),i.behavior){case"replace":a.html(o);break;case"append":a.append(o);break;case"prepend":a.prepend(o);break;case"stay":var s,u;n.original?(u=n.y,s=n.x):(u=n.offsetY,s=n.offsetX),o.css({left:s,top:u}),this.initCSSPosition(o)}n[t][r](i[e],!1)}}}}),_.module("sort",{a:"dnd",e:{copy:!1,revert:!0,sortable:!0,items:">*",originalHelperVisible:!1},"private":{sort:function(e){var t=this,r=e.self,n=t.opts.behavior,i=e.containment;i.not(t.owner)&&t.opts.copy&&(r=r.clone()),"insert"==n&&(e.item?r["before"==e.side?"insertBefore":"insertAfter"](e.item):r.appendTo(i))}}}),_.module("resize",function(){var e="original";return{e:{top:!0,right:!0,bottom:!0,left:!0,resizable:!0,handle:r,cursor:r,items:r,opacity:.5,minWidth:10,minHeight:10,helper:"rect",helperClass:"Std_rect",cssPosition:"absolute"},c:"start stop",n:{initEvents:function(e){e()}},j:{resizable:function(e){return this.opt("resizable",e)},destroy:function(){this._un()}},k:function(t,n,i){m(i)&&W.debug({path:"Std.plugin",description:"plugin [resize] doesn't support on layout module"});var a,u,c,v,b,y,x,_,w,k,T,C,N,F,A,L,z,D,H,E=O(i),M=E,P=O(E.document()),I=0,R=0,q=t.cursorCode=0,U=0,X=B.status,Y=g.get("dnd","f").handleCheck,V=function(e,t){return e?s(e)?M=E.context(t,e):d(e)||S.DOM(e)?M=O(e):l(e)&&h(e,function(e,r){return(M=V(r,t))?!0:void 0}):M=E,E.contains(M)||(M=r),M},K=function(e,r,n){var i={e:r,self:M,beginX:F,beginY:A};t.emit(e,p(i,n))},$=function(t){a==e&&!S.DOM(i)&&M.is(i)?i.width(t):c.width(t-v.width)},G=function(t){a==e&&!S.DOM(i)&&M.is(i)?i.height(t):c.height(t-v.height)},Q=function(e){var t=z+e-A,r=T+A-e;r<n.minHeight||R>r||(0>t&&(t=0,r=T+z),c.css("top",t),G(r))},Z=function(e){var t=k+e-F;t<n.minWidth||I>t||(t+L>_+y&&(t=_-y-L),$(t))},J=function(e){var t=T+e-A;t<n.minHeight||R>t||(t+z>w+x&&(t=w-z-x),G(t))},ee=function(e){var t=L+e-F,r=k+F-e;r<n.minWidth||I>r||(0>t&&(t=0,r=k+L),c.css("left",t),$(r))},te=function(){var e=M.offset();C=e.x,N=e.y,k=M.outerWidth(),T=M.outerHeight()},re=function(){(a=n.helper)==e?c=M:"rect"==a&&(c=newDiv(n.helperClass).css({position:n.cssPosition,marginLeft:H,marginTop:D}).appendTo(b.contains("body")?"body":b)),v=c.styleTo({opacity:n.opacity,zIndex:++X.zIndex}).css({left:L,top:z}).boxSize()},ne=function(e){return!X.lock&&i.enable()&&(!o(n.check)||n.check.call(t,M,e)!==!1)},ie=function(e){te(),(b=M.offsetParent()).contains("body")&&(b=P),F=e.pageX,A=e.pageY,D=M.marginTop(),H=M.marginLeft(),z=M.offsetTop()-D,L=M.offsetLeft()-H,_=b.offsetWidth()||b.width(),w=b.offsetHeight()||b.height(),I=i.minWidth(),R=i.minHeight(),u=B("locker",{renderTo:"body",opacity:0,visible:!0}),U=1,j.cursor(M.cursor()),re(),y=b.css("borderTopWidth")+b.css("borderBottomWidth"),x=b.css("borderLeftWidth")+b.css("borderRightWidth"),$(k),G(T),P.on({mousemove:ae,mouseup:oe}),K("start",e)},oe=function(e){var t=c.outerWidth(),n=c.outerHeight(),o=c.offsetLeft(),s=c.offsetTop();U=0,u.destroy(),j.cursor(r),S.DOM(i)||M.not(i)?M.outerWidth(t).outerHeight(n):d(i)&&i.size(t,n),M.left(o-H).top(s-D),"rect"==a?c.remove():c.styleBack("opacity zIndex"),te(X.lock=!1),P.off({mousemove:ae,mouseup:oe}),K("stop",e,{width:t,height:n,left:o,top:s})},ae=function(e){var t=e.pageX,r=e.pageY;1==q?Q(r):2==q?Z(t):3==q?J(r):4==q?ee(t):5==q?(Q(r),ee(t)):6==q?(Q(r),Z(t)):7==q?(J(r),Z(t)):8==q&&(J(r),ee(t)),K("move",e)},se=function(e,r,i){q!==e&&(t.cursorCode=q=e,M.styleBack("cursor"),!f(r)&&Y(E,n.handle,i.target)&&ne(i)&&M.styleTo("cursor",n.cursor||r+"-resize"))},ue=function(e){if(n.resizable&&0===U&&M){var t=e.pageX,r=e.pageY,i=n.top&&r>=N-3&&N+6>r,o=n.right&&t>C+k-6&&C+k+3>t,a=n.bottom&&r>N+T-6&&N+T+3>r,s=n.left&&t>=C-3&&C+6>t;i&&s?se(5,"nw",e):i&&o?se(6,"ne",e):a&&o?se(7,"se",e):a&&s?se(8,"sw",e):i?se(1,"n",e):o?se(2,"e",e):a?se(3,"s",e):s?se(4,"w",e):se(0,"",e)}},le=function(e){Y(E,n.handle,e.target)&&(M&&1==e.which&&0!=q&&ne(e)&&(X.lock=!0,te(),ie(e),e.preventDefault()),K("mousedown",e))},ce=function(){M&&q&&0==U&&(t.cursorCode=q=0,M.styleBack("cursor"))},fe=function(e){0==U&&V(n.items,O(e.target))&&te(),t.initEvents(function(){E.on("mousedown",le,0).on({mouseout:ce,mousemove:ue})})};E.on("mouseover",fe),t._un=function(){E.off({mouseover:fe,mouseout:ce,mousemove:ue,mousedown:le})}}}}),_.module("split",{e:{spacing:4,apply:"stop",helper:"rect",helperClass:"",opacity:.5,data:r,orientation:"",className:"Std_Splitter",handleClass:"_handle",iframeFix:!1},j:{update:function(){this._update()},destroy:function(){this._destroy()}},k:function(e,t,r){var n,i,o,a,s,u,l,c,f,p,v,g,b=t.spacing,y=[],x="overflow",_=function(e){n="vertical"==(t.orientation=e),i="horizontal"==e,o=n?"row-resize":"col-resize"},w=function(t,r){var o,l=r.original?r.x:r.offsetX,d=r.original?r.y:r.offsetY,m=a[t],h=a[t+1],g=O(m).parent();g.styleTo(x,"hidden"),i&&(o=l+b-c,m.width(s+=o),h.width(p-=o).left(c+=o)),n&&(o=d+b-f,m.height(u+=o),h.height(v-=o).top(f+=o)),g.styleBack(x),e.emit("apply")},k=function(e){if(m(r))s=a[e].width(),u=a[e].height(),c=a[e+1].left(),f=a[e+1].top(),p=a[e+1].width(),v=a[e+1].height();else{var t=a[e+1].position();s=a[e].width(),u=a[e].height(),l=a[e].boxSize(),c=t.x,f=t.y,p=a[e+1].width(),v=a[e+1].height(),g=a[e+1].boxSize()}},T=function(){for(var e=function(e,t,r,o,a,s){n&&(e.minTop(t+r),e.maxTop(o+a-s-b)),i&&(e.minLeft(t+r),e.maxLeft(o+a-s-b))},t=0,o=y.length;o>t;t++){var s=y[t].plugin("drag");if(m(r))n&&e(s,a[t].top(),a[t].minHeight(),a[t+1].top(),a[t+1].height(),a[t+1].minHeight()),i&&e(s,a[t].left(),a[t].minWidth(),a[t+1].left(),a[t+1].width(),a[t+1].minWidth());else{var u=a[t].position(),c=a[t+1].position();n&&e(s,u.y,~~a[t].minHeight(),c.y,a[t+1].outerHeight(),~~a[t+1].minHeight()),i&&e(s,u.x,~~a[t].minWidth()+l.width,c.x,a[t+1].outerWidth(),~~a[t+1].minWidth()+g.width)}}},C=function(r,a){var s=y.length,u=newDiv(t.className+" _"+t.orientation).css({cursor:o,padding:0,position:"absolute"}).append(newDiv(t.handleClass).css("position","absolute"));return u.plugin("drag",{x:i,y:n,helper:t.helper,helperClass:t.helperClass,data:t.data,opacity:t.opacity,cursor:o,iframeFix:t.iframeFix,on:{start:function(t){k(s),T(),e.emit("start",t)},move:function(r){"move"==t.apply&&w(s,r),e.emit("move",r)},stop:function(r){"stop"==t.apply&&w(s,r),T(),e.emit("stop",r)}}}),y.push(u.css(r).insertAfter(a)),u},N=function(){a=r.layoutItems(),b=r.spacing(),A(),_(r.orientation);for(var e=0,t=a.length;t-1>e;e++){var o={};i&&(o={left:a[e].left()+a[e].width(),height:r.height(),width:b}),n&&(o={top:a[e].top()+a[e].height(),width:r.width(),height:b}),C(o,a[e])}T()},F=function(){A(),_(t.orientation),a=O(r).clearTextNode().children(),a&&a.each(function(e,t){var r,o=t.is(":last-child"),a={},s=t.outerWidth(),u=t.outerHeight();if(i){var l=t.marginLeft(),c=t.marginRight(),f=t.width()+l+c-b;t.css({marginLeft:0,marginRight:o?0:b}),t.width(o?f+b:f),a={top:(r=t.position(!1)).y,left:r.x+s+l+c-b,height:u,width:b}}if(n){var d=t.marginLeft(),m=t.marginRight(),h=t.height()+d+m-b;t.css({marginTop:0,marginBottom:o?0:b}),t.height(o?h+b:h),a={left:(r=t.position(!1)).x,top:r.y+u+d+m-b,width:s,height:b}}o||C(a,t)}),T()},A=function(){h(y,function(e,t){t.destroy()}),y.clear()};e._destroy=function(){A(),r.off("update",N)},m(r)?(r.on("update",e._update=N),r.rendered&&N()):(d(r)||S.DOM(r))&&(e._update=F()||F)}}),_.module("contextMenu",{e:{menu:r,menuUI:"Menu",handle:r,items:r,cancel:"input,textarea,option",width:"auto",renderTo:"body",propagation:!1},f:{move:function(t,r,n,i){var o=t.width(),a=t.height(),s=O(i),u=s.offsetWidth(),l=s.offsetHeight(),c=O(e);s.is("body")&&(u=Math.max(c.width(),u),l=Math.max(c.height(),l)),t.move(r+o>u?u-o:r,n+a>l?l-a:n)}},i:{move:function(e,t){var r=this.menu;r&&_("contextMenu").move(r,e,t,this.opts.renderTo)}},j:{handle:function(e){return this.opt("handle",e)},show:v(function(){var e=this,t=e.menu;t||(t=e._init()),t&&!t.visible()&&(t.show(),e.emit("show"))}),hide:v(function(){var e=this,t=e.menu;t&&t.visible()&&(t.hide(),e.emit("hide"))}),destroy:function(){var e=this,r=e.menu;return d(r)&&r.destroy(),O(e.owner).off("contextmenu",e._contextMenu),O(t).off("mousedown",e._docEvent),e}},k:function(e,n,i){m(i)&&W.debug({path:"Std.plugin",description:"plugin ["+e.__Std__.name+"] doesn't support on layout module"});var a=O(i),c=r,f=r,h=!1,g=r,b=n.menu,y=function(e){return l(e)&&(e={items:e}),B(e.ui||n.menuUI,p(e,{width:n.width,visible:!1,animation:n.animation}))},x=e._init=function(){if(d(b))c=e.menu=b;else if(o(b)){if(d(c)&&c.destroy(),!u(c=b()))return c=e.menu=null,void(h=!1);c=y(c).on("visible",function(e){e===!1&&(h=e)})}else c=y(l(n.items)?W.extend(b||{},{items:n.items}):b||{});return h=!0,e.menu=c.parent(i).renderTo(n.renderTo),c instanceof B("Menu")&&c.on({click:function(){e.hide()},mousedown:v(!1),itemPress:function(t){e.emit("itemPress",t).hide()}}),c[0].css("position","absolute"),c};O(t).on("mousedown",e._docEvent=function(t){c&&c.visible()&&!c[0].contains(t.target)&&(f=setTimeout(function(){e.hide()},1))}),a.on("contextmenu",e._contextMenu=function(t){var u=O(t.target),l=n.handle,m=r;if(h||x(),!(!d(c)||!i.enable()||!O(n.renderTo)||n.cancel&&a.context(u,n.cancel)||o(n.check)&&n.check.call(e)===!1)){d(l)||S.DOM(l)&&a.contains(u)?m=O(l).contains(u):s(l)?m=a.is(l)||u.is(l)||a.contains(u.parent(l)):l!==r&&(m=!1),clearTimeout(f);var p=c.visible();m===!1||p&&!u.not(g)?(u.is(g)&&p||p)&&e.hide():e.hide().show().move(t.pageX+1,t.pageY+1),m!==!1&&(t.stopFire(),n.propagation||t.stopPropagation()),g=u,t.preventDefault()}})}}),_.module("maximize",{c:"resize",e:{reference:r},j:{destroy:function(){O(e).off("resize",this._resize)}},k:function(t,r,n){m(n)&&W.debug({path:"Std.plugin",description:"plugin [maximize] doesn't support on layout module"});var i=t._resize=function(){var e=O(r.reference)||O(n).parent();n.width(e.width()),n.height(e.height()),t.emit("resize")};O(e).on("resize",i()||i)}}),W.validator=v(),S=W.is=b({f:{number:function(e){return isNumeric(e)},blankChar:function(e){return"\r"===e||"\n"===e||" "===e||"	"===e},alnum:function(e){return e>="0"&&"9">=e||e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e},validAlNum:function(e){if(""===e)return!1;for(var t=e.length-1,r=S.alnum;t>=0;t--)if(!r(e.charAt(t)))return!1;return!0},singleTag:function(){var e={};return h("input link meta img param br hr",function(t,r){e[r]=1}),function(t){return t in e}}(),operatorChar:function(){var e={};return h("+ - * / = ! > < ~ | $ ^",function(t,r){e[r]=1}),function(t){return t in e}}(),color:function(e){var t=!0,n=(e=e.toLowerCase()).length,i=S.validAlNum;if("#"===e.charAt(0)){var o=e.substr(1,n-1),a=n-1;if(!i(o)||3!=a&&6!=a)return!1;for(var s,u=0;a>u;u++)if((s=o.charAt(u))>"f")return!1}else if(i(e)&&25>n)t=e in T.colors;else if(n>=11&&"rgb"===e.substr(0,3)){var l=3;if("a"===e.charAt(3)&&l++,"("!==e.charAt(l)&&")"!==e.charAt(n-1))return!1;var c=e.substring(l+1,n-1);if(c!==r){var f=(c=c.split(",")).length;if(l!==f)return!1;h(c,function(e,r){return!S.number(r)||0>~~r||~~r>255?t=!1:void 0})}}else t=!1;return t},keyword:function(){var e="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".split(",");return function(t){return e.has(t)}}(),DOM:function(e){return u(e)&&(O.iof(e)||isElement(e))},ie:function(e){var t=W.init.ie;return e==r?t.n:t[e]||!1},icon:function(e){return W.icon.iof(e)},action:function(e){return w.iof(e)},module:function(e){if(o(e)){var t=e.prototype.__Std__;return!(!t||!o(t.main))}return!1}},k:function(e,t){var r=!0;if(e===t)return r;if(RegExp.iof(e))return e.test(t);switch(e){case"Number":r=S.number(t);break;case"String":r=s(t)&&!f(t);break;case"Function":r=o(t);break;case"Object":r=u(t);break;case"PlainObject":r=c(t);break;case"Array":r=l(t);break;case"Empty":r=f(t);break;case"NonEmpty":r=!f(t);break;case"Element":r=isElement(t);break;case"Widget":r=d(t);break;case"Layout":r=m(t);break;default:S.DOM(e)&&S.DOM(t)?r=O(e).is(t):e in S&&(r=S[e](t))}return r}}),W.crypto={},T=W.convert=b(function(){var e=Math.min,t=Math.max,i=Math.round;return{f:{percent:function(e,t){return a(t)?float(e/(t||100)*100):(s(e)&&(e="from"===e?0:"to"===e?100:"%"===e.charAt(e.length-1)||S.number(e)?float(e):r),e)},ntol:function(e){var t=[],r=[];do r.push(e%26),e=Math.floor(e/26);while(e-->0);for(;r.length;)t.push(String.fromCharCode(65+r.pop()));return t.join("")},lton:function(e){for(var t=0,r=0,n=e.length;n>t;t++)r+=(e[t].charCodeAt(0)-65)*Math.pow(26,n-t-1),t>0&&(r+=Math.pow(26,n-t));return r},timeUnit:function(e,t,r){if(isNumeric(e)&&(e=float(e)),a(e)){if(t===n)return e;if(r===n)return T.timeUnit(e,"ms",t)}if(s(e)){t===n?r="ms":r===n&&(r=t);for(var i=0,o=e.length;o>i;i++){var u=e.charAt(i);if(!isNumeric(u)){t=e.right(o-i)||"ms",e=int(e.left(i+1));break}}return T.timeUnit(e,t,r)}var l=1e3,c={us:l,ns:l*l},f={s:l,m:60*l,h:60*l*60,d:60*l*60*24},d=function(e,t,r){var n;if("ms"==t)return e;if(t in c)n=!0;else{if(!(t in f))return 0;n=!1}return 1==r?n?e/c[t]:f[t]*e:n?c[t]*e:e/f[t]};return l=t===r?e:"ms"===r?d(e,t,1):d(d(e,t,1),r,0),float(l)},hex2rgb:function(e){function t(t){return e.charAt(t)}return"#"===e.charAt(0)&&(e=e.substr(1)),3==e.length&&(e=t(0)+t(0)+t(1)+t(1)+t(2)+t(2)),{r:int(t(0)+t(1),16),g:int(t(2)+t(3),16),b:int(t(4)+t(5),16)}},rgb2hex:function(e,t,r){u(e)&&(t=e.g,r=e.b,e=e.r);for(var n=(65536*~~e+256*~~t+~~r).toString(16);n.length<6;)n="0"+n;return"#"+n},hsv2rgb:function(e,t,r){if(u(e)&&(t=e.s,r=e.v,e=e.h),e=i(e),t=i(255*t/100),r=i(255*r/100),0==t)return{r:r,g:r,b:r};var n=r,o=(255-t)*r/255,a=(n-o)*(e%60)/60,s=0,l=0,c=0;return 360==e&&(e=0),60>e?(s=n,c=o,l=o+a):120>e?(l=n,c=o,s=n-a):180>e?(l=n,s=o,c=o+a):240>e?(c=n,s=o,l=n-a):300>e?(c=n,l=o,s=o+a):360>e&&(s=n,l=o,c=n-a),{r:i(s),g:i(l),b:i(c)}},rgb2hsv:function(r,n,o){u(r)&&(n=r.g,o=r.b,r=r.r);var a=e(r,n,o),s=t(r,n,o),l=s-a,c=0,f=0,d=s*(100/255);return 0!=s&&(f=255*l/s),c=0==f?-1:r==s?(n-o)/l:n==s?2+(o-r)/l:4+(r-n)/l,(c*=60)<0&&(c+=360),{h:e(360,i(c)),s:i(f*=100/255)||0,v:i(d)||0}},rgb:function(e){var t=r;return"rgb"==e.left(3).toLowerCase()&&(e=e.between("(",")"))!==r&&(e=e.split(",")).length>=3&&(t={r:~~e[0],g:~~e[1],b:~~e[2]},4==e.length&&(t.a=float(e[3]))),t},hsv:function(e){var t=r;return"hsv"==e.left(3).toLowerCase()&&(e=e.between("(",")"))!==r&&3==(e=e.split(",")).length&&(t={h:~~e[0],s:~~e[1],v:~~e[2]}),t},color:function(e){var t=(e=e.trim().toLowerCase()).length,n=T.colors,i=T.hex2rgb,o=r;return 8>t&&"#"===e.charAt(0)?o=i(e):25>t&&e in n?o=i(n[e]):t>9&&("rgb"==e.substr(0,3)||"rgba"==e.substr(0,4)?o=T.rgb(e):"hsv"===e.substr(0,3)&&(e=T.hsv(e),o=T.hsv2rgb(e.h,e.s,e.v))),o}},k:function(){}}}),T.colors=function(){for(var e={},t="black,navy,darkblue,mediumblue,blue,darkgreen,green,teal,darkcyan,deepskyblue,darkturquoise,mediumspringgreen,lime,springgreen,aqua,cyan,midnightblue,dodgerblue,lightseagreen,forestgreen,seagreen,darkslategray,limegreen,mediumseagreen,turquoise,royalblue,steelblue,darkslateblue,mediumturquoise,indigo,darkolivegreen,cadetblue,cornflowerblue,mediumaquamarine,dimgray,dimgrey,slateblue,olivedrab,slategray,lightslategray,mediumslateblue,lawngreen,chartreuse,aquamarine,maroon,purple,olive,gray,skyblue,lightskyblue,blueviolet,darkred,darkmagenta,saddlebrown,darkseagreen,lightgreen,mediumpurple,darkviolet,palegreen,darkorchid,yellowgreen,sienna,brown,darkgray,lightblue,greenyellow,paleturquoise,lightsteelblue,powderblue,firebrick,darkgoldenrod,mediumorchid,rosybrown,darkkhaki,silver,mediumvioletred,indianred,peru,chocolate,tan,lightgray,thistle,orchid,goldenrod,palevioletred,crimson,gainsboro,plum,burlywood,lightcyan,lavender,darksalmon,violet,palegoldenrod,lightcoral,khaki,aliceblue,honeydew,azure,sandybrown,wheat,beige,whitesmoke,mintcream,ghostwhite,salmon,antiquewhite,linen,lightgoldenrodyellow,oldlace,red,fuchsia,magenta,deeppink,orangered,tomato,hotpink,coral,darkorange,lightsalmon,orange,lightpink,pink,gold,peachpuff,navajowhite,moccasin,bisque,mistyrose,blanchedalmond,papayawhip,lavenderblush,seashell,cornsilk,lemonchiffon,floralwhite,snow,yellow,lightyellow,ivory,white".split(","),r="000000,000080,00008B,0000CD,0000FF,006400,008000,008080,008B8B,00BFFF,00CED1,00FA9A,00FF00,00FF7F,00FFFF,00FFFF,191970,1E90FF,20B2AA,228B22,2E8B57,2F4F4F,32CD32,3CB371,40E0D0,4169E1,4682B4,483D8B,48D1CC,4B0082,556B2F,5F9EA0,6495ED,66CDAA,696969,696969,6A5ACD,6B8E23,708090,778899,7B68EE,7CFC00,7FFF00,7FFFD4,800000,800080,808000,808080,87CEEB,87CEFA,8A2BE2,8B0000,8B008B,8B4513,8FBC8F,90EE90,9370DB,9400D3,98FB98,9932CC,9ACD32,A0522D,A52A2A,A9A9A9,ADD8E6,ADFF2F,AFEEEE,B0C4DE,B0E0E6,B22222,B8860B,BA55D3,BC8F8F,BDB76B,C0C0C0,C71585,CD5C5C,CD853F,D2691E,D2B48C,D3D3D3,D8BFD8,DA70D6,DAA520,DB7093,DC143C,DCDCDC,DDA0DD,DEB887,E0FFFF,E6E6FA,E9967A,EE82EE,EEE8AA,F08080,F0E68C,F0F8FF,F0FFF0,F0FFFF,F4A460,F5DEB3,F5F5DC,F5F5F5,F5FFFA,F8F8FF,FA8072,FAEBD7,FAF0E6,FAFAD2,FDF5E6,FF0000,FF00FF,FF00FF,FF1493,FF4500,FF6347,FF69B4,FF7F50,FF8C00,FFA07A,FFA500,FFB6C1,FFC0CB,FFD700,FFDAB9,FFDEAD,FFE4B5,FFE4C4,FFE4E1,FFEBCD,FFEFD5,FFF0F5,FFF5EE,FFF8DC,FFFACD,FFFAF0,FFFAFA,FFFF00,FFFFE0,FFFFF0,FFFFFF".split(","),n=0,i=t.length;i>n;n++)e[t[n]]="#"+r[n];return e}(),C=W.timer=b({a:"events",e:{delay:0,count:"infinite",timeout:0,interval:0,progress:r},f:{now:function(){return Date.now()},test:function(e,t){o(e)||W.debug({path:"Std.timer",memberType:"static",memberName:"test",description:"illegal parameter,parameter1 must be a function"});var r=C.now();if(a(t)&&t>1)for(var n=0;t>n;n++)e(n);else e();return C.now()-r}},h:{t0:0,t1:0,t2:0,t3:0,t4:0,tid:r,tid1:r,tid2:r,state:"ready"},i:{elapsedTime:0,elapsedCount:0,clock:function(e){var t=this,r=C.now();switch(e){case-1:t._t0=r,t._t1=r,t._t2=t._t3=t._t4=0;break;case 0:t._t0=t._t1=t._t2=t._t3=t._t4=0;break;case 1:t.elapsedTime=r-t._t1-t._t2;break;case 2:t._t0=r,t._t2+=r-t._t3;break;case 3:t._t0=r,t._t1=r;break;case 4:t._t4=r-t._t0;break;case 5:t._t4=t.opts.delay;break;case 6:t._t2+=t.opts.delay}return t},startTimer:function(){var e=this.stopTimer(),t=e.opts,r=t.interval,n=t.timeout;s(r)&&"auto"!=r&&(r=T.timeUnit(r,"ms")),s(n)&&(n=T.timeUnit(n,"ms")),(n-=e._t4)>0&&(e._tid2=setTimeout(function(){e.stopTimer().emit("timeout").state("ready")},n));var i=function(){if("running"!=e._state)return e.stopTimer();var n=t.count,o=e.clock(1).elapsedTime,a=++e.elapsedCount;"infinite"!==n&&a>=n?(e.stopTimer(),e.state("completed"),e.emit("progress complete",o)):(e._tid="auto"==r?requestAnimationFrame(i):setTimeout(i,r),e.emit("progress",o))};return e.state("running"),i(),e},stopTimer:function(){var e=this,t=e.opts;return"auto"==t.interval?cancelAnimationFrame(e._tid):clearTimeout(e._tid),clearTimeout(e._tid1),clearTimeout(e._tid2),e}},j:{count:function(e){return this.opt("count",e)},timeout:function(e){return this.opt("timeout",T.timeUnit(e,"ms"))},delay:function(e){return this.opt("delay",T.timeUnit(e,"ms"))},state:function(e){var t=this;return e===n?t._state:(u(e)&&W.debug({path:"Std.timer",memberType:"public",memberName:"state",description:"illegal parameter"}),t.emit("stateChange",t._state=e))},set:function(e){var t=this;return u(e)||W.debug({path:"Std.timer",memberType:"public",memberName:"set",description:"illegal parameter"}),h("count delay timeout interval on",function(r,n){n in e&&t[n](e[n])}),o(e.progress)&&t.on("progress",e.progress),t},interval:function(e){var t=this;return t.opt("interval",T.timeUnit(e,"ms"),function(){"running"==t._state&&t.startTimer()})},start:function(){var e=this,t=e.opts,r=e._state,n=t.delay;return 0===t.count||"running"===r?e:(e.clock("completed"==r?-1:"paused"==r?2:3),(n-=e._t4)>0?(e.state("waiting"),e._tid1=setTimeout(function(){e.clock(6).startTimer()},n)):e.startTimer(),e.emit("start"))},pause:function(){var e=this,t=e.state(),r=C.now();if("waiting"==t)e.clock(4);else{if("running"!=t)return e;e.clock(5)}return e.stopTimer().state("paused")._t3=r,e.emit("pause")},stop:function(){return this.stopTimer().reset().emit("stop")},reset:function(){var e=this.clock(0);return e.elapsedTime=0,e.elapsedCount=0,e.state("ready")},remove:function(){this.stopTimer().reset()}},k:function(e,t){var n=this,i=r;return C.iof(n)?(u(e)?i=e:o(e)&&(a(t)||s(t)?i={interval:t}:u(t)&&(i=t),n.on("progress",e)),void n.set(n.init_opts(i))):new C(e,t).start()}}),N=W.parser=b(function(){var e="arguments",t=S.alnum,i=S.blankChar,o=S.operatorChar;return{type:1,h:{text:"",size:0},f:{json:function(e){return(e+"").toObject()},unit:function(e){for(var n,i="",o="",a=0,s=0,u=e.length;u>a;a++)if((n=e.charAt(a))>="0"&&"9">=n)o+=n;else if("-"===n&&0==a)o+=n;else{if("."!==n)break;if(++s>1)break;o+=n}if(""===o||"-"===o)return r;for(;u>a;a++){if(!t(n=e.charAt(a))&&"%"!==n)return r;i+=n}return{type:"number",unit:i,value:float(o)}}},j:{skipWhiteSpace:function(e,t){for(;t>e&&i(this._text.charAt(e));e++);return e},hex:function(e){var r=this,n="",i=0,o=0,a={error:0,text:""};for(e++;e<r._size;e++){var s=r._text.charAt(e);

if(!t(s)){e--;break}if(s.toLowerCase()>"f"){i=1;break}if(o>6){i=1;break}n+=s,o++}return 3!=o&&6!=o&&(i=1),a.text=n,a.endPos=e,a.error=i,a},keyword:function(e,r){var n=this,i=n._text.charAt(e),a="",s=0,u=2,l={text:""};for(2===r&&(e++,u=0);e<n._size;e++){var c=n._text.charAt(e);if(0===r){if(t(c)){a+=c;continue}}else if(1===r){if(c>="0"&&"9">=c){a+=c;continue}if(t(c)){s=1;break}}else{if(2===r){var f=n._text.charAt(e+1);if("\\"===c&&(f===c||'"'===f||"'"===f)){e++,a+=f;continue}if(c===i){e++,u=2;break}a+=c;continue}if(3===r){if(o(c)){a+=c;continue}}else if(4===r){if(t(c)||"-"===c||"."===c){a+=c;continue}}else if(5===r){if(t(c)||"-"===c){a+=c;continue}}else r!==c&&(a+=c)}break}return 2!=u&&(s=1),l.error=s,l.endPos=--e,l.text=a,l},codeBlockText:function(e,t){for(var r=this,n=0,i={text:""},o="";e<r._size;e++){var a=r._text.charAt(e);if("\\"===a){var s=r._text.charAt(e+1);s===a||s===t||'"'===s||"'"===s?(e++,o+=s):o+=a}else{if("}"===a&&"{"===t||">"===a&&"<"===t)break;if(a===t){var u=r.codeBlockText(++e,t);if(e=u.endPos+1,0!==u.error){n=1;break}o+=a+u.text+r._text.charAt(e)}else if('"'===a||"'"===a){var l=r.keyword(e,2);if(e=l.endPos,0!=l.error){n=1;break}o+=a+l.text+a}else o+=a}}return i.error=n,i.endPos=--e,i.text=o,i},htmlComment:function(e){var t=this,r=0,n=e,i={text:""};return-1===(n=t._text.indexOf("-->",e))?(r=1,n=t._size-1):(n+=2,i.text=t._text.substring(e,n+3)),i.endPos=n,i.error=r,i},argument:function(r,o){var a=this,s=0,u=0,l={};for(l[e]=[],o===n&&(o=")"),++r;r<a._size;r++){var c=a._text.charAt(r);if(","!==c){if(c===o){u=2;break}if(!i(c)){if(0!=u){s=1;break}var f=-1;if(c>=0&&9>=c)f=1;else if(t(c))f=0;else{if("'"!==c&&'"'!==c){s=1;break}f=2}var d=a.keyword(r,f);if(r=d.endPos,0!=d.error){s=1;break}l[e].push({type:f,text:d.text}),u=1}}else u=0}return 2!=u&&(s=1),l.error=s,l.endPos=r,l},pseudoClass:function(r,n){var i,o=this,a=0,s=0,u={};for(u[e]=[],++r;r<o._size;r++){var l=o._text.charAt(r);if(0!=a||!t(l)){if(1==a){if("("!==l){--r;break}0==(i=o.argument(r)).error?h(i[e],function(t,r){var i=r.text;n===!1&&2!==r.type&&(i=i.retype()),u[e].push(i)}):s=1,r=i.endPos;break}s=1;break}if(u.name=(i=o.keyword(r,5)).text,r=i.endPos,0!=i.error){s=1;break}a++}return u.error=s,u.endPos=r,u},attribute:function(e,t){var r=this,n=0,a=0,s={type:0,name:"",operator:""};for(++e;e<r._size;e++){var u=r._text.charAt(e);if(!i(u)){if("]"==u)break;if(0==n){var l=r.keyword(e,4);if(e=l.endPos,0!=l.error){a=l.error;break}s.name=l.text,n++}else if(1==n)if(o(u))s.operator+=u;else{if(""==s.operator){a=1;break}e--,n++}else if(2==n){var c=0;('"'==u||"'"==u)&&(c=2);var f=r.keyword(e,c);if(e=f.endPos,0!=f.error){a=f.error;break}s.type=c,s.value=t===!1&&2!==s.type?f.text.retype():f.text,n++}else if(3==n){a=1;break}}}return s.error=a,s.endPos=e,s},eventFilters:function(e){var t=this,r=0,n="",i=[];for(++e;e<t._size;e++){var o=t._text.charAt(e);"]"===o?i.push(n):"["===o?n="":n+=o}return{filters:i,endPos:e,error:r}}},k:function(e,t){this._text=e,this._size=t===n?e.length:t}}}),W.cookie=b({f:{get:function(e){var t=W.cookie();t||e||W.debug({path:"Std.debug",memberType:"static",memberName:"get",description:"get cookie failed! "}),s(e)||W.debug({path:"Std.cookie",memberType:"static",memberName:"get",description:"illegal parameter,cookieName must be a string"});var i=h(t,function(t,r){return(r=r.trim()).substring(0,e.length+1)==e+"="?decodeURIComponent(r.substring(e.length+1)):void 0},!1,";");return i==n?r:i},set:v(function(e,r,i){var o="",l="";if(s(e)||W.debug({path:"Std.cookie",memberType:"static",memberName:"set",description:"illegal parameter,name must be a string"}),s(r)||a(r)?l=r:u(r)&&i===n&&(i=r),u(i)){var c,f=i.value,d=i.expires,m=i.path,h=i.domain,p=i.secure;f!==n&&(l=f),d!==n&&(a(d)||s(d)?(c=new Date,c.setTime(c.getTime()+d)):d.toUTCString&&(c=d.toUTCString),o+="; expires="+c.toUTCString()),s(m)&&(o+="; path="+m),s(h)&&(o+="; domain="+h),p===!0&&(o+="; secure")}t.cookie=e+"="+F.encodeURI(l)+o},{each:[u]}),remove:v(function(e,t){var r={expires:-1};t!==n&&p(r,t),W.cookie(e,0,r)},{each:[l,s]}),clear:function(e){var t=W.cookie;return h(t(),function(r,n){(n=n.split("=")).length>0&&t.remove(n[0],e)},!1,";"),this}},k:function(e,r,i){var o=W.cookie;return e===n?t.cookie||null:r===n?u(e)?o.set(e):o.get(e):o.set(e,r,i)}}),F=W.url=b({type:1,f:{encodeURI:function(e){return s(e)||a(e)||W.debug({path:"Std.url",memberType:"static",memberName:"encodeURI",description:"illegal parameter,parameter must be a string or a number"}),encodeURIComponent(e+"")},location:function(t){var r=e.location;if(t===n){var i=r.protocol;return{url:r.href,port:r.port||80,protocol:i.substr(0,i.length-1),hostName:r.hostname,pathName:r.pathname}}return s(t)&&(e.location=t),F},convert:function(e,t){s(e)&&s(t)||W.debug({path:"Std.url",memberType:"static",memberName:"convert",description:"illegal parameter,parameter must be a string"});var r="",n=F(e),i="";return"http:/"==t.left(6)||"https:/"==t.left(7)?t:s(t)?(n.host&&(i=n.protocol+"://"+n.host,80!=n.port&&(i+=":"+n.port),i+="/"),"./"==t.left(2)&&(t=n.path+t.substr(2)),r="/"===t.charAt(0)?t.substr(1):n.path+t,"/"===(r=r.replace(/\/\//g,"/")).left(1)&&"/"===i.right(1)&&(r=r.substr(1)),i+r):void 0},param:function(e){if(s(e)||u(e)||W.debug({path:"Std.url",memberType:"static",memberName:"param",description:"illegal parameter,parameter must be a string or an object"}),s(e))return e;var t=[],r=F.encodeURI,i=function(e,o){u(o)?h(o,function(t,r){i(e+"["+t+"]",r)}):o!==n&&t.push(r(e)+"="+r(o))};return h(e,function(e,t){i(e,t)}),t.join("&")},suffix:b({"static":{img:function(e){return"png gif jpg jpeg bmp img tiff ico".split(" ").has(e.toLowerCase())}},main:function(e){s(e)||W.debug({path:"Std.url.suffix",description:"illegal parameter,parameter must be a string"});var t=e.lastIndexOf("."),r=e.length;if(-1!=t&&r-1>t){var n=e.substring(t+1,r);if(-1==n.indexOf("/"))return n}return""}})},j:{protocol:"",host:"",port:80,path:"",file:"",suffix:"",queryString:"",hashString:"",addParam:v(function(e,t){e===n&&W.debug({path:"Std.url",memberType:"public",memberName:"addParam",description:"illegal parameter"});var r,i=this,o="",a="queryString";""!=i[a]&&(i[a]+="&"),u(e)?o=F.param(e):t!==n&&(r={},r[e]=t,o=F.param(r)),i[a]+=o}),toUrl:function(){var e=this,t="",r=e.host,n=e.port,i=e.path;return r&&(t+=e.protocol+"://"+r,80!=n&&(t+=":"+e.port),"/"!==i.charAt(0)&&(i="/"+i)),t+=i+e.file,""!=e.queryString&&(t+="?"+e.queryString),e.hashString&&(t+="#"+e.hashString),t},parse:function(e){s(e)||W.debug({path:"Std.url",memberType:"public",memberName:"parse",description:"illegal parameter"});var t=this,r="",n=e.length,i=e.indexOf("#"),o=0;if(-1!=i&&(t.hashString=e.substring(i+1,n),n=(e=e.substr(0,i)).length),-1==(i=e.indexOf("://",0))?i=0:(t.protocol=e.substr(0,i).toLowerCase(),i+=3,r=-1==(o=e.indexOf("/",i))?e.substr(i,n-i):e.substr(i,o-i),-1==(i=r.indexOf(":",i))?t.host=r:(t.port=~~r.substring(i+1,r.length),t.host=r.substr(0,i))),-1!==o){var a=e.substr(o,(i=e.lastIndexOf("/"))-o);-1==(o=e.indexOf("?",i))?t.file=e.substring(i+1,n):(t.file=e.substring(i+1,o),t.queryString=e.substring(o+1,n)),t.path=""!=a?a+"/":a}return-1!=(i=t.file.lastIndexOf("."))&&(t.suffix=t.file.substr(i+1,t.file.length),t.basename=t.file.substr(0,i)),t}},k:function(t){this.parse(t?t:e.location.href)}}),L=W.ajax=b({type:1,a:"events",e:{type:"get",cache:!0,async:!0,url:"#",data:"",delay:0,format:"text",polling:!1,timeout:0,username:"",password:"",dataType:"*",charset:"UTF-8",contentType:"application/x-www-form-urlencoded; charset=UTF-8",requestHeader:0},f:{hooker:new W.hooker,hook:function(e,t){return L.hooker.hook(e,t)},unhook:function(e,t){return L.hooker.unhook(e,t)},get:function(e,t){return L({url:e,type:"get",success:t})},post:function(e,t,r){return L({url:e,type:"post",data:t,success:r})},json:function(e,t,n){var i="get",a="",l="",c=r,f={cache:!1,dataType:"json",format:"json"};return u(e)?L(p(f,e)):s(e)?(o(t)?(a=e,c=t):o(n)&&(i="post",a=e,l=t,c=n),L(p(f,{type:i,url:a,data:l,success:c}))):L},load:function(e,t,n){var i="get",a="",l="",c=r;return f(e)?L():u(e)?L(e):(s(e)&&(a=e),o(t)?c=t:(u(t)||s(t))&&(i="post",l=t),o(n)&&(i="post",c=n),L({type:i,url:a,data:l,success:c}))}},i:{init:function(){var e=this;return"undefined"!=typeof XMLHttpRequest?e.http=new XMLHttpRequest:h(["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],function(t,n){try{return e.http=new ActiveXObject(n),!1}catch(i){e.http=r}}),e},send:function(){var e=this,t=e.http,n=e.opts,i=n.data,o=n.type.toLowerCase(),a=n.timeout,u=L.hooker,d=r,m=r,p=F(n.url),g=Date.now();"get"==o?(f(i)||p.addParam(i),0==n.cache&&p.addParam("_",g)):s(i)?d=i:(l(i)||c(i))&&(d=F.param(i));var b="error",y="success",x="progress",_="complete",w="readyStateChange";return t.open(o,p.toUrl(),n.async,n.username,n.password),t.setRequestHeader("Content-Type",n.contentType),t.onreadystatechange=function(){if(u.act(w,e)){e.emit(w,t);var i=t.readyState;if(3==i){if(!u.act(x,e))return;e.emit(x,t)}else if(4==i){e.elapsed=Date.now()-g;var o=t.status;if(o>=200&&300>o||304===o){if(!u.act(y,e))return;e.emit(y,e.formatResponse(t.responseText))}else{if(!u.act(b,e))return;e.emit(b,t)}n.polling===!0&&v(function(){e.send()},n.delay)(),m!==r&&(clearTimeout(m),m=r),u.act(_,e)&&e.emit(_,t)}}},e.accept(n.dataType),h(e._requestHeader,function(e,r){t.setRequestHeader(e,r)}),u.act("beforeSend",e)?(e.emit("beforeSend"),t.send(d),a>0&&(m=setTimeout(function(){e.abort(),u.act("timeout",e)&&e.emit("error timeout",t)},a)),u.act("afterSend",e)?e.emit("afterSend"):e):e}},j:{elapsed:0,http:r,status:function(){return this.http.status},statusText:function(){return this.http.statusText},type:function(e){return this.opt("type",e)},data:function(e){return this.opt("data",e)},cache:function(e){return this.opt("cache",e)},delay:function(e){return this.opt("delay",e)},responseText:function(){return this.http.responseText},responseContentLength:function(){return this.responseHeader("Content-Length")},responseUrl:function(){return this.http.responseUrl},url:function(e){var t=this,r=t.opts;return e===n?r.url:(s(e)||W.debug({path:"Std.ajax",memberType:"public",memberName:"ajax",description:"illegal parameter,url must be a string"}),"=>>"===e.left(3)&&(r.url=e.substr(3,e.length),r.cache=!1),t)},responseHeader:function(e){var t=this,i=t.http,o=r;return e===n?o=i.getAllResponseHeaders()||r:s(e)&&(o=i.getResponseHeader(e)||r),o},requestHeader:v(function(e,t){var r=this,i=r._requestHeader;return t===n?i[e]:void(i[e]=t)},{each:[u,l]}),formatResponse:function(e){var t=this.opts.format;return t&&("json"===(t=t.toLowerCase())?e=N.json(e):"text"===t&&(e+="")),e},accept:function(e){var t=this;if(e==n)return t.requestHeader("Accept");var r={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml,text/xml",json:"application/json,text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"};return t.requestHeader("Accept",r[e]||e)},start:function(){var e=this,t=e.delay();return t>0?v(function(){e.send()},t)():e.send(),e},stop:function(){var e=this;return e.opts.polling=!1,e.http.abort(),e},abort:function(){var e=this;return e.http.abort(),e}},l:function(e,t){h("success error timeout complete",function(e,r){t[r]=function(e){return this.on(r,w.func(e))}})},k:function(e){var t=this,r=t.init_opts(e);t._requestHeader={},t.init(),h("success error timeout complete beforeSend afterSend readyStateChange",function(e,n){t.on(n,w.func(r[n]))}),t.requestHeader(r.requestHeader),u(e)?(t.url(r.url),t.start()):s(e)&&(t.url(e),t.start())}}),z=W.loader=b(function(){var i="status",a="error",c="length",d="success",m="loading",p="complete";return{a:"events",f:{css:v(function(e,t){return s(e)||W.debug({path:"Std.loader",memberType:"static",memberName:"css",description:"illegal parameter,url must be a string"}),z.element("css",e,t)},{each:[u]}),js:v(function(e,t){return s(e)||W.debug({path:"Std.loader",memberType:"static",memberName:"js",description:"illegal parameter,url must be a string"}),z.element("js",e,t)},{each:[u]}),testLink:function(e){S.DOM(e)||W.debug({path:"Std.loader",memberType:"static",memberName:"testLink",description:"illegal parameter,element must be an DOMObject or Std.dom Object"});try{return!f(e.sheetText())}catch(t){}return!1},image:v(function(e,t){s(e)||W.debug({path:"Std.loader",memberType:"static",memberName:"image",description:"illegal parameter,url must be a string"});var n=new Image;return n.onload=function(){o(t)&&t.call(n,!0,n),n.onload=r},n.onerror=function(){o(t)&&t.call(n,!1,n),n.onerror=r},n.src=e,n},{each:[u]}),createElement:function(e,t){var n=r;return s(e)||W.debug({path:"Std.loader",memberType:"static",memberName:"createElement",description:"illegal parameter,suffix must be a string"}),"css"===e?n=newDom("link").attr({type:"text/css",rel:"stylesheet",href:t}):("js"===e||"json"===e)&&(n=newDom("script").attr({src:t,async:"false",defer:"true"})),n.appendTo("head")},element:v(function(e,t,r){var n=!1,i=z.createElement(e,t=F.convert(location+"",t)),o=z.testLink,a=function(){v(r).call(i.off(),!0)};if(i&&y.ins(i.dom,"onload onreadystatechange"))i.on("load readystatechange",function(){var t=i.readyState();n||t&&!y.or(["loaded",p],t)||(a(n=!0),"js"===e&&i.remove())}),"css"===e&&"addEventListener"in i.dom&&!("onloadstart"in i.dom)&&z.image(t,function(){!n&&o(i)&&a(n=!0)});else if("css"===e){var s=new C(function(){try{o(i)&&(s.stop(),a())}catch(e){}},10);s.timeout("10s").start()}},{each:[l]})},h:{basePath:"",onlyAjax:!1},i:{length:0,success:0,error:0,loading:0,status:"none",queue:function(e){var t=this._queue;return l(t[e])?t[e]:t[e]=[]},convertUrl:function(e){var t=this._basePath;return e.has("://")||f(t)||(e=F.convert(t,e)),e},indexOf:function(e,t){var r=this._queue[e];if(l(r))for(var n=0,i=r[c];i>n;n++)if(r[n].url===t)return n;return-1},updateStates:function(e){var t=this;return e===!0?t[d]++:t[a]++,t[m]--,t},finish:function(e,t,r){var n=this,s=e[i]=t?d:a;return o(r)?(n.updateStates(t),r.call(n,e)):h(e.callbacks,function(r,i){n.updateStates(t),i.call(n,e)}),n.emit("progress "+s,[e,t],!0),0===n[m]&&n.emit(n[i]=p),n}},j:{require:function(){return this.loadFiles(Array.from(arguments))},basePath:function(e){var t=this;return e===n?t._basePath:(s(e)||W.debug({path:"Std.loader",memberType:"public",memberName:"basePath",description:"parameter must be a string"}),"/"!==e.right(1)&&(e+="/"),t._basePath=e,t)},load:v(function(e,t,i){var a=this,c="",d="",m=r;return e===n&&W.debug({path:"Std.loader",memberType:"public",memberName:"load",description:"illegal parameter"}),u(e)?(d=e.url,c=e.type,m=e.callback):s(e)&&t===n?d=e:s(e)&&l(t)?h(t,function(t,r){s(r)&&a.append(e,r,i)}):i===n?o(t)?(d=e,m=t):s(t)&&(c=e,d=t):s(e)&&s(t)&&(c=e,d=t,m=i),f(c)&&(c=F(d).suffix),a.append(c,d,m)},{each:[l]}),loadQueue:function(e,t){for(var r=this,n=new k,i=e[c],o=0;i>o;o++)n.push(function(){r.load(e[n._pos],function(){n.next()})});return n.on(p,function(){w.func(t).call(r)}).start(),r},loadFiles:function(e,t){var r=this;if(t=w.func(t),s(e))return r.load(e,function(e){t.call(r,e)});if(l(e))for(var n=0,i=e[c],o=new Array(i),a=function(e,a){o[e]=a,++n===i&&t.call(r,o)},u=0;i>u;u++){var f=e[u];s(f)?r.load(f,a.bind(r,u)):l(f)&&r.loadQueue(f,a.bind(r,u))}return r},append:v(function(n,o,a){function u(e){z.element(n,o,function(t,r){e&&(p.data=r,l.finish(p,t))})}var l=this;s(n)&&s(o)||W.debug({path:"Std.loader",memberType:"public",memberName:"append",description:"illegal parameter"});var f=l.queue(n),h=l.indexOf(n,o),p=r;return l[c]++,l[l[i]=m]++,a=w.func(a),l.emit("append"),-1!==h?(p=f[h],p.callbacks.push(a),void(p[i]==d&&l.finish(p,!0,a))):(f.push(p={url:o,data:r,status:"none",callbacks:[]}),p.callbacks.push(a),void v(function(){var r=F(o=l.convertUrl(o)),i=r.host,a="css"===n||"js"===n,s=!!i&&i!==t.domain||!!i&&!!r.port&&r.port!==e.location.port;F.suffix.img(n)?z.image(o,function(e){p.data=this,l.finish(p,e)}):l._onlyAjax||0==s?L({cache:!0,url:o,error:function(){l.finish(p,!1)},success:function(e){"stl"===n.toLowerCase()&&(e=P(e)),p.data=e,a&&!l._onlyAjax?u(!0):l.finish(p,!0)}}):a?u(!0):z.image(o,function(){l.finish(p,!0)})},0)())},{each:[l,u]}),remove:v(function(e,t,r){var i=this,a=i._queue;if(e in a){if(e===n)return i.clear();var u=a[e],l=u[c],f=function(e){for(var t=e[c];t>=0;t--)if(e[t]===r){e.remove(t);break}};if(t===n)for(;l>=0;l--)u[l].callbacks.clear(),u.remove(l);else if(s(t))for(;l>=0;l--)if(u[l].url===t){var d=u[l].callbacks;o(r)?f(d):(d.clear(),u.remove(l));break}}},{each:[l,u]}),clear:function(){var e=this;return e[c]=0,e[d]=0,e[a]=0,e.callbacks=[],e._queue={},e.off()}},k:function(e){var t=this;if(!z.iof(t)){var r=new z;return r.load.apply(r,arguments)}s(e)?t._basePath=e:e===!0&&(t._onlyAjax=e),t.clear()}}}),W.sourceRepository=b(function(){var e="done",t="none",n="ready",i="status",a="reading",c="loading",d="parallel";return{a:"events",i:{queryUrl:function(e,t){var r=this.packages[e].from;return f(r)?t:F.convert(this.paths[r],t)},attrCheck:function(e,t){if(f(e))return!0;if(!u(t.data)||!u(t.data.attr))return!1;for(var r in e)if(!(r in t.data.attr))return!1;return!0},attrStatusCheck:function(t){var r=this,n=r.fileStatus;for(var i in t){var o=t[i].files;if(l(o)){for(var a=0,s=o.length;s>a;a++)if(n[o[a]]!==e)return!1}else if(n[o]!==e)return!1}return!0},attrFiles:function(t,n){var i=[],o=this.fileStatus;return h(t,function(t,a){var s=a.files;(!!a[d]==!!n||n===r)&&(l(s)?h(s,function(t,r){o[r]!==e&&i.push(r)}):o[s]!==e&&i.push(s))}),i},formatUrl:function(e,t){var r=this;return s(t)?r.queryUrl(e,t):l(t)?h(t,function(t,n){return r.queryUrl(e,n)},!0):void 0},formatAttr:function(e,t,r){var n=this;return h(e,function(i,a){var s=t.data.attr[i],l=!0,c=null;if(o(s))c=s(a);else{if(!u(s)||!o(s.files))return void delete e[i];c=s.files(a),l=s[d]!==!1}e[i]={files:n.formatUrl(r,c),parallel:l}}),e},parseName:function(e){var t={},n=e.length,i=e.indexOf("[");if(-1!==i){for(var o=new N(e,n),a=r,s=i;n>s;s++)if("["===e.charAt(s)){if(0!==(a=o.attribute(s,!1)).error)return void W.debug({path:"Std.sourceRepository",memberType:"protected",memberName:"parseName",position:a.endPos,description:"parse error",content:e.substr(0,a.endPos+1)});s=a.endPos,t[a.name]=a.value}e=e.between(0,"[")}return{name:e,attr:t}},createTask:function(t,r){var n=this,s=n[i],u=n.packages,l=n.parseName(t),d=l.name,m=l.attr,h=u[d];return s==a?n.queue.push({name:t,callback:r}):h?n.attrCheck(m,u[d])?(f(m)||(m=n.formatAttr(m,h,d)),h[i]==e?f(m)||n.attrStatusCheck(m)?o(r)&&r(h):(l.ok=!0,n[i]=c):(l.ok=!0,n[i]=h[i]=c)):W.debug({path:"Std.sourceRepository",memberType:"protected",memberName:"createTask",description:"package ["+d+"] doesn't support current attribute.",content:t}):W.debug({path:"Std.sourceRepository",memberType:"protected",memberName:"createTask",description:"package ["+d+"] doesn't exist."}),l}},j:{status:t,fileStatus:r,loading:0,has:function(e){return e in this.packages},add:v(function(e,r,n){this.packages[e]={from:n||"",data:r,status:t,statuses:[]}},{each:[u]}),use:function(e,t){var r=this;if((t=w.func(t))&&s(e))r.load(e,t);else if(l(e)){var n=e.length,i=0;h(e,function(e,o){r.load(o,function(){++i===n&&t()})})}return r},addOrigin:v(function(e,r){var n=this;n[i]===t&&(n[i]=a),s(e)||W.debug({path:"Std.sourceRepository",memberType:"public",memberName:"addOrigin",description:"illegal parameter,parameter1 must be a string"}),s(r)||W.debug({path:"Std.sourceRepository",memberType:"public",memberName:"addOrigin",description:"illegal parameter,parameter2 must be a string"}),n.reader.load((n.paths[e]=r+"/")+"index.js")},{each:[u]}),response:function(e,t){var r=this;o(t)&&(t=t()),s(e)||W.debug({path:"Std.sourceRepository",memberType:"static",memberName:"response",description:"parameter1 must be a string."}),u(t)||W.debug({path:"Std.sourceRepository",memberType:"static",memberName:"response",description:"parameter2 must be a object or a function."}),e in r.paths||W.debug({path:"Std.sourceRepository",memberType:"static",memberName:"response",description:"repository ["+e+"] doesn't exist."}),h(t,function(t,n){r.add(t,n,e)})},load:v(function(t,n){var a=this,c=a.createTask(t,n);if(c.ok){var d=a.loader,m=c.name,p=a.packages[m],v=c.attr,g=!f(v),b=p.data,y=function(){p[i]=e,o(n)&&n(p),a.emit("packageLoad",[m,t,v],!0)},x=function(t,r){var n=a.attrFiles(v,t);f(n)?r():d.loadFiles(n,function(){h(n,function(t,r){a.fileStatus[r]=e}),r()})},_=function(e){var t=0,r=function(){++t===(g?2:1)&&(g?x(!1,y):y())};g&&x(!0,r),e?d.loadFiles(a.formatUrl(m,e),r):r()};if(p[i]===e)x(r,y);else if(s(b)||l(b))_(b);else if(u(b)){var w=b.basics,k=b.files;f(w)?_(k):a.use(w,function(){_(k)})}}})},k:function(e,t){var r=this;r.paths={},r.queue=[],r.packages={},r.fileStatus={},r.reader=(new z).on({complete:function(){r[i]=n,h(r.queue,function(e,t){r.load(t.name,t.callback)}),r.emit(n)}}),r.loader=(new z).on({append:function(e){r[c]++,r.emit("append",e)},progress:function(){r[c]--,r.emit("progress",arguments,!0)},complete:function(){0===this.loading&&r.emit(r[i]="complete")}}),e&&t&&r.addOrigin(e,t)}}}),D=W.source=b({k:function(e,t){D.repository.addOrigin(e,t)},l:function(e){var t=e.repository=new W.sourceRepository;h("use add response has on off",function(r,n){e[n]=function(){return t[n].apply(t,arguments)}})}}),W.use=function(e,t){return s(e)||l(e)||W.debug({path:"Std.use",description:"illegal parameter,parameter must be a string or a array"}),D.repository.use(e,t)},W.dataSource=b({a:"events",e:{type:"ajax",format:"json"},f:{sources:{},types:{}},i:{dataRequest:function(e,t,r,n){var i=this,a=e.data;o(e.handler)&&e.handler.call(i,a,function(r){"json"===i.opts.format&&s(r)&&(r=r.toObject());var o={name:t,value:i.format(r,e.dataPath||""),message:r};setTimeout(function(){n.call(i,o,o.value),i.emit("message",o)})},r)},ajaxRequest:function(e,t,r,i){var o=this,a=o.opts,l=function(e,t){return s(e)?new H(e).build(t):u(e)?h(e,function(e,r){return u(r)?r:new H(r+"").build(t)},!0):e},c={name:t},f={url:c.url=l(s(e)?e:u(e)?e.url:"",r||{}),format:a.format},d=function(e){o.emit(e,c)};e.data!==n&&(c.data=f.data=l(e.data,r||{})),u(e)&&h("type on timeout success error username password charset contentType cache format delay requestHeader",function(t,r){r in e&&(f[r]=e[r])}),L(f).error(function(e){d("error",c.http=e)}).timeout(function(){d("timeout")}).success(function(t){c.value=o.format(t,e.dataPath||""),c.message=t,i.call(o,c,c.value),d("message")})}},j:{type:function(){return this.opt("type")},format:function(e,t){var r=this,i=r.opts,o=i.format;return e===n?o:t===n?(i.format=e,r):"json"===o?y.dataPath(e,t):e},interfaces:function(e,t){var i=this,o=i.opts,a=o.interfaces;return u(a)?e===n?a:t===n?e in a?a[e]:null:(a[e]=t,i):r},call:function(e,t,r){var i=this,a=i.opts.type,s=W.dataSource.types,u=i.interfaces(e);return o(t)&&r===n&&(r=t,t=n),(r=w.func(r))&&u&&("ajax"===a?i.ajaxRequest(u,e,t,r):"data"===a?i.dataRequest(u,e,t,r):a in s&&s[a].call(i,u,e,t,r)),i}},k:function(e,t){var i=this,o=W.dataSource;if(o.iof(i))i.init_opts(e);else if(s(e)){if(t===n)return o.sources[e]||r;if(u(t))return o.sources[e]=new o(t)}else{if(o.iof(e))return e;if(c(e))return new o(e)}}}),H=W.template=b({a:"events",e:{url:"",text:"",renderTo:r,element:r,compressLevel:1},f:{fileCaches:{},templates:{},add:v(function(e,t){H.iof(t)&&(H.templates[e]=t)},{each:[u]}),remove:v(function(e){e===n?this.clear():s(e)&&delete H.templates[e]},{each:[l]}),clear:v(function(){Object.clear(H.templates)}),clearCache:v(function(){Object.clear(H.fileCaches)})},i:{error:0,loaded:!1,analyze:function(e,t){var r=this;return r.analyzer.analyze(e,function(e){0!=this.error&&(r.error=1,r.emit("error","analyzeError")),o(t)&&t.call(r,e)}),r},compile:function(){var e=this,t=e.compiler.compile();return 0!=e.compiler.error?(e.error=2,e.emit("error","compileError"),!1):t},build:function(e){var t=this;return 0!=t.error||!u(e)&&e!=r?r:t.builder.build(e)},checkout:function(e){var t=this.build(e),n=this._renderTo;return n!=r&&n.html(t),t}},j:{compressLevel:function(e){return this.opt("compressLevel",e)},render:function(e,t){var r=this;return o(t)?(r.loaded?t.call(r,r.checkout(e)):r.once("load",function(){t.call(r,r.checkout(e))}),null):r.checkout(e)},renderTo:function(e,t,r){var n=this,i=O(e);return n.render(t,function(e){i&&i.append(e),o(r)&&r.call(n,e)}),n},loadFromString:function(e,t){var r=this;return r.loaded=!1,r.analyze(r._tpl=e,function(e){e!==!1&&(r.compile(),r.loaded=!0,r.emit("load"),o(t)&&t.call(r,e))}),r},loadFromUrl:function(e,t){var r=this;return L.get(e,function(e){s(e)?r.loadFromString(e,t):r.emit("loadError")}),r},loadFromElement:function(e,t){var n=this,i=n._dom=O(e);if(i!==r){var o=i.attr("std-name"),a=i.attr("render-to"),s=i.attr("render-url");f(o)||H.add(o,n),f(a)||(n._renderTo=O(a)),f(s)||(n._renderUrl=s,n.refresh()),n.loadFromString(i.html(),t)}return n},refresh:function(){var e=this,t=e._dom,r=e._renderUrl;return!f(r)&&t&&L.json({url:r,cache:!1,success:function(r){"true"===t.attr("std-render")&&(t.parent().insertBefore(e.render(r),t),t.remove())}}),e}},k:function(e,t){if(!H.iof(this))return s(e)?t===n?H.templates[e]||r:new H(e,t):H.iof(e)?e:r;var i=this,o=r;i.builder=new H.builder(i.compiler=new H.compiler(i.analyzer=new H.analyzer)),t===n?t=e:H.add(e,i),s(t)?(i.init_opts(),i.loadFromString(t)):u(t)&&((o=i.init_opts(t)).on&&i.on(i.on),o.text?i.loadFromString(o.text):o.element?i.loadFromElement(o.element):o.url&&i.loadFromUrl(o.url))}}),H.methods={eval:function(e){return"<script>"+e+"</script>"}},H.statements={"#else":function(){return"}else{"},"#elseif":function(e,t){return"}else if("+this.fixCode(e,t)+"){"},"#break":function(){return"break;"},"#continue":function(){return"continue;"},"with":function(e,t,r){return"if(typeof("+this.fixCode(e,t)+")!=='undefined'){"+r+"}"},"if":function(e,t,r){return"if("+this.fixCode(e,t)+"){"+r+"}"},"for":function(e,t,r){return"for("+this.fixCode(e,t)+"){"+r+"}"},"while":function(e,t,r){return"while("+this.fixCode(e,t)+"){"+r+"}"},each:function(e,t,r,n){var i,o,a=[],s=e,u=0,l="";if(-1!==(o=e.indexOf(" as ",1))){s=e.substr(0,o).trim();var c=e.length,d="";for(o+=4;c>o;o++)if(S.blankChar(i=e.charAt(o)));else if(S.alnum(i))d+=i;else{if(","!==i){u=3,l=i;break}a.push(d),d=""}""!==d&&a.push(d)}if(S.validAlNum(s)||(u=4,l=s),f(a)&&(a=["index","value"]),0!==u){var m="";switch(u){case 3:m="illegal char: "+l;break;case 4:m="illegal variable name: "+l}W.debug({path:"Std.template.builder",description:m,line:n.line})}return"Std.each("+this.varName(s,t)+",function("+a.join(",")+"){"+r+"});"}},H.analyzer=b({h:{loading:0,callback:r},i:{parseCode:function(e){var t,n,i=this,o=r,a=0,s={},u=i.tplLength,l=i.parser,c="",f=0;switch(u>e+2&&!S.alnum(i.tpl.charAt(e+2))&&W.debug({path:"Std.template.analyzer",memberType:"private",memberName:"parseCode",description:"syntax error: "+i.tpl.substring(e,e+2),file:this.src,line:i.currentLine,content:i.tpl.line(i.currentLine+1).trim()}),t=i.tpl.charAt(e+1)){case"=":case"$":e++;case"@":case"#":case"/":o=t}for((s.type=o)!==r&&"="!==o&&"$"!==o&&(0==(n=l.keyword(e+2,0)).error?s.keyword=n.text:f=1,e=n.endPos),++e;u>e;e++)if("\n"!==(t=i.tpl.charAt(e))||0!==a)if(";"!==t&&"{"!==t&&"}"!==t)if(0!==a&&S.blankChar(t))"\n"===t&&i.currentLine++;else{if(a=0,"?"===t&&">"===i.tpl.charAt(e+1)){e++;break}if('"'===t||"'"===t){if(e=(n=l.keyword(e,2)).endPos,0!==n.error){f=1;break}c+=t+n.text.escapeString(t)+t}else c+=t}else a=2,c+=t;else a=1,c+="\n",i.currentLine++;return s.text=c.trim(),s.error=f,s.endPos=e,s}},j:{readFile:function(e){var t=this,n=H.fileCaches;if(e in n)return t.result.push(n[e]),t;var i=t.result.push(r),a=new H.analyzer;return a.line=t.currentLine,a.src=e,++t._loading&&L({url:e,success:function(r){a.analyze(r,function(){t.result[i-1]=n[e]=this,0===--t._loading&&o(t._callback)&&t._callback.call(t,t.result)})}}),t},append:function(e,t){var r=this;if(0===t)e=e.escapeString("'");else if(1===t&&"@"===e.type&&"include"===e.keyword)return r.readFile(e.text.trim());return r.result.push({type:t,line:r.currentLine,data:e}),r},analyze:function(e,t){var r,n,i,a=this.clear(),s=a.tplLength=e.length,u=a.parser=N(a.tpl=e,s),l="",c=0;for(r=0;s>r;r++)if("<"===(n=e.charAt(r)))if("?"===(n=e.charAt(r+1))){if(r=(i=a.parseCode(r+1)).endPos,0!==i.error){c=1;break}a.append(l,0),a.append(i,1),l=""}else if("!"===n&&"-"===e.charAt(r+2)&&"-"===e.charAt(r+3)){if(r=(i=u.htmlComment(r)).endPos,l+=i.text,0===i.error){c=2;break}a.currentLine+=i.text.count("\n")}else r++,l+="<"+n;else"\n"===n&&a.currentLine++,l+=n;if(0!==c){var f="";1===c?f="illegal syntax: ":2===c&&(f="parse error,html comment unexpected end <!-- : "),W.debug({path:"Std.template.analyzer",memberType:"public",memberName:"analyze",description:f+a.tpl.substring(r,r+2),line:a.currentLine,content:a.tpl.line(a.currentLine+1).trim()})}return a.error=c,a.endPos=r,a.append(l,0),o(t)&&(a._loading>0?a._callback=t:t.call(a,a.result)),a},clear:function(){var e=this;return e._loading=0,e._callback=r,e.endPos=0,e.error=0,e.currentLine=0,e.result.clear(),e}},k:function(){this.result=[]}}),H.builder=b({j:{build:function(e){s(e)&&(e=e.toObject());try{return this.compiler.result(e)}catch(t){}return""}},k:function(e){this.compiler=e}}),H.compiler=b({i:{makeFunction:function(e){var t=e+"\nreturn _print";return t="try{var _line=0;"+e+"\nreturn _print}catch(e){Std.debug({path:'Std.template.builder',line:_line,file:_file,description:e.message})}",W.eval("(function(){return function(_data){var _temp;var _print='';"+t+"}})()")},fixCode:function(e,t){for(var n=this,i=e.length,o=N(e,i),a="",s=n.variables,u=0,l=0;i>l;l++){var c=e.charAt(l),f=r;if(S.blankChar(c))a+=c;else if(";"!==c&&"{"!==c&&"}"!==c&&"&"!==c&&"|"!==c){if('"'===c||"'"===c)f=2;else if(c>="0"&&"9">=c)f=1;else if(S.alnum(c))f=0;else{if(!S.operatorChar(c)){a+=c;continue}f=3,u=0}var d=o.keyword(l,f),m=d.text||"";0===f&&"var"===m&&(u=1),2===f&&(m=c+m.escapeString(c)+c),0===f&&"."!==e.charAt(l-1)?S.keyword(m)?a+=m:0===u||2===u?a+=s.has(m)?m:n.varName(m,t):1===u&&(s.push_uniq(m),a+=m):3===f&&"="===m?(u=2,a+=m):a+=m,2===u&&"="!==m&&(u=1),l=d.endPos}else a+=c,u=0}return a}},j:{varName:function(e,t){return t===n?e:t+"."+e},printText:function(e){return"_print+='"+e+"';"},printVariable:function(e,t){return""===e?e:"if((_temp=("+this.varName(e,t)+")) !== void 0){_print+=_temp}"},compile:function(){return this.result=this.makeFunction(this.compileCode())},compileCode:function(){for(var e=this.clear(),t="",r="",n=e.analyzeLength=e.analyzeResult.length;e.i<n;e.i++)null!==(r=e.compileItem(e.analyzeResult[e.i],"_data"))&&(t+=r);return t},compileMethod:function(e,t,r){var n=H.methods;return t in n?this.printText(n[t](r).escapeString("'")):(W.debug({path:"Std.template.compiler",line:e.line,description:"method "+t+" doesn't exist",content:this.analyzer.tpl.line(e.line+1)}),"_print+="+r+";")},compileLogicSyntax:function(e,t,r){var n,i,o=this,a=t.keyword,s=t.text,u="",l=1,c=a+" "+s,f=H.statements;for("with"===a&&(r=o.fixCode(s,r)),u+="_line="+e.line+";",o.i++;o.i<o.analyzeLength;o.i++){var d=o.analyzeResult[o.i],m=d.data,h=d.type;if("/"===(i=m.type)&&1===h&&m.keyword===a)return a in f||W.debug({path:"Std.template.compiler",line:e.line,description:"syntax error,unknown keyword :"+a,content:c}),f[a].call(o,s,r,u,e);if(1===h&&"#"===i)if(i+(n=m.keyword)in f)u+=f[i+n].call(o,m.text,r);else{if(!f[n]){l=2,c=n;break}u+=o.compileItem(d,r)}else u+=o.compileItem(d,r)}if(0!==l){var p="";switch(l){case 1:p="unexpected end: "+c;break;case 2:p="syntax error,unexpected statement: "+c}W.debug({memberType:"public",memberName:"compileLogicSyntax",path:"Std.template.compiler",line:e.line,description:p,content:this.analyzer.tpl.line(e.line+1)})}return!1},compileItem:function(e,t){var n=this,i=r,o=e.data;if(H.analyzer.iof(e))i=new H.compiler(e).compileCode(),i="var _file='"+e.src+"';"+i+";_file=undefined;";else if(1===e.type){var a=o.type;a?"="===a?i=n.printVariable(o.text,t):"$"===a?i=n.printVariable(o.text):"#"===a?i=n.compileLogicSyntax(e,o,t):"@"===a&&(i=n.compileMethod(e,o.keyword,o.text)):i=o.text+"\n"}else f(o)||(i=n.printText(o));return i&&(i="_line="+e.line+";"+i),i},clear:function(){var e=this;return e.error=e.i=0,e.result="",e.variables=[],e.analyzeResult=e.analyzer.result,
e}},k:function(e){var t=this;t.analyzer=e,t.clear()}}),E=W.animation=b({a:"events",f:{data:{scripts:{},keyframes:{}},append:v(function(e,t){if(s(e)||u(e)||W.debug({path:"Std.animation",memberType:"static",memberName:"append",description:"illegal parameter"}),u(e)&&(e=O(e).html()),s(e)){var r=E.parser(e),n=E.data.keyframes;h(r.keyframes,function(e,r){var i=r.name,o=r.rules;t!==!1&&j.keyframes(i,o),n[i]=o})}},{each:[l]}),remove:v(function(e){s(e)||W.debug({path:"Std.animation",memberType:"static",memberName:"remove",description:"illegal parameter"}),s(e)&&delete E.data.keyframes[e]},{each:[l]})},j:{append:function(){},exec:function(){}},k:function(e,t){var r=E.data.scripts;if(s(e)){if(t===n&&e in r)return r[e];o(t)&&(r[e]=t)}}}),E.timingFunction=b({f:{linear:[0,0,1,1],ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],snap:[0,1,.5,1],"cubic-bezier":function(e,t,r,n){function i(e){return((c*e+l)*e+u)*e}function o(e){return((m*e+d)*e+f)*e}function a(e){return(3*c*e+2*l)*e+u}function s(e){for(var t,r,n,o,s=0,u=e;8>s;s++){if(h(n=i(u)-e)<p)return u;if(h(o=a(u))<p)break;u-=n/o}if((u=e)<(t=0))return 0;if(u>(r=1))return 1;for(;r>t;){if(h((n=i(u))-e)<p)return u;e>n?t=u:r=u,u=.5*(r-t)+t}return u}var u=3*e,l=3*(r-e)-u,c=1-u-l,f=3*t,d=3*(n-t)-f,m=1-f-d,h=Math.abs,p=1e-6;return function(e){return o(s(e))}}},k:function(e){var t=r,n="cubic-bezier",i=E.timingFunction;null==e&&(e="linear"),l(e)?t=e:(e=e.trim()).left(12)===n?t=h(e.between("(",")",11).split(","),function(e,t){return float(t.trim())},!0):e in i?t=i[e]:W.debug({path:"Std.animation.timingFunction",description:"rule "+e+" doesn't exist"}),t===r&&(t=i.linear);for(var o=0;4>o;o++)a(t[o])?t[o]>1&&(t[o]=1):t[o]=0;return i[n].apply(this,t)}}),E.parser=b({f:{value:function(e){function t(e,t){var r=t.length,n=[];if("rgb"===e&&3!=r||"rgba"===e&&4!=r)return!1;for(var i=0;r>i;i++){var o=t[i];if("number"!==o.type||!S.number(o.value))return!1;n[i]=float(o.value)}var a={r:n[0],g:n[1],b:n[2]};return 4==r&&(a.a=n[3]),{type:"color",unit:e,value:a}}function n(e){for(var t=0,r="",n="",i=[],o=function(){1==s&&(r+="<?=v"+t++ +"?>",i.push(~~n),n="",s=0)},a=0,s=0,u=e.length;u>a;a++){var l=e.charAt(a);l>="0"&&"9">=l?(0==s&&s++,n+=l):(o(),r+=l)}return o(),{type:"text",tpl:H(r),value:i}}function i(n){var i,o=e.charAt(l+1);if("("===o){l+=2;var s=a();return s===!1?s:"rgb"===n||"rgba"===n?t(n,s):{type:"function",name:n,value:s}}return"%"===o&&++l&&(n+=o),S.number(n)?{type:"number",value:float(n),unit:r}:(i=N.unit(n))!==r?i:n in T.colors?{type:"color",unit:"rgb",value:d(T.colors[n])}:{type:"string",value:n}}function o(e){if("#"===e){var t=f.hex(l);if((l=t.endPos)&&0==t.error)return{type:"color",unit:"rgb",value:d(t.text)}}else if('"'===e||"'"===e){var r=f.keyword(l,2);if((l=r.endPos)>-1&&0==r.error)return n(r.text)}else if(S.alnum(e)||"-"===e||"."===e){var o=f.keyword(l,4);if((l=o.endPos)>-1&&0==o.error){var a=i(o.text);if(a!==!1)return a}}return!1}function a(){for(var t,r=[];c>l&&")"!==(t=e.charAt(l));l++)if(S.blankChar(t))l=f[m](l,c)-1;else if(","!==t){var n=s();if(n===!1)return!1;r.push(1==n.length?n[0]:{type:"array",value:n})}return r}function s(){for(var t,r=[];c>l;l++){if(")"===(t=e.charAt(l))||","===t){l--;break}if(S.blankChar(t))l=f[m](l,c)-1;else{var n=o(t);if(n===!1)return!1;r.push(n)}}return r}var u,l=0,c=(e+="").length,f=new N(e,c),d=T.hex2rgb,m="skipWhiteSpace",h=s();return h===!1&&W.debug({path:"Std.animation.parser",memberType:"static",memberName:"value",position:l+1,content:e}),1===h.length?(u=h[0],u.text=e):u={type:"array",value:h,text:e},u}},k:function(e,t,i){function o(){var t="";for(y++;f>y;y++){var r=e.charAt(y);if("]"===r)break;if(!S.operatorChar(r)){var n=e.substr(0,y).count("\n")+1;return W.debug({path:"Std.animation.parser",line:n,position:y-1,description:"illegal operator",content:e.line(n-1).trim()}),!1}t+=r}return t}function a(){var t,n="",i="",a="",s={},u=0;for(y++;f>y;y++)if("}"===(t=e.charAt(y))||3==u&&";"===t){if(3===u){if("animation-timing-function"===n)s[n]=i;else{var l=E.parser.value(i);if(l===r)return!1;l.operator=a,s[n]=l}n=i=a="",u=0}if("}"===t)break}else if(3>u&&b(t))y=d[v](y,f)-1,0==u&&u++;else if(1==u)if(":"===t)u++;else if("["===t){if(a=o(),a===!1)return!1}else{if("-"!==t&&!g(t))break;n+=t}else if(2==u)b(t)&&(y=d[v](y,f)),y--,u++;else if(3!=u||'"'!==t&&"'"!==t)3==u?i+=t:0===u&&(u++,y--);else{var c=d.keyword(y,2);if((y=c.endPos)&&0!==c.error)return!1;i+=t+c.text.escapeString(t)+t}return s}function s(t){for(var n,i,o="";f>y;y++)if("%"===(n=e.charAt(y))||","===n||"."===n||g(n))o+=n;else{if(!b(n)){if("{"===n)break;return!1}y=d[v](y,f)-1}return(i=a())!==!1?h(o,function(e,n){(n=T.percent(n))!==r&&(t[n]=p(t[n]||{},i))},!1,","):!1}function u(t){var r,n=d.keyword(y,0),i={};for(y=n.endPos+1;f>y&&"{"!==(r=e.charAt(y));y++)if(!b(r))return!1;for(y++;f>y&&"}"!==(r=e.charAt(y));y++)if(g(r)){if(s(i)===!1)return!1}else if(!b(r))return!1;return t.name=n.text,t.rules=i,!0}function l(){if(!g(e.charAt(++y)))return!1;var t,r=d.keyword(y,0);if("keyframes"!==r.text)return!1;for(y=r.endPos+1;f>y;y++){if(g(t=e.charAt(y))){var n={};if(u(n)===!1)return!1;m.keyframes.push(n);break}if(!b(t))return!1}return!0}for(var c,f=i===n?e.length:i,d=N(e,f),m={error:0,endPos:0,keyframes:[]},v="skipWhiteSpace",g=S.alnum,b=S.blankChar,y=t===n?0:t;f>y;y++)if("@"===(c=e.charAt(y))){if(l()===!1){m.error=1;break}}else if(!b(c)){m.error=1;break}if(0!==m.error){var x=e.substr(0,y).count("\n")+1;W.debug({path:"Std.animation.parser",line:x,position:y-1,description:"parse error",content:e.line(x-1).trim()})}return m.endPos=y,m}}),E.keyframes=b(function(){function e(e,t){return e===l?t:E.parser.value(t)}function t(e){for(var t=0,r="",n="",i=0,o=e.length;o>i;i++){var a=e.charAt(i);if("["===a){if(0==t){t++;continue}break}if("]"===a)break;if(1===t&&S.operatorChar(a))n+=a;else{if(0!==t)break;r+=a}}return{name:r,operator:n}}function i(e){if(e in f)return f[e];var t=j.keyframes(e);return t!==r?(E.append(t,!1),f[e]):r}var o="_timingFunction",a="_defaultProperty",l="animation-timing-function",c=E.timingFunction,f=E.data.keyframes;return{a:"events",e:{fps:"auto",delay:0,fillMode:"forwards",duration:0,direction:"normal",iterationCount:1,iterationDelay:!1,timingFunction:"linear"},f:{query:i},h:{timer:r,state:"ready",stage:0,count:0,rules:r,stages:r,percents:r,property:r,backward:!1},i:{backward:function(e){var t=this;return e===n?"alternate"===t.opts.direction&&t._count%2?!0:!1:(t._backward=e,t)},progress:function(e,t,r){var n=this,i=n._stageTimingFunc(t);return n.emit("progress",[n.updateValues(e.begin,e.end,e.from,e.to,i,r),r],!0)},stage:function(e){var t=this;if(e===n)return t._stage;var r=t._stageData=t._stages[e];return t._backward=t.backward(),t._stage=e,t._stageBegin=r.begin,t._stageEnd=r.end,t._stageTimingFunc=r.timingFunction||t[o],t},complete:function(){var e=this,t=e.opts,r=e._timer,n=e._backward,i=e._stageLength,o=t.fillMode,a=t.iterationCount,s=t.iterationDelay;return++e._count<a||"infinite"===a?(e.stage(e.backward()?i-1:0),r.stop().reset(),s||(r._t4=r.delay()),r.start(),e.emit("iteration",e._count)):("none"==o||n?e.progress(e._stages[0],0,100):"forwards"==o&&e.progress(e._stages[i-1],1,100),r.stop(),e._state="completed",e.stage(i-1).emit("complete")),e},findNextValue:function(e,t){for(var i,o=this,s=o._rules,u=o._percents,l=o[a],c=r,f=t||0,d=u.length;d>f;f++)if((i=s[u[f]][e])!==n){c=i;break}return c===r&&l&&e in l&&(c=l[e]),c},loadRules:function(o){var a=this,c={},f=[],d=a._property={},m=!1,h=!0;if(s(o)){var p=o;if(!(o=i(o)))return W.debug({path:"Std.animation.keyframes",memberType:"public",memberName:"loadRules",description:"load rule "+p+" failed,rule is null"}),a;h=!1}else u(o)&&(m=!0);for(var v in o){var g=o[v],b={};if(!((v=T.percent(v))===r||v>100||0>v)){f.push(v);for(var y in g){var x=h?e(y,g[y]+""):g[y],_=y;if(m){var w=t(_);_=w.name,x.operator=w.operator}b[_]=x,b[_]["%"]=v,d[_]===n&&y!==l&&(d[_]=x)}c[v]=b}}return 100 in c||(c[100]={},f.push(100)),a._rules=c,a._percents=f.sort(function(e,t){return e-t}),a},computeValue:function(e,t,r){if(!(e in t&&e in r))return t[e];switch(t[e].type){case"number":t[e].value=Math.val(r[e].value,t[e].operator,t[e].value)}return t[e]},formatStages:function(){for(var e=this,t=e._rules,n=e._stages=[],i=e._percents,o=e._timefns={},s=i[0],u=0,f=p({},e[a]||(0==s?t[s]:{})),d=f,m=0,h=i.length;h>m;m++){var v=i[m],g=t[v],b=n[m]={begin:u,end:v,from:p({},d),to:{},timingFunction:r};l in d&&(o[u]=b.timingFunction=c(d[l]),delete d[l]);for(var y in g)f[y]=e.computeValue(y,g,d);for(y in f){var x=r;if(y in g)x=g[y];else if((x=e.findNextValue(y,m+1))===r)continue;b.to[y]=x}d=f,u=v}return e},updateValues:function(e,t,i,a,s,u){function l(r,n,i,a,l){if(t!==a||e!==i){var c=g._timefns[i]||g[o];return(r+(n-r)*c((u-i)/(a-i)))["float"](l)}var f=n-r,d=a-i,m=Math.over(e-i,d),h=Math.over(t-i,d);return(r+(m*f+(h-m)*f*s))["float"](l)}function c(r,n,i,o){return i+(o-i)/2>e+(t-e)*s?r.value:n.value}function f(e,t,r,n){return t.name+"("+p(e,t,r,n,",")+")"}function d(e,t,n,i){var o=t.unit,a="px"===o||"deg"===o?0:4,s=l(e.value,t.value,n,i,a);return o===r?s:s+o}function m(e,t,r,i){var o=e.value,a=t.value,s=t.unit,u=[l(o.r,a.r,r,i),l(o.g,a.g,r,i),l(o.b,a.b,r,i)],c={r:u[0],g:u[1],b:u[2]};return"rgba"===s&&(o.a===n&&(c.a=1),u.push(c.a=l(o.a,a.a,r,i))),s+"("+u.join(",")+")"}function h(e,t,r,n){for(var i=e.value,o=t.value,a={},s=0,u=i.length;u>s;s++)a["v"+s]=l(i[s],o[s],r,n);return e.tpl.render(a)}function p(e,t,r,i,o){for(var a=e.value,s=t.value,u=[],l=0,c=s.length;c>l;l++){var f=s[l];f!==n&&u.push(v(a[l],f,r,i))}return u.join(o||" ")}function v(e,t,r,i){var o=t.type,a="";return e===n||t===n?"":(e.type!==o||("number"===o?a=d(e,t,r,i):"string"===o?a=c(e,t,r,i):"color"===o?a=m(e,t,r,i):"text"===o?a=h(e,t,r,i):"array"===o?a=p(e,t,r,i):"function"===o&&(a=f(e,t,r,i))),a)}var g=this,b={};for(var y in a){var x=i[y],_=a[y];if(x!=n&&_!=n)b[y]=v(x,_,x["%"]||0,_["%"]||100);else if(1===s&&_!==n){var w=_["%"];b[y]=v(_,_,w,w)}}return b}},j:{elapsedTime:0,fps:function(e){return this.opt("fps",e)},iterationCount:function(e){return this.opt("iterationCount",e)},iterationDelay:function(e){return this.opt("iterationDelay",e)},fillMode:function(e){return this.opt("fillMode",e)},duration:function(e){return s(e)&&(e=T.timeUnit(e,"ms")),this.opt("duration",0>e?0:e)},direction:function(e){return this.opt("direction",e)},delay:function(e){return this.opt("delay",e,function(){this._timer.delay(e)})},timingFunction:function(e){var t=this;return e===n?t[o]:(s(e)||W.debug({path:"Std.animation.keyframes",memberType:"public",memberName:"timingFunction",description:"illegal parameter,parameter must be a string"}),t[o]=c(e),t)},state:function(e){var t=this;return e===n?t._state:(s(e)||W.debug({path:"Std.animation.keyframes",memberType:"public",memberName:"state",description:"illegal parameter,parameter must be a string"}),t.emit("stateChange",t._state=e),t)},rules:function(e){var t=this;return e===n?t._rules:t.loadRules(e)},pause:function(){return this._timer.pause(),this.emit("pause")},stop:function(){var e=this;return e._timer.stop(),e.reset().emit("stop")},start:function(){var e,t=this,n=t.opts,i=n.fps,o=n.duration;if("completed"==t._state&&t.reset(),"auto"==i?e=i:(e=Math.ceil(1e3/~~i),e>o&&(e=o)),t._stages===r){if(t._rules===r)return t;t.formatStages(),t.stage(0),t._stageLength=t._stages.length}return t._timer.interval(e).start(),t.emit("start")},reset:function(){var e=this;return e.stage(0),e._count=0,e._timer.reset(),e},clear:function(){var e=this;return e._count=0,e._property=r,e._rules=r,e._stage=0,e._stages=r,e._percents=r,e._timefns=r,e._timer.reset(),delete e._stageData,delete e._stageBegin,delete e._stageEnd,delete e._stageTimingFunc,e},remove:function(e){var t=this;return e===n&&(t.clear(),t._timer.remove()),t},defaultProperty:function(t){var r=this;return t===n?r[a]:(u(t)||W.debug({path:"Std.animation.keyframes",memberType:"public",memberName:"defaultProperty",description:"illegal parameter,parameter must be an object"}),r[a]=h(t,e,!0),r)}},k:function(e){var t=this;if(!E.keyframes.iof(t))return new E.keyframes(e).start();var r=t.init_opts(e);"on"in r&&t.on(r.on),"defaultProperty"in r&&t.defaultProperty(r.defaultProperty),"rules"in r&&t.rules(r.rules),t.duration(r.duration),t.timingFunction(r.timingFunction),t._timer=new C(function(){var e=t._backward,n=t._stageData,i=t._stageBegin,o=t._stageEnd,a=r.duration,s=t.elapsedTime=this.elapsedTime,u=s/a*100;s>=a?t.complete():!e&&u>=o?t.progress(n,1,o).stage(t._stage+1):e&&i>=100-u?t.progress(n,0,i).stage(t._stage-1):e?(u=100-u,t.progress(n,(u-i)/(o-i),u)):t.progress(n,(u-i)/(o-i),u)},{delay:r.delay,on:{stateChange:function(e){t.state(e)}}})}}}),E.keyframes.united=W.unite(E.keyframes),j=W.css=b({type:1,f:{cursor:function(){var e=r,t=r;return function(i){return i===n?e:void(i!==e&&(t!==(e=r)&&(t.remove(),t=r),f(i)||(t=new j({"*":{cursor:e=i+" !important"}}))))}}(),support:function(e,t){return s(e)||W.debug({path:"Std.css",memberType:"static",memberName:"support",description:"illegal parameter,name must be a string"}),e=e.unCamelCase(),h(W.init.styles,function(r,n){return e===n||t&&Object.contains(e,W.init.cssName)?!0:void 0})||!1},keyframes:function(e,i){var o=t.styleSheets,a=W.init.anim;if(!a||e===n||!o)return r;if(u(i)){var l=j(),c="@"+a+" "+e+"{",f=W.init.cssName;for(var d in i)c+=T.percent(d)+"%{",h(i[d],function(e,t){e in f&&(e=f[e]),c+=e+":"+(s(t)?t:t.text)+";"}),c+="}";return c+="}",l.sheet.insertRule(c,0),j}for(var m=0;m<o.length;m++)for(var p=o[m].cssRules||o[m].rules,v=0;v<p.length;v++){var g=p[v];if(g.name===e&&7===g.type){for(var b="",y=g.cssRules||g.rules,x=0;x<y.length;x++)b+=y[x].cssText;return"@keyframes "+e+"{"+b+"}"}}return r}},j:{length:0,enable:function(e){var t=this,r=t.sheet;return e===n?!r.disabled:(isBool(e)||W.debug({path:"Std.css",memberType:"public",memberName:"enable",description:"illegal parameter,parameter must be a boolean value"}),r.disabled=!e,t)},source:function(){for(var e=this,t=e.rules,r="",n=0;n<e.length;n++)r+=t[n].selectorText+"{"+t[n].style.cssText+"}";return r},insert:function(e,t,r){var n=this,i=n.sheet,o="";if(s(t))o=t;else if(u(t)){var a=W.init.cssName;h(t,function(t,i){if((">"===t||" "===t)&&u(i))return void h(i,function(i,o){n.insert(e+t+i,o,r)});if(t in a&&(t=a[t]),t in j.hooks){var l=j.hooks[t](i);s(l)?o+=l:u(l)&&(o+=l.name+":"+l.value+";")}else o+=t.unCamelCase()+":"+i+";"})}if(!(""===e||""===o||S.ie(6)&&-1!==e.indexOf(">"))){if(i.insertRule)i.insertRule(e+"{"+o+"}",r);else if(i.addRule)try{i.addRule(e,o,r)}catch(l){}return n.length++,n}},append:v(function(e,t){this.insert(e,t,this.length)},{each:[l,u]}),remove:v(function(e){var t=this;if(e===n)t._dom.remove();else if(a(e)){var r=t.sheet;r.deleteRule?r.deleteRule(e):r.removeRule&&r.removeRule(e),t.length--}else if(s(e))for(var i=t.rules,o=i.length-1;o>=0;o--)i[o].selectorText.toLowerCase()===e.toLowerCase()&&t.remove(o)},{each:[l]}),clear:function(){for(var e=this,t=e.length-1;t>=0;t--)e.remove(t);return e}},k:function(e,t){var r=this,n=r._dom=newDom("style").attr("type","text/css").appendTo(t||"head");r.sheet=n.dom.sheet||n.dom.styleSheet,r.rules=r.sheet.cssRules||r.sheet.rules,o(e)&&(e=e.call(r)),u(e)&&r.append(e)}}),j.hooks=function(){var e={},t=W.init.css;return t.opacity||(e.opacity=function(e){return{name:"filter",value:"alpha(opacity="+100*e+")"}}),e}(),j.pseudos=function(){function i(e){return e.parentNode}function o(e,t,r){var n=O.elementIndex(e,null,r)+1,i=!1;if(S.number(t))return n==t;switch(t){case"even":case"2n":i=n%2==0;break;case"odd":case"2n+1":i=n%2==1;break;default:var o=t.replace(/(^|\D+)n/g,"$11n").split("n"),a=0|o[0],s=n-o[1]|0;i=a*s>=0&&s%a==0}return i}var a="tagName",s="readOnly",u={data:function(e,t,r){return e=O(e),r===n?e.hasData(t):e.data(t)==r},index:function(e,t,r){return O.elementIndex(e,r)===t},focus:function(e){return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},target:function(t){var r=e.location.hash;return r&&r.slice(1)===t.id},parent:function(e){return!!e.firstChild},root:function(e){return e===t.documentElement},enabled:function(e){return e.disabled!==!1},disabled:function(e){return e.disabled===!1},"read-only":function(e){return e[s]===s||e[s]===!0},"read-write":function(e){return!u[s](e)},password:function(e){return"password"===e.type},has:function(e,t){return M.query(t,e,!1)!==r},not:function(e,t){return M.matchSelector(e,t)===!1},odd:function(e){return o(e,"odd")},even:function(e){return o(e,"even")},html:function(e,t){return e.innerHTML==t},value:function(e,t){return e.value==t},hidden:function(e){return"none"===O.getStyle(e,"display")||!O.contains(e,e.ownerDocument)||0===e.offsetWidth&&0===e.offsetHeight},visible:function(e){return!u.hidden(e)},checked:function(e){var t=e.nodeName;return"INPUT"===t&&!!e.checked||"OPTION"===t&&!!e.selected},contains:function(e,t,r){return r!==n&&r+""=="true"?(e.innerHTML||"").indexOf(t)>-1:(e.textContent||e.innerText||"").indexOf(t)>-1},text:function(e){var t;return"INPUT"===e.nodeName&&"TEXT"===e.type&&((t=e.getAttribute("type"))==r||"text"===t.toLowerCase())},selected:function(e){return e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},"first-child":function(e){var t=i(e).firstChild;do if(!t||1===t.nodeType)break;while(t=t.nextSibling);return t===e},"last-child":function(e){var t=i(e).lastChild;do if(!t||1===t.nodeType)break;while(t=t.previousSibling);return t===e},"only-child":function(e){var t=!1,r=0,n=i(e).childNodes,o=n.length;if(0==o)return t;for(var a=0;o>a;a++)if(1===n[a].nodeType){if(r>0){t=!1;break}if(n[a]!==e){t=!1;break}t=!0,r++}return t},"nth-child":o,"nth-last-child":function(e,t){return o(e,t,!0)},"nth-of-type":function(e,t){for(var r=1;e=e.previousSibling;)e[a]===e[a]&&r++;return o(e,r,t)},"nth-last-of-type":function(e,t){for(var r=1,n=e[a];e=e.nextSibling;)e[a]===n&&r++;return o(e,r,t)},"first-of-type":function(e){for(var t=e[a];e=e.previousSlibling;)if(e[a]===t)return!1;return!0},"last-of-type":function(e){for(var t=e[a];e=e.nextSibling;)if(e[a]===t)return!1;return!0},"only-of-type":function(e){for(var t=i(e).childNodes,r=t.length-1;r>-1;r--)if(t[r][a]===e[a]&&t[r]!==e)return!1;return!0}};return u}(),W.selector=M=function(){var e=function(e,t){if(9===e.nodeType)return!1;if(t.selector){var n=M.querySelectors(t.selector);if(n!==r)for(var i=0,o=n.length;o>i;i++)if(n[i]===e)return!0;return!1}var a=t["#"],s=t.tag,u=t["."],l=t.attr,c=t[":"],f=t.content;switch(!0){case"*"!==s&&e.nodeName!==s:case a&&e.id!=a:case u&&!O.hasClass(e,u):case l&&!M.matchAttr(e,l):case c&&!M.matchPseudos(e,c):case f&&!M.matchContent(e,f):return!1}return!0},i=function(e,t,r){var n=function(r){if(t!==r)if(">"===e){if(t.parentNode===r)return!0}else if((!e||" "===e)&&O.contains(t,r))return!0;return!1};if(l(r)&&!f(r)){for(var i=0,o=r.length;o>i;i++)if(n(r[i]))return!0;return!1}return u(r)?n(r):!0},o=function(e,n){var i=[],o="getElementsByTagName";if(n){var s=n.length;if(a(s)&&!isElement(n))for(var u=0;s>u;u++)i.union(n[u][o](e));else i=n[o](e)}else i=t[o](e);return 0==i.length?r:i},c=function(e,n,i){var s=[],u="getElementsByClassName";if(n=n?n.toUpperCase():"*",t[u])if(i){var l=i.length;if(a(l)&&!isElement(i))for(var c=0;l>c;c++)s.union(i[c][u](e));else s=i[u](e)}else s=t[u](e);else{var f=o(n,i);if(f==r)return f;for(var d=0,m=f.length;m>d;d++){var h=f[d],p=h.className;p&&(p=p.split(" "))&&p.has(e)&&s.push_uniq(h)}}var v=[];for(c=0,l=s.length;l>c;c++)("*"===n||n===s[c].nodeName)&&v.push(s[c]);return 0==v.length?r:v};return{cache:!0,caches:{},cacheSize:0,maxCacheSize:100,parse:function(e,t){var n=0,i=e.length,o=N(e,i),a=function(){for(var t="";i>n;n++){var r=e.charAt(n);if("\n"===r&&(r=" ")," "!==r&&"	"!==r&&">"!==r&&"<"!==r&&"+"!==r&&"~"!==r&&"/"!==r){n--;break}t+=r}return""===(t=t.trim())&&(t=" "),t},u=function(t){var r=":",i=o.pseudoClass(n,!1);return n=i.endPos,0!=i.error?(W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"pseudosClass error",content:e.substr(0,n+1)}),!1):(t[r]||(t[r]={}),void(t[r][i.name]=i.arguments))},l=function(t){var r=o.attribute(n,!1),i=r.value;return n=r.endPos,0!=r.error?(W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"attribute error,unexpected end",content:e.substr(0,n+1)}),!1):(t.attr||(t.attr=[]),void t.attr.push({name:r.name,operator:r.operator,value:i}))},c=function(t){var r=e.charAt(++n),a="";if('"'===r||"'"===r){var s=o.keyword(n,2);if(n=s.endPos+1,0!=s.error)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"content error",content:e.substr(0,n+1)}),!1;a=s.text}else{var u=o.codeBlockText(n,"{");if(n=u.endPos+1,0!=u.error)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"content error",content:e.substr(0,n+1)}),!1;a=u.text}for(;i>n&&"}"!==(r=e.charAt(n));n++)S.blankChar(r)||W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"content error",content:e.substr(0,n+1)});t.content=a},d={"[":l,":":u,"{":c},m=function(r){for(var a,u=0,l={tag:"*","<":r};i>n;n++){var c=e.charAt(n);if("#"===c||"."===c)a=o.keyword(++n,5),n=a.endPos,s(l[c])?l[c]+=" "+a.text:l[c]=a.text;else if("["===c||":"===c||"{"===c){if(d[c](l)===!1)return!1}else if("("===c){if(0!==u)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"parse error",content:e.substr(0,n+1)}),!1;n++;var m=p();f(m)||(l.selector=m)}else if("*"===c)if(0===u)l.tag=c;else{if(0!==(a=o.keyword(++n,1)).error)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"parse error",content:e.substr(0,n+1)}),!1;n=a.endPos,l[c]=a.text}else if(S.alnum(c)||"-"===c){if(0!==u)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"parse error",content:e.substr(0,n+1)}),!1;n=(a=o.keyword(n,5)).endPos,l.tag=t===!1?a.text:a.text.toUpperCase()}else{if('"'!==c&&"'"!==c){n--;break}var h=o.keyword(n,2);if(n=h.endPos,0!=h.error)return W.debug({path:"Std.selector",memberType:"static",memberName:"parse",position:n,description:"parse error",content:e.substr(0,n+1)}),!1;l.tag="",l.text=h.text}u=2}return 0==u?!1:l},h=function(){for(var t=[],o=r;i>n;n++){var s=e.charAt(n);if(","===s||")"===s)break;if("\n"!==s&&" "!==s&&"	"!==s&&">"!==s&&"<"!==s&&"+"!==s&&"~"!==s){var u=m(o);if(u===!1)return u;t.push(u)}else o=a()}return t},p=function(){for(var t=[];i>n;n++){var r=e.charAt(n);if(!S.blankChar(r)&&","!==r){if(")"===r)break;var o=h();if(!o)break;if(f(o)||t.push(o),")"===e.charAt(n))break}}return t};return p()},matchContent:function(e,t){var r=e.innerHTML;return r?r.trim()===t.trim():!1},matchAttr:function(e,t){var i=0,o=t.length;if(!e.getAttribute)return!1;for(var a=0;o>a;a++){var s=t[a],u=s.operator,l=s.value,c=e.getAttribute(s.name);if("="!=u&&"=="!=u&&""!=u||l!==n){if(!Math.check(c,u,s.value))break}else if(c==r)break;i++}return i==o},matchPseudos:function(e,t){for(var r in t){var n=j.pseudos[r];if(!n||!n.apply(e,[e].mergeArray(t[r])))return!1}return!0},matchElement:e,findElements:function(e,n,i){if(e.selector)return M.querySelectors(e.selector,n);var a=e.tag,s=e["#"],u=e["."],l=e.attr,f=e[":"],d=e.content,m=r;if(s){var h=t.getElementById(s);if(h===r)return r;m=[h]}else m=u?c(u,a,n):o(a,n);if(!(u||l||f||d))return i===!1&&m!==r?m[0]:m;if(m===r)return m;for(var p=0,v=[],g=m.length;g>p;p++){var b=m[p];if(!(s&&"*"!==a&&b.nodeName!==a||u&&!O.hasClass(b,u)||l&&!M.matchAttr(b,l)||f&&!M.matchPseudos(b,f)||d&&!M.matchContent(b,d))){if(i===!1)return b;v.push(b)}}return 0==v.length?r:v},findPrevItem:function(t,n,i,o){var a=n;if(">"==t){if(!(a=a.parentNode)||o&&Object.contains(a,o))return r;if(e(a,i))return a}else if(" "==t){for(var s=[];(a=a.parentNode)&&(!o||!Object.contains(a,o));)e(a,i)&&s.push(a);if(1==s.length)return s[0];if(!f(s))return s}else if("+"==t){for(;n=n.previousSibling;)if(1===n.nodeType){if(e(n,i))return n;break}}else if("~"==t){for(var u=[];n=n.previousSibling;)1===n.nodeType&&e(n,i)&&u.push(n);if(0!=u.length)return u}return r},matchSelectorItem:function(e,t,r){for(var n=t.length,o=t[n-1]["<"],a=n-2,s=[e];a>=0;a--){for(var u=[],c=t[a],f=0,d=s.length;d>f;f++){var m=M.findPrevItem(o,s[f],c,r);m&&(l(m)?u.mergeArray(m):u.push(m))}if(0==u.length)return!1;s=u,o=t[a]["<"]}for(var h=0;h<s.length;h++)if(i(o,s[h],r))return!0;return!1},matchSelector:function(t,r,n){s(r)&&(r=M.parseSelector(r));for(var i=0,o=r.length;o>i;i++){var a=r[i],u=a.length;if(!(1>u)&&e(t,a[u-1])&&M.matchSelectorItem(t,a,n))return!0}return!1},querySelector:function(e,t,n){if(0===e.length)return r;var i=M.findElements(e[e.length-1],t);if(i===r)return r;for(var o=0,a=i.length,s=[];a>o;o++)if(M.matchSelectorItem(i[o],e,t)===!0){if(n===!1)return i[o];s.push(i[o])}return 0==s.length?r:s},querySelectors:function(e,t,n){var i=e.length,o=M.querySelector;if(1===i)return o(e[0],t,n);for(var a=0,s=[];i>a;a++){var u=o(e[a],t,n);if(u){if(n===!1)return u;for(var l=0,c=u.length;c>l;l++)s.push_uniq(u[l])}}return 0==s.length?r:s},parseSelector:function(e){var t=r,n=M.caches,i=M.parse;return!M.cache||e.length>50?i(e):(M.cacheSize>M.maxCacheSize&&(M.caches=n={},M.cacheSize=0),e in n?t=n[e]:(M.cacheSize++,t=n[e]=i(e)),t)},query:function(e,t,n){return s(t)&&(e=t+" "+e,t=r),M.querySelectors(M.parseSelector(e),t,n)}}}(),M.html=b({f:{attrText:function(e){var t=e.name,n=e.operator,i=e.value||"";return""===n&&i==r?t:t+n+'"'+i.escapeString('"')+'"'},nodeHtml:function(e,t,n){var i="<"+(e=e.toLowerCase());return h(t,function(e,t){i+=" ",i+=s(t)?t:M.html.attrText(t)}),f(n)&&S.singleTag(e)?i+" />":(i+=">",n!=r&&(i+=n),i+"</"+e+">")},makeNodeHtml:function(e,t){var r="",n="",i=e.tag,o=e["*"],a=e["#"],s=e["."],u=e.attr,l=e[":"],c=e.content,f=[],d=function(e,t){f.push({name:e,operator:"=",value:t})};if("*"===i&&(i="div"),a&&d("id",a),s&&d("class",s),u&&f.mergeArray(u),c&&(n+=c),t&&(n+=t),l&&(h({password:"type"},function(e,t){l[e]&&d(t,e)}),h("checked selected disabled readOnly hideFocus",function(e,t){l[t]&&f.push(t)})),""===i)return e.text;if(o)for(var m=0;o>m;m++)r+=M.html.nodeHtml(i,f,n);else r=M.html.nodeHtml(i,f,n);return r},makeHtml:function(e,t){var n="",i="";t!=r&&(n=i=t);for(var o=e.length-1,a=r;o>=0;o--){var s=0,u=e[o],l="";a&&" "!=a&&">"!=a?("+"==a||"~"==a)&&(s=1,i=t):i=n,u.selector?h(u.selector,function(e,t){l+=M.html.makeHtml(t,i)}):l=M.html.makeNodeHtml(u,i),0==s?n=l:1==s&&(n=l+n),a=u["<"]}return n}},k:function(e,t){e===n&&W.debug({path:"Std.selector.html",description:"illegal parameter"});for(var r="",i=M.parseSelector(e),o=0,a=i.length;a>o;o++)r+=M.html.makeHtml(i[o],t);return r}}),O=W.dom=b(function(){var c=/<(?:script|style|link)/i,g=!0,b=[],_=W.init,k=_.dom,T=_.cssName,F="__StdUI__",z="__StdLayout__",D="__StdStyle__",P="__StdEvents__",R="__StdData__",q="__StdAnimation__",U="__StdPlugins__",X=function(e,t){e.dom||W.debug({path:"Std.dom",memberType:"public",memberName:t,description:"current Std.dom object cannot be used, because the original DOM Object is null,maybe it has been destroyed."})},Y={extend:v(function(e,t){s(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"extend",description:"illegal parameter,name must be a string"}),O.united.addMember(e),this.prototype[e]=t},{each:[u,l]}),on:function(e,t){return l(e)||s(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"on",description:"illegal parameter,eventName must be a string or a array"}),h(t,function(t,r){return O.united(t).on(e,r)},!0)},off:function(e,t){return l(e)||s(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"off",description:"illegal parameter,eventName must be a string or a array"}),u(t)||W.debug({path:"Std.dom",memberType:"static",memberName:"off",description:"illegal parameter,group must be an object"}),h(t,function(t,r){return W.doms(t).off(e,r)},!0)},emit:function(e,t,n,i){var o;return e==r?o=g:isBool(e)?(o=O,g=e,h(t,function(e,t){g?b.remove(t):b.push_uniq(t)})):o=W.doms(t).emit(n,i),o},text:function(e){return t.createTextNode(e)},absDiv:function(e,t,r,n,i,o){var a=newDiv().css({left:e,top:t,width:r,height:n,zIndex:i,position:"absolute"});return o&&a.appendTo(o),a},hasClass:function(e,t){var r=e.className;if(!r)return!1;r=r.split(" "),s(t)&&(t=t.split(" "));var n=t.length,i=r.length;if(0==i||0==n)return!1;for(var o=0,a=0;i>a;a++)for(var u=r[a],l=0;n>l;l++)if(u==t[l]){o++;break}return o===n}},V=Y.descendant=function(e,t){if(!e||!t)return!1;var r=t.length;if(a(r)){for(var n=0;r>n;n++)if(V(e,t[n]))return!0}else for(;e=e.parentNode;)if(e===t)return!0;return!1},K=Y.contains=function(e,t){var r=!1;return r=e===t?!0:k.contains?$(e)?!1:(Z(t)||$(t)?ee(t):t).contains(e):k.compareDocPos?!!(16&t.compareDocumentPosition(e)):V(e,t)},$=Y.isWindow=function(t){return t!=r&&(t===t.window||t===e)},G=Y.window=function(t,r){return $(t)?t:Z(t)?t.defaultView||t.parentWindow:r===!0?!1:e},Q=Y.inDocument=function(e){return K(e,ee(e))},Z=Y.isDocument=function(e){return e!=r&&9===e.nodeType},J=Y.document=function(e){return Z(e)?e:G(e).document},ee=Y.documentElement=function(e){return J(e).documentElement},te=Y.filter=function(e,t,r,i){for(var o=[],a=0,s=e.length;s>a;a++){var u=i?e[a]:O(e[a]),l=t.call(r,a,u);if(l===!0)o.push(u);else{if(l===!1)break;l!==n&&o.push(l)}}return o},re=Y.loadHTML=function(e,n){a(e)&&(e+=""),s(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"loadHTML",description:"illegal parameter,text must be a string"});var i=W.init.dom.innerFullHTML,o=t.createElement("div"),u=[];if(o.innerHTML=i?"<a>a</a>"+e:e,i&&o.removeChild(o.firstChild),n!==!1&&-1!=e.indexOf("</script>")){var l=o.getElementsByTagName("script");if(l!==r)for(var c=0,f=l.length;f>c;c++){var d=l[c],m=d.type;d.type=m?m+"/":"//",d["*"]=1}}for(u.mergeArray(o.childNodes);o.firstChild;)o.removeChild(o.firstChild);return u},ne=Y.behaviorScript=function(e,t,r){var n=O(e),i="__StdLoadScript__",o="text/std-",a=e.type;if(n.hasData(i))return!1;if(n.data(i,1),f(a)||"text/javascript"===a){if(t!==!1){var s=n.attr("src");f(s)?r?r(n.text()):W.eval(n.text()):(newDom("script").attr("src",s).insertAfter(n),n.remove())}}else if(a.left(9)===o){var u=n.attr("std-name"),l="true"===n.attr("std-render");if(a===o+"animation")E.append(n.html());else if(a===o+"css-selector"){if(l){var c=M.html(n.html()),d=fe(c);n.parent().insertBefore(d,n),n.remove()}}else if(a===o+"template")(l||!f(u))&&new H({element:n});else if(a!==o+"ui"||f(u)){if(a===o+"icon"&&u)W.icon(u,n.trimHTML());else if(a===o+"main")try{I(new Function(n.html()))}catch(m){W.debug({path:"Std.dom",memberType:"static",memberName:"behaviorScript",description:"parse error",data:m+"",content:n.html()})}else if(a===o+"include"){var h=function(e){L.get(n.attr("uri"),function(t){n.parent().insertAfter(t,n),n.remove(),e&&e()})};"true"===n.attr("std-hold")?I.hold(function(e,t){h(function(){e.release(t)})}):h()}}else B.rule.add(u,n.html())}else a in ne&&ne[a](a,n);return!0},ie=function(e,t){var n=e.ownerDocument;if(t.call(e,e),K(e,n)){var i=e.getElementsByTagName("script");if(i!==r)for(var o=0,a=i.length;a>o;o++){var u=i[o];if(1===u["*"]){var l=u.type;"//"===l?u.removeAttribute("type"):s(l)&&"/"===l.right(1)&&(u.type=l.substr(0,l.length-1)),u["*"]=0,ne(u)}}}},oe=Y.get=function(e,t){var i=r;return e===n||e===r?i:("object"==typeof e?e instanceof O?i=e.dom:e.nodeType||$(e)?i=e:d(e)&&e[0]?i=e[0].dom:l(e)?i=oe(e[0]):e.jquery&&e.length?i=e.get(0):S.icon(e)&&(i=e.element().dom):"string"==typeof e&&(i=pe(e,t,!1)),i)},ae=Y.getStyle=function(e,t,n){var i=e.style;if(t in T&&(t=T[t]),n!==!1&&i&&i[t])return i[t];if(e.currentStyle)return e.currentStyle[t];if(G(e).getComputedStyle)try{return G(e).getComputedStyle(e,r).getPropertyValue(t.unCamelCase())}catch(o){}return""},se=Y.setStyle=function(e,t,r){t in T&&(t=T[t]);try{e.style[t]=r+""}catch(n){}return O},ue=Y.clear=function(e){for(var t;t=e.firstChild;)e.removeChild(t);return O},le=Y.addListener=function(e,t,r,n,i){var o="addEventListener";return e[o]?e[o](t,r,n||!1,i):e.attachEvent("on"+t,r),
this},ce=Y.removeListener=function(e,t,r,n,i){var o="removeEventListener";return e[o]?e[o](t,r,n||!1,i):e.detachEvent("on"+t,r),O},fe=Y.fragment=function(e,i){var o=t.createDocumentFragment();if(e===n)return o;if(l(e))for(var c=0,f=e.length;f>c;c++){var d=oe(e[c]);d!==r&&o.appendChild(d)}else if(s(e)||a(e))for(var c=0,m=re(e,i),f=m.length;f>c;c++)o.appendChild(m[c]);else u(e)&&o.appendChild(oe(e));return o},de=Y.clone=function(e,t){if(S.DOM(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"clone",description:"illegal parameter,source node must be a DOM Object"}),!e)return r;var i=e.cloneNode(t===n?!0:t);return h([F,z,D,P,R,q,U],function(t,r){r in e&&i.removeAttribute(r)}),i},me=Y.insertHTML=function(e,t,r){return S.DOM(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"insertHTML",description:"illegal parameter,the first parameter must be a DOM Object",content:e}),ie(e.parentNode,function(){if(e.insertAdjacentHTML)e.insertAdjacentHTML(t.toLowerCase(),r);else{var n=fe(r),i=e.parentNode;"BeforeBegin"==t?i&&i.insertBefore(n,e):"AfterBegin"==t?e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n):"BeforeEnd"==t?e.appendChild(n):"AfterEnd"==t&&i&&(i.lastChild===e?i.appendChild(n):i.insertBefore(n,e.nextSibling))}}),O},he=Y.elementIndex=function(e,t,n){S.DOM(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"element",description:"illegal parameter,the first parameter must be a DOM Object",content:e});var i=-1,a=e.parentNode,u=r;if(!a)return i;var l=a.childNodes;if(!l||0===l.length)return i;s(t)&&(u=M.parseSelector(t));for(var c=0,f=l.length;f>c;c++){var d=l[c];if(1===d.nodeType)if(o(t)){var m=t.call(e,c,d);if(m===!1)continue;if(i++,m===!0)break}else{if(u&&!M.matchSelector(d,u))continue;i++}if(d===e)break}return n===!0&&-1!==i&&(i=f-i),i},pe=Y.query=function(e,t,n){return s(e)||W.debug({path:"Std.dom",memberType:"static",memberName:"query",description:"illegal parameter,selector must be a string"}),t!==r&&!l(t)&&u(t)&&(t=oe(t)),M.query(e,t,n)},ve=(Y.create=function(){},{clone:function(e){return X(this,"clone"),O(de(this.dom,e))},document:function(){return X(this,"document"),J(this.dom)},parentNode:function(){return X(this,"parentNode"),this.dom.parentNode||r},contains:function(e){return X(this,"contains"),K(oe(e),this.dom)},inDocument:function(){return X(this,"inDocument"),Q(this.dom)},enable:function(e){X(this,"enable");var t=this,r="disable";return e===!1?!t.attr(r):(e?t.attr(r,"true"):t.removeAttr("disable"),t)},index:function(e,t){X(this,"index");var r=this,n=r.parent();return a(e)?(n&&n.insert(r,e),r):he(r.dom,e,t)},offsetParent:function(){X(this,"offsetParent");for(var e=this.dom,t=e.offsetParent||ee(e);t&&"HTML"!==t.nodeName&&"static"===ae(t,"position");)t=t.offsetParent;return O(t||ee(e))},parent:function(e){if(X(this,"parent"),e===n)return O(this.parentNode());for(var t=this,i=o(e);t=t.parent();)if(i){if(e.call(this,t))return t}else if(t.is(e))return t;return r},cssText:function(e,t){X(this,"cssText");var r=this,i=r.dom.style,o="cssText";if(e===n)return i[o];if(u(e)){var a="";h(e,function(e,t){if(e in T)T=T[e];else if(e in j.hooks){var r=j.hooks[e](t);e=r.name,t=r.value}a+=e+":"+t+";"}),e=a}return t===!0?i[o]+=";"+e:i[o]=e,r},backgroundImage:function(e){X(this,"backgroundImage");var t=this,r="backgroundImage";return e!==n?t.css(r,"url('"+e+"')"):(e=t.css(r))?(h(e=e.replace(/url\(([^)]+)\)/g,"$1"),function(t,r){'"'===r&&e.split(t,1)}),e):""},boxSize:function(){var e="margin",t="padding",r="border",n=[t+"Top",t+"Bottom",r+"TopWidth",r+"BottomWidth"],i=[t+"Right",t+"Left",r+"RightWidth",r+"LeftWidth"];return function(t,r){X(this,"boxSize");for(var o=this,a={width:0,height:0,extraHeight:0,extraWidth:0},s=0;4>s;s++){var u=i[s],l=n[s];r===!0?(a[u]=0,a[l]=0):(a.width+=a[u]=int(o.css(u))||0,a.height+=a[l]=int(o.css(l))||0)}if(t===!0){var c=[e+"Top",e+"Right",e+"Bottom",e+"Left"];a.height+=(a[c[0]]=int(o.css(c[0])))+(a[c[2]]=int(o.css(c[2]))),a.width+=(a[c[1]]=int(o.css(c[1])))+(a[c[3]]=int(o.css(c[3])))}return a}}(),computeRect:function(){X(this,"computeRect");var e=this,t=e.offset();return{x:t.x,y:t.y,width:e.outerWidth(),height:e.outerHeight()}},offset:function(){X(this,"offset");var e,t=this,r=t.dom,n=G(r),i=ee(r),o="getBoundingClientRect";return!Q(r)||$(r)?{x:0,y:0}:(o in r&&(e=r[o]()),{x:e.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0),y:e.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0)})},position:function(e){X(this,"position");var t=this,n=t.dom,i=0,o=0,a=r;if($(n)||Z(n))return{x:0,y:0};if("fixed"===t.css("position"))a=n.getBoundingClientRect(),i+=a.top,o+=a.left;else{var s=t.offsetParent();if(a=t.offset(),"HTML"!==s.nodeName()){var u=s.offset();o-=u.x,i-=u.y}i+=a.y-s.css("borderTopWidth"),o+=a.x-s.css("borderLeftWidth")}return{x:o-(e===!1?0:t.marginLeft()),y:i-(e===!1?0:t.marginTop())}},pageX:function(){X(this,"pageX");var e=this.dom;return e.offsetParent?e.offsetLeft+this.offsetParent().pageX():e.offsetLeft},pageY:function(){X(this,"pageY");var e=this.dom;return e.offsetParent?e.offsetTop+this.offsetParent().pageY():e.offsetTop},show:function(){return X(this,"show"),this.visible(!0)},hide:function(){return X(this,"hide"),this.visible(!1)},visible:function(e){X(this,"visible");var r=this,i=r.dom;if(e===n)return!j.pseudos.hidden(i);isBool(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"visible",description:"illegal parameter,parameter must be a boolean value"});var o="none",a="display",s=i.style.display;if(e===!0)if(r.hasData("_"+a))r.css(a,r.data("_"+a)),r.removeData("_"+a);else{if(s===o&&r.removeStyle(a),r.css(a)!==o)return r;var u=newDom(r.nodeName()).appendTo(t.body);r.css(a,u.css(a)),u.remove()}else r.css(a)!==o&&(""!==s&&r.data("_"+a,r.css(a)),r.css(a,o));return r},elementBehindPoint:function(e,r){X(this,"elementBehindPoint");var n,i="visibility";return this.styleTo(i,"hidden"),n=t.elementFromPoint(e,r),this.styleBack(i),n},size:function(e,t){return X(this,"size"),e===n?this.css(["width","height"]):(y[1](e)&&y[1](t)||W.debug({path:"Std.dom",memberType:"public",memberName:"size",description:"illegal parameter,parameter must be a string or a number"}),this.css({width:e,height:t}))},hasClass:function(e){return X(this,"hasClass"),Y.hasClass(this.dom,e)},className:function(e){X(this,"className");var t=this,i=t.dom;(Z(i)||$(i))&&(i=ee(i));var o=i.className;return e===n?s(o)?o==r?"":o:i.getAttribute("class"):(s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"className",description:"illegal parameter,parameter must be a string"}),s(o)?i.className=e:i.setAttribute("class",e),t)},addClass:v(function(e){var t=this;if(t.dom&&(l(e)||s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"addClass",description:"illegal parameter,parameter must be a string or a array"}),!f(e)&&s(e)&&!t.hasClass(e=e.trim()))){var r=t.className().split(" ");r.push(e),t.className(r.join(" ").trim())}},{each:[l]}),removeClass:function(e){var t=this;if(t.dom){if(l(e)||s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"removeClass",description:"illegal parameter,parameter must be a string or a array"}),l(e)){for(var r=t.className(),n=r.split(" "),i=0,o=e.length;o>i;i++)for(var a=0,u=n.length;u>a;a++)e[i]==n[a]&&delete n[a];t.className(n.join(" ").trim())}else s(e)&&!f(e)&&t.removeClass(e.split(" "));return t}},toggleClass:function(e,t){var r=this;return l(e)||s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"toggleClass",description:"illegal parameter,parameter must be a string or a array"}),r.dom._removed||(t===!1?r.removeClass(e):t===!0?r.addClass(e):r.hasClass(e)?r.removeClass(e):r.addClass(e)),r},is:function(e){X(this,"selector");var t=this,r=t.dom,n=!1;if(s(e))n=M.matchSelector(r,e);else if(l(e)){for(var i=e.length-1;i>=0;i--)if(t.is(e[i]))return n=!0}else n=u(e)?oe(e)===r:r===e;return n},not:function(e){return X(this,"not"),!this.is(e)},trimHTML:function(){return X(this,"trimHTML"),this.html().trim()},html:function(e){X(this,"html");var t=this,i=t.dom;return e===n?i.innerHTML:(u(e)||s(e)&&c.test(e)?(ue(i),t.append(e)):e!==r&&(i.innerHTML=e),t)},outerHTML:function(e){X(this,"outerHTML");var t=this,r=t.dom;return e===n?r.outerHTML:(a(e)||s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"outerHTML",description:"illegal parameter,parameter must be a string or a number"}),r.outerHTML=e+"",t)},insertHTML:function(e,t){X(this,"insertHTML");var r=this;return me(r.dom,e,t),r},sheetText:function(e){X(this,"sheetText");var t=this,r=t.dom,i=r.styleSheet,o="";if(e===n){if(i)o=i.cssText;else if(r.sheet)try{var a=r.sheet.cssRules;if(a&&a.length)for(var u=0,l=a.length;l>u;u++)o+=a[u].cssText}catch(c){}return o}return s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"sheetText",description:"illegal parameter,parameter must be a string"}),i!==n?i.cssText=e:(ue(r),t.append(O.text(e))),t},text:function(e){X(this,"text");var t=this,r=t.dom;return e===n?r.text||r.textContent||r.innerHTML||"":(a(e)||s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"text",description:"illegal parameter,parameter must be a string or a number"}),ue(r),t.append(O.text(e)))},value:function(e){X(this,"value");var t=this,i=t.dom;return e===n?((e=i.value)==n&&(e=i.getAttribute("value"))==r&&(e=r),e):(i.value===n?i.setAttribute("value",e):i.value=e,t)},contentEditable:function(e){X(this,"contentEditable");var t=this.dom,r="contentEditable";return e===n?t[r]||!1:(isBool(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"contentEditable",description:"illegal parameter,parameter must be a boolean value"}),t[r]=e,this)},firstChild:function(){return X(this,"firstChild"),O(this.dom.firstChild)},lastChild:function(){return X(this,"lastChild"),O(this.dom.lastChild)},findSibling:function(e,t,i){X(this,"findSibling");var a,s,u,l=this,c=l.dom,d=i===!0?[]:r,m="nextSibling",h=function(e){if(e){if(i!==!0)return O(e);d.push(O(e))}};if("next"==e)s=c[m];else if("prev"==e)s=c[m="previousSibling"];else if("all"==e){var p=c.parentNode;p&&(s=p.firstChild)}if(!s)return r;t==n||o(t)||(a=M.parseSelector(t));do if(s!==l.dom&&1===s.nodeType){if(t==n)u=h(s);else if(o(t)){var v=t.call(l,s);u=h(v===!0?s:v)}else M.matchSelector(s,a)&&(u=h(s));if(u)return u}while(s=s[m]);return f(d)&&(d=r),d},nextSibling:function(e){return X(this,"nextSibling"),this.findSibling("next",e)},nextSiblings:function(e){return X(this,"nextSiblings"),this.findSibling("next",e,!0)},prevSibling:function(e){return X(this,"prevSibling"),this.findSibling("prev",e)},prevSiblings:function(e){return X(this,"prevSiblings"),this.findSibling("prev",e,!0)},sibling:function(e){return X(this,"sibling"),this.findSibling("all",e)},siblings:function(e){return X(this,"siblings"),this.findSibling("all",e,!0)},swap:function(e){X(this,"swap");var t=this,r=t.parentNode(),n=t.dom,i=oe(e),o="insertBefore",a="appendChild";if(i||W.debug({path:"Std.dom",memberType:"public",memberName:"swap",description:"illegal parameter"}),!i||!r||n===i)return t;var s=n.nextSibling,u=i.nextSibling;return s?u?(r[o](n,u),r[o](i,s)):(r[o](i,s),r[a](n)):(r[o](n,u),r[a](i)),t},append:v(function(e){X(this,"append");var t=this,r=t.dom;(y[1](e)||l(e))&&(e=fe(e)),u(e)?ie(r,function(){r.appendChild(oe(e))}):W.debug({path:"Std.dom",memberType:"public",memberName:"appendChild",description:"illegal parameter"})}),insert:function(e,t){X(this,"insert"),oe(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"insert",description:"illegal parameter : child"});var n=this,i=r;return t==r||!a(t)||0>t?n.append(e):0===t?n.prepend(e):(O(e).detach(),(i=n.children(t))?n.insertBefore(e,i):n.append(e)),n},insertTo:function(e,t){return X(this,"insertTo"),(e=O(e))?e.insert(this,t):W.debug({path:"Std.dom",memberType:"public",memberName:"insertTo",description:"illegal parameter : target"}),this},insertBefore:function(e,t){X(this,"insertBefore");var r=this,i=r.dom;if(oe(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"insertBefore",description:"illegal parameter"}),e===n)r.prepend(i);else if(t===n){var o=(e=oe(e)).parentNode;o&&ie(o,function(){o.insertBefore(i,e)})}else e=y[1](e)||l(e)?fe(e):oe(e),ie(i,function(){i.insertBefore(e,oe(t))});return r},insertAfter:function(e,t){X(this,"insertAfter");var r,i=this,o=i.dom;if(oe(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"insertAfter",description:"illegal parameter"}),t===n){var a=(e=oe(e)).parentNode;a&&ie(a,function(){a.lastChild===e?a.appendChild(o):a.insertBefore(o,e.nextSibling)})}else e=y[1](e)||l(e)?fe(e):oe(e),ie(o,function(){o.lastChild===(r=oe(t))?o.appendChild(e):o.insertBefore(e,r.nextSibling)});return i},detach:function(){X(this,"detach");var e=this,t=e.dom.parentNode;return t&&t.removeChild(e.dom),e},destroy:function(){X(this,"destroy");var e=this,t=e.dom;return t._removed||(e.detach(),U in t&&O(t).removePlugin(),z in t&&-1!==t[z].rendered&&e.removeLayout(),F in t&&-1!==t[F].rendered&&(t[F].destroy(),t[F]=r),R in t&&(t[R]=r),P in t&&(t[P]=r),t._removed=!0),e},remove:v(function(e){X(this,"remove");var t=this;if(e===n)t.destroy();else{s(e)&&u(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"remove",description:"illegal parameter,childNode must be a string or an object"});var r=oe(e);r&&t.dom.removeChild(r)}},{each:[l]}),prepend:function(e){X(this,"prepend");var t=this,r=t.firstChild();return this.is(e)&&W.debug({path:"Std.dom",memberType:"public",memberName:"appendChild",description:"child cannot be the same with this element"}),r?t.insertBefore(e,r):t.append(e),t},prependTo:function(e){return X(this,"prependTo"),O(e).prepend(this),this},appendChild:function(e){return X(this,"appendChild"),this.is(e)&&W.debug({path:"Std.dom",memberType:"public",memberName:"appendChild",description:"child cannot be the same with this element"}),this.dom.appendChild(e),this},appendTo:function(e){return X(this,"appendTo"),oe(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"appendTo",description:"illegal parameter"}),this.is(e)&&W.debug({path:"Std.dom",memberType:"public",memberName:"appendTo",description:"target cannot be the same with this element"}),O(e).append(this),this},clear:function(){return X(this,"clear"),ue(this.dom),this},clearTextNode:function(){return X(this,"clearTextNode"),this.childNodes(function(e,t){1!==t.nodeType&&this.dom.removeChild(t)}),this},get:function(e){X(this,"get");var t=this,n=r;return a(e)?n=t.children(e):s(e)&&(n=W.dom(e,t)),n},childNodes:function(e,t){X(this,"childNodes");var r=this,n=r.dom,s=t||Array.from(n.childNodes);return a(e)?s=s[i]:o(e)&&(s=te(s,e,r,!0)),s},children:function(e,t,i){X(this,"children");var u=this,l=[],c=[],f=u.dom;i||(i=f.children);for(var d=0,m=i.length;m>d;d++)1===i[d].nodeType&&c.push(i[d]);if(e===n)return h(c,function(e,t){return O(t)},!0);if(a(e))return e<c.length?O(c[e]):r;if(s(e)){var p=M.parseSelector(e);for(d=0,m=c.length;m>d;d++)M.matchSelector(c[d],p)&&l.push(O(c[d]));o(t)&&(l=te(l,t,u))}else o(e)&&(l=te(c,e,u));return l},find:function(e,t){X(this,"find"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"find",description:"illegal parameter,selector must be a string"});var r=this,n=pe(e,r.dom);return f(n)?[]:te(n,function(e,n){return o(t)?t.call(r,n):n},r)},hover:function(e,t){return X(this,"hover"),this.mouse({enter:e,leave:t})},ajax:function(){X(this,"ajax");var e=this;return L.load.apply(e,arguments).on("success",function(t){e.html(t)})},method:function(e){X(this,"method"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"method",description:"illegal parameter,name must be a string"});var t=this,n=Array.slice(arguments,1),i=t[e]||t.dom[e];return o(i)?i.apply(t,n):r},hasData:function(e){X(this,"hasData"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"hasData",description:"illegal parameter,parameter must be a string"});var t=this.dom;return e=e.camelCase(),t[R]&&t[R][e]!==n||t.dataset&&t.dataset[e]!==n||this.attr("data-"+e)!==r},data:v(function(e,t){X(this,"data"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"data",description:"illegal parameter,keyName must be a string"});var i=this,o=i.dom,a=e.camelCase(),u=y[2](o,R);return t==n?((t=u[a])===n&&(t=o.dataset?o.dataset[a]:i.attr("data-"+e.unCamelCase())),t===n&&(t=r),t):void(u&&(u[a]=t))},{each:[u]}),removeData:v(function(e){X(this,"removeData"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"removeData",description:"illegal parameter,parameter must be a string"});var t=this,n=t.dom,i=e.camelCase(),o=n.dataset,a=y[2](n,R);a&&delete a[i],o&&o[i]?delete n.dataset[i]:t.attr("data-"+(e=e.unCamelCase()))!==r&&t.removeAttr("data-"+e)},{each:[l,s]}),style:function(e){X(this,"style");var t=this.dom,r=t.style;if(e===n)return r;if(s(e))return r[e]||"";if(l(e)){var i={};return h(e,function(e,t){i[t]=r[t]||""}),i}},styleTo:v(function(e,t){X(this,"styleTo");var r=this,n=r.dom,i=n[D]?n[D]:n[D]={};i[e]=r.style(e),r.css(e,t)},{each:[u]}),styleBack:v(function(e){X(this,"styleBack");var t=this,r=t.dom,i=r[D];i&&(e===n?t.css(i):s(e)&&t.css(e,i[e]))},{each:[l,s]}),template:function(e,t){X(this,"template");var r=this.clear();if(s(e)||u(e)&&H.iof(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"template",description:"illegal parameter,template must be a string name,or an object instanceof Std.template"}),s(e)){var n=H(e);n&&n.renderTo(r,t)}else H.iof(e)&&e.renderTo(r,t);return r},getStyle:function(e){X(this,"getStyle");var t=this,r=t.dom,n=O.cssHook;return s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"getStyle",description:"illegal parameter,styleName must be a string"}),Z(r)&&(r=ee(r)),n[e=e.camelCase()]?n[e].call(t,r):ae(r,e)},setStyle:function(e,t){X(this,"setStyle");var r=this,n=r.dom,i=O.cssHook;return s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"setStyle",description:"illegal parameter,styleName must be a string"}),Z(n)&&(n=ee(n)),o(t)&&(t=t.call(r,r.getStyle(e))),""===t?r.removeStyle(e):(i[e=e.camelCase()]?i[e].call(r,n,t):se(n,e,t),r)},css:function(e,t,i){X(this,"css");var o=this;if(s(e)){if(t===n)return o.getStyle(e);if(i===n)o.setStyle(e,t);else{if(S.operatorChar(t))return o.setStyle(e,t=Math.val(float(o.css(e)),t,i)),t;o.css(e)===t&&o.css(e,i)}}else if(l(e)){if(t===n){var a={};return h(e,function(e,t){a[t]=o.css(t)}),a}h(e,function(e,r){o.setStyle(r,t)})}else u(e)&&h(e,function(e,t){t!=r&&o.setStyle(e,t)});return o},attr:v(function(e,t){X(this,"attr");var i=this,a=i.dom,s=O.attrHook;if(l(e)){if(t===n){var u={};return h(e,function(e,t){u[t]=i.attr(t)}),u}h(e,function(e,r){i.attr(r,t)})}else{if(t==n){var c;return c=s[e]?s[e].call(i,a):a.getAttribute(e),c===n?r:c}o(t)&&(t=t.call(i,i.attr(e))),e in s?s[e].call(i,a,t):a.setAttribute(e,t)}},{each:[u]}),removeAttr:v(function(e){X(this,"removeAttr"),s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"removeAttr",description:"illegal parameter,parameter must be a string"}),this.dom.removeAttribute(e)},{each:[l,s]}),removeStyle:v(function(e){X(this,"removeStyle");var t=this,r=t.dom,i=(Z(r)?ee(r):r).style;if(i){if(e===n)return i.cssText="";if("opacity"===e&&!j.support("opacity"))return t.removeStyle("filter zoom");s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"removeStyle",description:"illegal parameter,styleName must be a string"}),e in T&&(e=T[e]),i.removeAttribute?i.removeAttribute(e):i.removeProperty(e.unCamelCase())}},{each:[l,s]}),context:function(e,t){X(this,"context");var n=this,i=n.dom;if(e)if(t==r){if(K(oe(e),i))return n}else{var o=oe(e);do if(M.matchSelector(o,t,i))return O(o);while(o=o.parentNode)}else if(Q(i))return O(ee(i));return r},on:v(function(e,t,n,i){var l=this,c=l.dom,f=r,d=r,m=r,h=r;if(s(e)||W.debug({path:"Std.dom",memberType:"public",memberName:"on",description:"illegal parameter,event name must be a string"}),c&&e){if(f=c[P],h=G(c),o(t)&&(a(n)&&(i=n),n=t,t=r),s(t)&&(m=M.parseSelector(t)),!o(n))return l;u(f)||(f=c[P]={});var p=e.indexOf("[");if(-1!==p){var v=new N(e.substr(p)).eventFilters(0);0===v.error?d=v.filters:W.debug({path:"Std.dom",memberType:"public",memberName:"on",description:"parse error",content:e}),e=e.left(p)}var g=O.eventFix;if(!f[e]){f[e]=[];var b=e,y=!1,x=r,_=g.mouseEvents.has(e),w=g.keyEvents.has(e);if(e in O.eventHook){var k=O.eventHook[e];o(k)?x=k:(x=k.check,b=k.name||e,y=k.useCapture)}f[e].checkFunc=x,le(c,f[e].eventName=b,f[e].eventFunc=function(t){(t=t||h.event||r)!==r&&(g(t),_?g.mouse(t):w?g.keyboard(t):e in g.fix&&g.fix[e](t),t.name=e),l.emit(e,t,!1,!0,x)},y)}var S={filters:d,callback:n,selector:m,selectorText:t||r};a(i)?f[e].insert(S,i):f[e].push(S)}},{each:[l,u,s]}),off:v(function(e,t,i){function a(){var t=c[e].eventName,r=c[e].eventFunc;ce(l,t,r),delete c[e]}var u=this,l=u.dom,c=r;if(l&&(c=l[P])){if(e){var f=e.indexOf("[");-1!==f&&(e=e.left(f))}if(o(t)&&(i=t,t=r),e===n)h(c,function(e){u.off(e)});else if(c[e])if(i!==n||s(t)){for(var d=c[e],m=d.length,p=m-1;p>=0;p--){var v=d[p];if(v===n);else if(t===r){if(i===n||v.callback===i){d.splice(p,1),m--;break}}else if(!(i!==n&&i!==v.callback||t!==v.selectorText&&t!==v.selector)){d.splice(p,1),m--;break}}0>=m&&a()}else c[e].clear(),a();else;}},{each:[l,u,s]}),fireEvent:function(e,r){X(this,"fireEvent");var n=this,i=n.dom;if(i.dispatchEvent){var o=t.createEvent("Events");return o.initEvent(e,!0,!0),i.dispatchEvent(p(o,r))}return i.fireEvent?i.fireEvent("on"+e,r):void 0},emit:v(function(e,t,i,a,s){var l,c=this,f=c.dom,d=r,m=O.eventBlock;if(f){if(d=f[P],e===n)return d?0!=d["?"]:!0;if(isBool(e))d||(d=f[P]={}),d["?"]=e;else if(!d||d["?"]===!1||!(l=d[e])||!g&&b.has(e))return;if(m[e])for(var h=m[e].length-1;h>=0;h--)if(m[e][h].call(c,t,i)===!1)return;for(var h=0,p=l.length;p>h;){var v=l[h],y=f;if(!u(v)||a===!0&&u(v.selector)&&!(y=oe(c.context(t.target,v.selector))))h++;else if(o(s=s||l.checkFunc)&&s.call(y,t,v)===!1)h++;else{if(v.callback[i?"apply":"call"](y===f?c:O(y),t)===!1&&"stopPropagation"in t&&(t.stopPropagation(),t.preventDefault()),t&&t._stopFire===!0){try{delete t._stopFire}catch(t){t._stopFire=n}break}v===l[h]&&h++}}}},{each:[l,s]}),once:x.prototype.once,eventAssign:x.prototype.eventAssign,delegate:function(e,t,r,n){return X(this,"delegate"),this.on(e,t,r,n)},undelegate:function(e,t,r){return X(this,"undelegate"),this.off(e,t,r)},set:function(e){X(this,"set");var t=this;if(u(e))for(var r in e)t[r](e[r]);return t},keyboard:function(e){function n(e){var t=c.keyCode;return t===r?!0:o(t)?t.call(u,e):e.which===c.keyCode}function i(e){l=0,v(c.press).call(u,e)}function a(e){return u.dom._removed?void 0:(1==l&&i(e),c.classStatus&&u.removeClass("press"),v(c.up).call(u,e))}function s(e){return n(e)?(c.classStatus&&u.addClass("press"),l=1,O(t).once("keyup",a),v(c.down).call(u,e)):void 0}X(this,"keyborad");var u=this,l=0,c=p({down:r,up:r,press:r,keyCode:r,classStatus:!1},e);return u.on("keydown",s)},hasFocus:function(){X(this,"hasFocus");var e=this,t=e.document(),r=t?t.activeElement:t;return o(t.hasFocus)&&!t.hasFocus()?!1:e.is(r)||e.contains(r)},focussing:function(e,t,i){X(this,"focussing");var o=this,a=r,s=!1,u=i===n?o.hasFocus():i,l=function(r){!o.dom._removed&&v((u=s)?e:t).call(o,r)};return o.on("focusin focusout",function(e){s="focusin"===e.name,a==r?l(e):clearTimeout(a),a=setTimeout(function(){u!==s&&(l(e),a=r)},0)})},fullScreen:function(e){X(this,"fullScreen");var t=this,r=!0,i=t.dom,o=J(i),a="Fullscreen",s="exit"+a,u="request"+a,l="mozCancelFullScreen",c="webkitExit"+a,f="mozRequestFullScreen",d="msRequest"+a,m="webkitRequest"+a;return e===n?r=(o.fullscreenElement||o.mozFullScreenElement||o.webkitFullscreenElemen)!==i?!1:!!(o.fullscreenEnabled||o.mozFullScreenEnabled||o.webkitFullscreenEnabled):e===!0?i[u]?i[u]():i[f]?i[f]():i[m]?i[m]():i[d]?i[d]():r=!1:o[s]?o[s]():o[l]?o[l]():o[c]?o[c]():r=!1,r},mouse:function(e,t){function n(e){m=C({delay:c.delay,interval:c.interval,progress:function(){return l.dom._removed?void 0:c.longpress.call(l,e)}})}function i(e){return m!==r&&(m.stop(),m=r),!l.dom._removed&&(h&&g&&l.removeClass(g),c.unselect&&l.unselect(!1),o(c.up))?c.up.call(l,e):void 0}function a(e){return O(ee(l.dom)).once("mouseup",i),h&&g&&1===e.which&&l.addClass(g),c.unselect&&l.unselect(!0),o(c.longpress)&&n(e),o(c.down)?c.down.call(l,e):void 0}function s(e){return l.off("mousedown",a),m!==r&&(m.stop(),m=r),h&&v&&l.removeClass(v),o(c[f])&&y(f,c[f]),o(c[d])&&y(d,c[d]),o(c.move)&&y("mousemove",c.move),o(c.leave)?c.leave.call(l,e):void 0}function u(e){return l.on("mousedown",a).once("mouseleave",s),h&&v&&l.addClass(v),o(c[f])&&b(f,c[f]),o(c[d])&&b(d,c[d]),o(c.move)&&b("mousemove",c.move),o(c.enter)?c.enter.call(l,e):void 0}X(this,"mouse");var l=this,c=p({enter:r,leave:r,down:r,up:r,click:r,dblclick:r,longpress:r,move:r,unselect:!1,hoverClass:"hover",pressClass:"press",classStatus:!0,auto:!0,delay:600,interval:100},o(e)?e():e),f="click",d="dblclick",m=r,h=c.classStatus,v=c.hoverClass,g=c.pressClass,b=function(e,t){l.on(e,t)},y=function(e,t){l.off(e,t)};return c.auto?b("mouseenter",u):u.call(l,t),l},sizeControl:function(e,t,i){X(this,"sizeControl");var o=this,a=0;if(s(t))a+=o.css(t);else if(l(t))for(var u=0,c=t.length;c>u;u++)a+=o.css(t[u]);return i===n?e===r?a:o.css(e)+a:(o.dom.style[e]=i-a+"px",o)},level:function(){var e=["span label a em u i b strong img","button","input select hr h1 h2 h3 h4 h5 h6","div legend frame iframe form map pre code table video audio canvas svg textarea"],t="std-level";return h(e,function(t,r){e[t]=r.split(" ")}),function(r){var i=this;return r===n?((r=i.attr(t))||(r=h(e,function(e,t){return t.has(i.nodeName().toLowerCase())?e+1:void 0})),~~r||4):i.attr(t,~~r)}}(),ui:function(e,t){X(this,"ui");var i=this,o=i.dom;return e===n||F in o?o[F]||r:s(e)&&u(t)?o[F]=B.create(e,t||{},i):isBool(e)?B.build(this,e,t):(W.debug({path:"Std.dom",memberType:"public",memberName:"ui",description:"illegal parameter"}),r)},layout:function(e,t){X(this,"layout");var i=this,o=i.dom,a=o[z];return e===n||a?a||r:(e===!0&&(e=i.attr("std-ui")||"VBoxLayout"),!a&&(a=o[z]=B.create(e,t||A.get(i)||{}))&&(a.append(i.css("position","static","relative").children(function(e,t){return o.removeChild(oe(t)),t.attr("std-ui")?B.build(t,!1)||t:t})),a.parent(i.attr("std-level",a.level())).render(),a.update()),a)},updateLayout:v(function(){X(this,"updateLayout");var e=this.layout();m(e)&&e.update()}),removeLayout:v(function(){X(this,"removeLayout");var e=this.layout();m(e)&&(e.destroy(),this.dom[z]=r)}),animateTo:function(e,t,r){X(this,"animateTo");var n=this;return n.animate("end").animate({to:e},t,r),n},animate:function(e,t,r){function i(e,n){var i=u(t)?t.method||"css":"css",a={},s=new E.keyframes(t).rules(n).on({pause:function(){a={}},progress:function(e){if(m._removed)s.stop(),f._("clear");else for(var t in e){var r=e[t];a[t]!==r&&d["css"===i?"setStyle":i](t,a[t]=r)}},complete:function(){if(!m._removed){var e=f._("indexOf",s);-1!==e&&f._("remove",e),++g==v&&o(r)&&(d.emit("animateComplete"),r.call(d,v,s))}}});v++,s.defaultProperty(h(s._property,function(e,t){return"color"===t.type&&"background"===e&&(e+="-color"),d[i](e)},!0)).start(),f._(s)}X(this,"animate");var c,f,d=this,m=d.dom,p="keyframes",v=0,g=0;return c=y[2](m,q),f=c[p]?c[p]:c[p]=new E.keyframes.united,e===n?f:t===n&&s(e)?("end"===e?(f.stop(),f._("clear")):y.ins("start pause stop",e)&&f[e](),d):(a(t)&&(t={duration:t}),l(e)?h(e,i):i(0,e),f)},animation:function(){X(this,"animation")}});h({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=/Y/.test(t);ve[e]=function(i){X(this,e);var o=this,a=o.dom,s=G(a,!0);return i===n?s?t in s?s[t]:ee(s)[e]:a[e]:(s?s.scrollTo(r?O(s).scrollLeft():i,r?i:O(s).scrollTop()):a[e]=i,o)}}),h("scrollWidth scrollHeight offsetWidth clientWidth offsetHeight clientHeight offsetLeft offsetTop tagName nodeName readyState",function(e,t){ve[t]=function(e){X(this,t);var r=this,i=r.dom;return e===n?i[t]:(s(e)||a(e)||W.debug({path:"Std.dom",memberType:"public",memberName:t,description:"parameter muse be a string or a number"}),i[t]=e,r)}}),h("opacity outerWidth outerHeight zIndex cursor color width height minWidth minHeight",function(e,t){ve[t]=function(e){return X(this,t),this.css(t,e)}}),h("id name",function(e,t){ve[t]=function(e){return X(this,t),this.attr(t,e)}}),h("submit focus blur",function(e,t){ve[t]=function(){X(this,t);var e=this,r=e,i=e.dom;if(t in i){try{r=i[t]()}catch(o){}r===n&&(r=e)}return r}});var ge=function(e){var t=e.target.nodeName;"INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault()};return h({unselect:"Std_unselect",wordwrap:"Std_wordwrap",wordnowrap:"Std_wordnowrap"},function(e,t){ve[e]=function(r){return X(this,e),"unselect"==e&&this[r?"on":"off"]("selectstart",ge),this.toggleClass(t,r)}}),Y.addListener(t,"click",function(e){var t="std-action",r=O(this).context(e.target||e.srcElement,"["+t+"]");r&&!r.ui()&&(t=r.attr(t))&&(t=w(t))&&t.call(e)}),{f:Y,a:"plugin",j:ve,k:function(e,t){var i,o=this,a=o instanceof O;return a===!1?(i=oe(e,t))===r?r:new O(i,!1):(t===!1?o.dom=e:(s(e)?l(i=O.loadHTML(M.html(e)))&&(o.dom=i[0]):o.dom=de(oe(e)),t!==n&&t!==r&&o.appendTo(t)),void(o.dom._removed=!1))}}}),O.united=W.doms=b(function(){var e=W.unite(O);return{f:{addMember:v(function(t){W.unite.addMember(e,t)},{each:[l]})},k:function(t,i){var o=this,a=W.doms.iof(o),u=new e;if(s(t)){var c;c=a?O.loadHTML(M.html(t)):O.query(t,i),f(c)||h(Array.from(c),function(e,t){u._(O(t))})}else if(l(t))h(t,function(e,t){(t=O(t))!==r&&u._(a?t.clone():t)});else if(t!==n){var d=O.get(t);null!==d&&u._(O(a?O.clone(d):d))}return u}}}),O.eventFix=b(function(){var e="target",i="which",o="srcElement",a="relatedTarget",s="fromElement",u="stopPropagation",l="preventDefault";return{f:{keyEvents:"keydown keypress keyup".split(" "),mouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick contextmenu".split(" "),mouse:function(r){var o=r.button;if(r[i]==n&&o!=n&&(r[i]=1&o?1:2&o?3:4&o?2:0),r.pageX===n&&r.clientX!==n){var a=r[e].ownerDocument||t,s=a.documentElement,u=a.body;r.pageX=r.clientX+(s&&s.scrollLeft||u&&u.scrollLeft||0)-(s&&s.clientLeft||u&&u.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||u&&u.scrollTop||0)-(s&&s.clientTop||u&&u.clientTop||0)}},keyboard:function(e){e[i]==r&&(e[i]=e.charCode!=r?e.charCode:e.keyCode)},fix:{mousewheel:function(e){var t=e.detail?-1*e.detail:e.wheelDelta/40;e.dir=0>t?-1:1}}},k:function(t){var r=t[e]||t[o];!t[e]&&t[o]&&(r=t[e]=t[o]),r&&3===r.nodeType&&(t[e]=r.parentNode),!t[a]&&t[s]&&(t[a]=t[s]===r?t.toElement:t[s]),t[u]||(t[u]=function(){t.cancelBubble=!0}),t[l]||(t[l]=function(){t.returnValue=!1}),t.metaKey=!!t.metaKey,t.timeStamp=t.timeStamp||Date.now(),t.stopFire=function(){this._stopFire=!0}}}}),O.cssHook=function(){var e=/alpha\([^)]*\)/i,t=/opacity\s*=\s*([^)]*)/,i="opacity",o="filter",u="boxSizing",l="border-box",c="sizeControl",d="backgroundPosition",m="paddingRight",p="paddingLeft",v="paddingTop",g="paddingBottom",b="borderRightWidth",y="borderLeftWidth",x="borderTopWidth",_="borderBottomWidth",w=W.init.css,k=O.getStyle,S=O.setStyle,T={width:[m,p,b,y],height:[v,g,x,_]},C={"float":function(e,t){var r=e.style,i=w.cssFloat?"cssFloat":"styleFloat";return t===n?r[i]||k(e,"float")||k(e,i):void(r[i]=t)},outerWidth:function(e,t){return w[u]&&this.css(u)===l?this[c]("width",r,t):this[c]("width",T.width,t)},outerHeight:function(e,t){return w[u]&&this.css(u)===l?this[c]("height",r,t):this[c]("height",T.height,t)},innerWidth:function(e,t){return this[c]("width",[m,p],t)},innerHeight:function(e,t){return this[c]("height",[v,g],t)},opacity:function(r,a){var s=r.style,u=w[i],l=r.currentStyle;if(a===n)return u?k(r,i):t.test((l?l[o]:s[o])||"")?.01*float(RegExp.$1)+"":"1";if(u)s[i]=a;else{var c=j.hooks[i](a).value,f=l&&l[o]||s.filter||"";if(s.zoom=1,(c>=1||""===c)&&""===f.replace(e,"").trim()&&s.removeAttribute&&(s.removeAttribute(o),""===c||l&&!l[o]))return;s.filter=e.test(f)?f.replace(e,c):f+" "+c}}};return C[d]=function(e,t){return t===n?(f(t=k(e,d))&&(t=k(e,d+"X")+" "+k(e,d+"Y")),t):void S(e,d,t)},h("X Y",function(e,t){var r=d+t;C[r]=function(t,i){if(i===n){if(f(i=k(t,r))){var o=k(t,d);return o==n?0:o.split(" ")[e]}return i}S(t,r,i)}}),h("width height",function(e,t){var r=t.capitalize();

C[t]=function(i,o){if(o===n){if(O.isWindow(i))return O.documentElement(i)["client"+r];if(9===i.nodeType||"HTML"===i.nodeName){var u=O.document(i);return Math.max(u.body["scroll"+r],i["scroll"+r],u.body["offset"+r],i["offset"+r],i["client"+r])}var l=k(i,t);if(s(l)&&("auto"===l||"%"===l.right(1))){var f=0==e?i.offsetWidth:i.offsetHeight;return a(f)&&(l=f-this[c](null,T[t])),l||0}return float(l||0)||0}a(o)&&(0>o&&(o=0),o+="px"),S(i,t,o)}}),h("left top right bottom margin marginTop marginLeft marginRight marginBottom lineHeight padding "+[b,y,x,_,p,m,v,g].join(" "),function(e,t){C[t]=function(e,r){return r===n?float(k(e,t)||0)||0:(a(r)&&(r+="px"),void S(e,t,r))},O.extend(t,function(e){var r=this;return e===n?r.css(t):r.css(t,e)})}),C}(),O.attrHook=function(){var e={};return h({id:"id","class":"className",href:"href",name:"name",type:"type"},function(t,r){e[t]=function(e,i){return i===n?e[r]||e.getAttribute(t):void e.setAttribute(t,e[r]=i)}}),h({tabindex:"tabIndex",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},function(t,r){e[t]=function(e,t){return t===n?e.getAttribute(r):void e.setAttribute(r,t)}}),e.style=function(e,t){return t===n?e.style.cssText:void(e.style.cssText=t)},e}(),O.eventHook=function(){var r="filters",n=O(e),i=O(t),a=0,s=0,l=!1,c={resize:function(){return n.is(this)?l:!0}},f={top:38,right:39,down:40,left:37,backspace:8,tab:9,"return":13,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,insert:45,del:46,numlock:144,scroll:145,",":188,".":190,"/":191},d={},m=function(e){var t=function(){d[e]===!0&&(delete d[e],i.off("keyup",t))};d[e]!==!0&&(d[e]=!0,i.on("keyup",t))},p=function(e,t){var r=e.code,n=e.which,i=String.fromCharCode(n).toLowerCase();return"ctrl"===(t=t.toLowerCase())&&(e.ctrlKey||"Control"===e.key)||"shift"===t&&(e.shiftKey||"Shift"===e.key)||"alt"===t&&(e.altKey||"Alt"===e.key)||"ctrlright"===t&&e.ctrlKey&&"ControlLeft"!==r&&!e.ctrlLeft||"shiftright"===t&&e.shiftKey&&"ShiftLeft"!==r&&!e.shiftLeft||"altright"===t&&e.altKey&&"AltLeft"!==r&&!e.altLeft||(57>=(n>=48)||90>=(n>=65))&&i===t||105>=(n>=96)&&9-(105-n)+""===t||123>=(n>=112)&&"f"+(12-(123-n))===t||t in f&&f[t]===n};return W.init.on.focusin||h({focusin:"focus",focusout:"blur"},function(e,t){c[e]={name:t,useCapture:!0,check:function(){return!0}}}),h({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){c[e]={name:t,check:function(e){var t=e.relatedTarget;return!t||!O.contains(t,this)}}}),h("mousedown mouseup click dblclick",function(e,t){c[t]=function(e,t){return t[r]&&!t[r].has(e.which+"")?!1:void 0}}),h("keypress keydown",function(e,t){c[t]=function(e,t){return t[r]?h(t[r],function(t,r){var n=h(r=r.split("+"),function(e,t){return d[t]?void 0:!1});return n!==!1?!1:!h(r,function(t,r){return p(e,r)&&m(r),!!d[r]},!0).has(!1)},!0).has(!0):void 0}}),"onmousewheel"in e||(c.mousewheel={name:"DOMMouseScroll"}),O.addListener(n.dom,"resize",function(){var e=n.width(),t=n.height();e===a&&t===s?l=!1:(l=!0,a=e,s=t)}),O.addEventHook=function(e,t){var r=function(e){return function(){return o(e)&&e.apply(this,arguments)===!1?!1:o(t)?t.apply(this,arguments):void 0}};if(e in c){var n=c[e];o(n)?c[e]=r(n):u(n)&&(n.check=r(n.check))}else c[e]=t},c}(),O.eventBlock=function(){var e={};return O.addEventBlock=function(t,r){o(r)&&(e[t]||(e[t]=[]),e[t].push(r))},O.removeEventBlock=function(t,r){var i=e[t];if(r===n)delete e[t];else if(i){for(var o=i.length-1;o>=0;o--)i[o]===r&&i.remove(o);0===i.length&&delete e[t]}},e}(),O.selection=b(function(){function e(e){return O.document(e).selection||O.window(e).getSelection()||r}function i(e,t){return u(e,"html",t)}function o(e,t){return u(e,g,t)}function s(t,r){var i=e(t);return r===n?y in i?i[y]():i.getRangeAt(0):void(b in r?r[b]():(i.removeAllRanges(),i.addRange(r)))}function u(e,t,r){var n="",i=t===g,o=r||o();return n=(i?g:"htmlText")in o?o[i?g:"htmlText"]:a(e[w])?e.value.substring(e[w],e.selectionEnd):newDiv().append(o.cloneContents())[i?g:"html"]()}function l(e){if(a(e[w]))return e[w];if(S){var t=s(e);return t.moveStart("character",-e.value.length),t.text.length}}function c(e){if(S){var t=s(e),r=t.duplicate();return r.moveToElementText(e),r.setEndPoint("EndToEnd",t),r.text.length-t.text.length}}function f(){}function d(){}function m(e,t){var r=e.nodeName.toLowerCase();if("input"===r||"textarea"===r){if(t===n)return l(e);f(e,t)}else{if(t===n)return c(e);d(e,t)}}function h(e,t,i){var o=r;t===n?e[b]():k in e?(o=e[k](),o.collapse(),o.moveEnd(x,i),o.moveStart(x,t),o[b]()):_ in e&&(e.focus(),e[_](t,i))}function p(e){var t=O.window(e),n=O.document(e),i=n.body,o=r;if(i&&i[k])o=i[k](),o.moveToElementText(e),o[b]();else if(t.getSelection){var a=t.getSelection();o=n[y](),o.selectNodeContents(e),a.removeAllRanges(),a.addRange(o)}}function v(e,t,r){b in e?h(e,t,r):p(e,t,r)}var g="text",b="select",y="createRange",x="character",_="setSelectionRange",w="selectionStart",k="createTextRange",S=t.selection;return O.extend({selection:function(){return e(this.dom)},selectionRange:function(){return s(this.dom)},selectedHTML:function(e){return i(this.dom,e)},selectedText:function(e){return o(this.dom,e)},select:function(e,t){return v(this.dom,e,t),this},cursorPos:function(e){return e===n?m(this.dom):(m(this.dom,e),this)}}),{j:{select:function(e,t){v(this._e,e,t)},selectedHTML:function(e){i(this._e,e)},selectedText:function(e){o(this._e,e)},cursorPos:function(e){return m(this._e,e)}},k:function(e){this._e=O.get(e)}}}),W.icon=b(function(){var e,t={},i="Std_Icon",o="className";return{e:{src:"",className:"",width:"auto",height:"auto"},f:{icons:t,get:function(e){return S.DOM(e)&&O(e).hasData(i)?e.data(i).icon:!s(e)||"data:image/"===e.left(11)&&-1!==e.indexOf(";base64",11)?r:t[e]||r},set:v(function(r,n){t[r]=new e(n)},{each:[l,u]}),update:function(t,n,a){if(s(n)&&e(n)&&(n=e(n)),!S.icon(n)){var l=e(t);l?(u(n)?p(l.opts,n):s(n)&&l.src(n),n=l):n=new e(n)}u(a)&&p(n.opts,a);var c=n.opts,d=c.width,m=c.height,h="IMG"===(t=O(t)).nodeName(),v=t.data(i);return v||t.data(i,v={icon:n}).addClass(i),c.src!==v.src&&(v.src=c.src,h?t.attr("src",v.src):f(c.src)||(v.img||(v.img=n.image(!1).appendTo(t.clear()))).attr("src",v.src)),h||c[o]===v[o]||(f(v[o])||t.removeClass(v[o]),f(c[o])||t.addClass(v[o]=c[o])),d!==r&&d!==v.width&&t.width("auto"===(v.width=d)?"":d),m!==r&&m!==v.height&&t.height("auto"===(v.height=m)?"":m),n}},j:{image:function(e){var t=this.opts,r=newDom("img",i+"_Img").attr("src",t.src);return e!==!1&&r.width(t.width).height(t.height),r},element:function(){var t=newDiv();return e.update(t,this),t}},k:function(t,r){var i=this;if(e.iof(i)){var o=i.init_opts(c(t)?t:{});s(t)&&(o.src=t)}else{if(r===n&&(s(t)||S.DOM(t)))return e.get(t);if(u(t)||s(t))return e.set(t,r)}},l:function(t,r){e=t,h("src width height "+o,function(e,t){r[t]=function(e){return this.opt(t,e)}})}}}),P=W.stl=b({f:{cache:!0,fileCache:!0,caches:{},load:v(function(e,t,n,i){var a=P.caches,s=function(e,t){if(o(n)){if(e)return n(e);var r=t.exports,i=t.packages;i?W.use(i,function(){n.call(t,e,t,r)}):n.call(t,e,t,r)}};o(t)&&(i=n,n=t,t=r),P.cache&&i!==!1&&e in a?s(r,a[e]):L({url:e,cache:P.fileCache,success:function(n){s(r,a[e]=new P(n,t))},error:function(e){s(e)}})})},i:{loadScript:function(){var e=this;return e.find("script",function(t){O.behaviorScript(t,!0,function(t){new Function("return function(Stl){"+t+"}")()(e)})}),e}},j:{exports:r},k:function(e,t,r,n){var i=this;if(P.iof(i))u(t)&&p(i,t),i._elem=newDiv().append(O.fragment(e,!1)),i.loadScript();else{if(P.iof(e))return e;s(e)&&P.load(e,t,r,n)}},l:function(e,t){h("get find children childNodes firstChild lastChild trimHTML html text",function(e,r){t[r]=function(){return this._elem[r].apply(this._elem,arguments)}})}}),B=W.ui=W.module({f:{rules:{},modules:{},status:{zIndex:100,index:0,lock:!1},support:function(e,t,r){return e===n?{rule:{},html:{}}:b.support(e,t,r,B)},exist:function(e){return s(e)||W.debug({path:"Std.ui",memberType:"static",memberName:"exist",description:"illegal parameter,module name should be a string."}),e in B.modules},build:function(e,t,n){if(s(e)){var i=B.rules[e];return i&&i.build()||r}return S.DOM(e)&&!(e=O(e)).ui()?B.html(e,n,t):r},create:function(e,t,n){if(s(e)){var i=e;return(e=B.modules[e])?new e(t||{},n):(W.debug({path:"Std.ui",memberType:"static",memberName:"create",description:"load failed,ui module ["+i+"] doesn't exist"}),r)}return u(e)?h(e,function(e,t){return u(t)&&t.ui?B(t.ui,t):s(t)?B(t,{}):void 0},!0):r},module:function(e,i){if(e===n&&W.debug({path:"Std.ui",memberType:"static",memberName:"module",description:"illegal parameter"}),s(e)){if(i===n)return B.modules[e]||r}else i=e;s(e)&&o(i)&&(i=i.call(W,B)),i=p({},i);var a,u="tabindex",l="renderTo",c=i.namespaceURI,d=f(c)?newDom:function(e){return O(t.createElementNS(c,e))},m=i.nodeName||"div",h=d(m).attr(u,1),v=[],g="prototype";return i.__constructor__=function(e,t){var i,o=this,a=o.init_opts(e),s=a.tabIndex;if("*"!==s){switch(s){case 1:i=t?t.attr(u,1):h.clone();break;case r:case n:i=t||d(m);break;default:i=(t||d(m)).attr(u,s)}i.dom.__StdUI__=o,o[0]=i.className("StdUI "+a.defaultClass+" "+a.className+(t?" "+t.className():""))}a.on&&o.on(a.on),"function"==typeof o.create&&o.create(o,a,i,e),o.emit("create");for(var c=v.length-1;c>=0&&v[c].call(o,o,a,i)!==!1;c--);a[l]&&o[l]?o[l](a[l]):t&&a.render===!0&&o.render()},(a=b(e,i,B))===r?a:(a[g].ui=e,a[g].emit=x[g].emit,a[g].__Std__.nodeName=m,v=b.property(a,"main",!0),a)}},k:function(e,t){return e===r?r:t===n&&s(e)?B.modules[e]||r:(e in B.modules||W.debug({path:"Std.ui",description:"load failed,ui module "+e+" doesn't exist"}),B.create(e,t))}}),B.rule=W.module(function(){var e="content",t="children",i="selector";return{f:{add:v(function(e,t){s(t)&&(t=M.parse(t,!1)),u(t)&&(B.rules[e]=new B.rule(t))},{each:[l,u]}),remove:v(function(e){s(e)&&delete B.data[e]},{each:[l]})},h:{selector:null,buildData:null,compileData:null},i:{execAction:function(e,t,r,n){return s(t)?e[t](r,n):o(t)&&t.call(e,r,n),this},pushInstance:function(e,t,r){var i=this,o=t["*"],a=function(){var n=i.createUI(t,r);n&&e.push(n)};if(o!==n){o=int(o);for(var s=0;o>s;s++)a()}else a();return i},compile2:function(e){for(var t=this,r=[],n=!1,o=e.length-1;o>=0;o--){var a=e[o];switch(n===!0&&(n=!(a.items=Array.from(r)),r.clear()),e[o][i]?(r.unshift.apply(r,t.compile(a[i])),delete a[i]):r.unshift(a),a["<"]){case">":case" ":n=!0}}return r},compile:function(e){var t=this,r=[];e===n&&(e=t._selector);for(var i=0,o=e.length;o>i;i++)r.mergeArray(t.compile2(e[i]));return t._compileData=r}},j:{createUI:function(i,o){var a=this,s=i.tag,u={},l=i.content;if("*"===s&&!f(l))return("{"+l+"}").toObject();if(""===s)return i.text;if(!B.exist(s))return r;h(i["."],function(e,t){p(u,A.get(t))}),h(i.attr,function(e,t){"="===t.operator&&(u[t.name]=t.value)});var c=i["#"],d=[],m=B.support(s,"rule"),v=B(s,u);return m||W.debug({path:"Std.ui.rule",memberType:"public",memberName:"createUI",description:"ui module ["+s+"] doesn't support create from rule"}),v&&m?(f(i.items)||h(i.items,function(e,t){a.pushInstance(d,t,o)}),e in m&&a.execAction(v,m[e],l),t in m&&a.execAction(v,m[t],d),"create"in m&&a.execAction(v,m.create,d,l),h(i[":"],function(e,t){v[e].apply(v,t)}),c!==n&&(v[0].id(c),o[c]=v),v):r},build:function(e){var t=this,r=e||t._selector,n={},i=[];return l(r)||W.debug({path:"Std.ui.rule",memberType:"private",memberName:"build",description:"build failed,illegal rule!"}),t._compileData||t.compile(r),h(t._compileData,function(e,r){t.pushInstance(i,r,n)}),{data:i,dataMap:n}}},k:function(e,t){var r=this;return B.rule.iof(r)?(s(e)&&(e=M.parse(e,!1)),void(u(e)&&(r._selector=e))):t===n?new B.rule(e).build():B.rules[e]=new B.rule(t)}}}),B.html=b({f:{buildOption:function(e,t,n){var i=r;return s(e)?i=e.toObject():u(e)&&(i=e),u(t)&&(i=p(i||{},W.clone(t))),s(n)&&(i=p(A.get(n)||{},i)),i||{}},analyze:function(e,t,i){var o=e.attr("std-name"),a=e.attr("std-theme"),s=e.attr("std-action"),u=B.html.buildOption(e.attr("std-option"),t,e.attr("std-option-name"));return i===n&&(i=e.attr("std-ui")),i?(o&&(u.name=o),a&&(u.theme=a),s&&(u.action=s),{dom:e,ui:i,name:o,option:u}):(W.debug({path:"Std.ui.html",memberType:"static",memberName:"analyze",description:"failed,miss attribute [std-ui]"}),r)}},j:{html:function(){return this._html},attr:function(e){return this.dom.attr(e)},value:function(e){return this.dom.value(e)},trimHTML:function(){return this._html.trim()},childNodes:function(e){return this.dom.childNodes(e,this._childNodes)},children:function(e,t){return this.dom.children(e,t,this.childNodes(function(e,t){return 1===t.nodeType?t:void 0}))},build:function(e){var t=this,n=t.dom,i=t.config,a=B.support(i.ui,"html"),s=i.option;if(!u(a))return W.debug({path:"Std.ui.html",memberType:"public",memberName:"createUI",description:"ui module ["+i.ui+"] doesn't support create from html"}),r;if(l(a.nodeName)&&!y.or(a.nodeName,n.nodeName()))return W.debug({path:"Std.ui.html",memberType:"public",memberName:"createUI",description:"create failed,illegal node name ["+n.nodeName()+"],ui module "+i.ui+" only accept ["+a.nodeName.join(",")+"]"}),r;if(o(a.load)&&a.load.call(n,n,s)===!1)return r;var c=n.dom.__StdUI__=B.create(i.ui,s,n);return v(a.create).call(c,t,i)===!1?r:(c.rendered||e===!1||c.render(),c)}},k:function(e,t,r){var n=this;return B.html.iof(n)?(n.dom=e=O(e),n.config=B.html.analyze(e,t),n._html=e.html(),n._childNodes=e.childNodes(),e.clear(),void 0):new B.html(e,t).build(r)}}),B.module("widget",function(){var t="width",i="height",f="boxSize",d="rendered",g="contentType",b="__StdEvents__",y=function(e,t,r){var n=0,i=0,o=0,u=0;a(r)?n=i=o=u=r:s(r)&&""!==(r=r.trim())&&(r=r.split(" "),n=i=o=u=~~int(r[0]),r.length>1&&(i=~~int(r[1]),o=~~int(r[2]),u=~~int(r[3])));for(var l in t){var c=l.charAt(7),f=t[l],d="",m=0,h=0;"p"===l.charAt(0)&&("T"===c?(d=n,h+=f):"R"===c?(d=i,m+=f):"B"===c?(d=o,h+=f):"L"===c&&(d=u,m+=f),t[l]=d,t.height-=h,t.width-=m)}t.height+=n+o,t.width+=i+u,e.padding(n+"px "+i+"px "+o+"px "+u+"px")},x=function(e,t){e[d]===r&&W.debug({path:"Std.ui",module:e.ui,memberName:t,description:"cannot call method "+t+",because this widget has been destroyed!"})};return{a:"events plugin",c:"create resize visible enable load beforeDestroy destroy beforeRender render",e:{level:1,id:r,name:r,parent:r,renderTo:r,defaultClass:"Std_widget",className:"",tabIndex:1,top:r,left:r,width:r,height:r,minWidth:3,minHeight:3,maxWidth:r,maxHeight:r,padding:r,enable:!0,visible:!0,animation:null,initSize:!0,initBoxSize:!0,action:r,actionTrigger:"click",plugins:r,validator:"",invalidText:"invalid",value:r,valueType:"auto",contentType:"",theme:"default",css:r,data:r,url:r,html:r,iframe:r,layout:r,fixedWidth:!1,fixedHeight:!1},n:{destroy:function(){var e=this,t=e[0].dom;e.emit("beforeDestroy"),e.removeLayout().animation("destroy",function(){e.__final__("destroy",function(n){e.removePlugin(),t&&t._removed!==!0&&(e[0].destroy(),e[0]=r),e.emit(n),e[d]=r})})},render:function(){x(this,"render");var e=this,n=e.opts;if("default"!==n.theme&&e.addClass("__"+n.theme+"__"),e.init_boxSize(),e.beforeRender(n),e[d]=0,n.initSize&&(e[t](n[t],!1),e[i](n[i],!1)),e[d]=!0,n.left!==r&&e.left(n.left),n.top!==r&&e.top(n.top),n.visible||e.visible(!1,!1),n.css&&e[0].css(n.css),n.enable||e.enable(!1),n.plugins&&e.plugin(n.plugins),n[g]!==r){var o=n[g];""===o?n.html?e.html(n.html):n.url?e.url(n.url):n.iframe?e.iframe(n.iframe):n.layout&&e.layout(n.layout):s(o)&&e[o](n[o])}e.__final__("render",!0)}},i:{boxSize:0,rendered:!1},j:{beforeRender:function(){x(this,"beforeRender"),this.emit("beforeRender")},init_boxSize:function(){x(this,"init_boxSize");var e=this,t=e.opts,n=e.__Std__,i=t.padding,o=e.ui+":"+e[0].dom.className;if(t.initBoxSize){n[f]||(n[f]={});var a={},s=r;s=n[f][o]?n[f][o]:n[f][o]=e[0][f]();for(var u in s)a[u]=s[u];e[f]=a}else e[f]=e[0][f](!1,!0);return i&&y(e[0],e[f],i),e},name:function(e){return x(this,"name"),this.opt("name",e)},show:function(){return x(this,"show"),this.visible(!0)},hide:function(){return x(this,"hide"),this.visible(!1)},hasClass:function(e){return x(this,"hasClass"),this[0].hasClass(e)},addClass:function(e){return x(this,"addClass"),this[0].addClass(e),this},removeClass:v(function(e){x(this,"removeClass"),this[0].removeClass(e)}),toggleClass:v(function(e,t){x(this,"toggleClass"),this[0].toggleClass(e,t)}),className:function(e){x(this,"className");var t=this;return e===n?t[0].className():(t[0].className(t.opts.defaultClass+" "+e),t)},theme:function(e){x(this,"theme");var t=this,r=t.opts,i="__";return e===n?r.theme:t.removeClass(i+r.theme+i).addClass(i+(r.theme=e)+i)},minWidth:function(e){x(this,"minWidth");var r=this;return r.opt("minWidth",e,function(){a(e)&&r[t]()<e&&r[t](e)})},minHeight:function(e){x(this,"minHeight");var t=this;return t.opt("minHeight",e,function(){a(e)&&t[i]()<e&&t[i](e)})},maxWidth:function(e){x(this,"maxWidth");var r=this;return r.opt("maxWidth",e,function(){a(e)&&r[t]()>e&&r[t](e)})},maxHeight:function(e){x(this,"maxHeight");var t=this;return t.opt("maxHeight",e,function(){a(e)&&t[i]()>e&&t[i](e)})},disable:function(e){return x(this,"disable"),e===n?!this.enable():this.enable(!e)},enable:function(e){x(this,"enable");var t=this;return t.opt("enable",e,function(){var r=t.layout();m(r)?r.enable(e):u(r)&&(r.enable=e),t.toggleClass("disabled",!e).__final__("enable",function(r){t.emit(r,e)})})},visible:function(e,t){x(this,"visible");var r=this,i=r.opts;return e===n?r[d]?i.visible:!1:(t===!1?r[0].visible(e):r.animation("visible",function(){r[0].visible(e)},e),r.__final__("visible",function(t){r.emit(t,i.visible=e)}))},focus:v(function(e,t){x(this,"focus");var r=this;a(e)?setTimeout(function(){r[0].focus(),v(t).call(r)},e):r[0].focus()}),blur:v(function(e,t){x(this,"blur");var r=this;a(e)?setTimeout(function(){r[0].blur(),v(t).call(r)},e):r[0].blur()}),valid:function(){x(this,"valid");var e=this,t=e.value(),r=e.opts.valueType,n=e.validator(),i="auto"===r&&m(e.layout())||"layout"===r;return i?e.layout().valid():o(n)?n(t):n in W.validator?W.validator[n](t):S(n,t)},toForeground:v(function(){x(this,"toForeground"),this[0].css("zIndex",++W.ui.status.zIndex)}),appendTo:function(e){return x(this,"appendTo"),this[0].appendTo(e),this},html:function(e){x(this,"html");var t=this,r=t.opts;return e===n?t[0].html():(t.removeLayout(),r[g]="html",t[0].html(e),t.emit("load",e))},iframe:function(e,t){x(this,"iframe");var r=this;return r.opt("iframe",e,function(){var n=newDom("iframe").attr({src:e,frameBorder:"0"}).css({width:"100%",height:"100%",border:0,verticalAlign:"middle"}).on("load",function(){v(t).call(r,n),r.emit("load",n)});r.removeLayout(),r.opts[g]="iframe",r[0].clear().append(n)})},url:function(e,t){x(this,"url");var r=this,n=r.opts;return r.opt("url",e,function(){n[g]="url",L.get(e,function(e){r.removeLayout(),r[0].html(e),r.emit("load",e),v(t).call(r,e)})})},value:function(e){x(this,"value");var t=this,i=t.opts,o=r,a=i.valueType,s="auto"===a,u=s&&t.layout()||"layout"===a;return e===n?t.rendered?u?o=t.layout().value():(a===r||s)&&(o=i.value):o=i.value:(o=t,i.value=e,t.rendered&&u&&t.layout().value(e)),o},animation:v(function(e,t,r){var n=this,i=n.opts,a=i.animation;if(u(a)){if(o(a[e]))return void a[e].call(n,t,r);if(s(a[e])){var l=E(a[e]);if(o(l))return void l.call(n,t,r)}}t()}),updateLayout:v(function(){x(this,"updateLayout");var e=this,t=e.layout();m(t)&&t.update()}),toggleLayout:function(e,t){x(this,"toggleLayout");var n=this,i=n.opts,o=r,a=i.layout;return m(a)&&a.ui!==e?((t=p(a.opts,t)).items=r,o=B(e,t),a._items.converter=o._items.converter,(o._items=a._items).items(function(t,r){r.parent(o).restore(e)}),n.removeLayout(!1),n.layout(o),!0):!1},layout:function(e){x(this,"layout");var t=this,i=t.opts;return e===n?i.layout||r:(t[d]&&"layout"===i[g]&&m(i.layout)&&t.removeLayout(),c(e)&&e.ui&&(e=B(e.ui,e)),m(e)?(i.layout=e.parent(t),t[d]?(i[g]="layout",t[0].clear().css("position","static","relative"),t.addClass("StdUI_Layout"),t.level(e.level()).on({resize:t.updateLayout}),e.render(),e.update(),t.emit("load",e)):t):t)},on:v(function(e,t){x(this,"on");var r=this;if(e!==n&&o(t)||W.debug({path:"Std.ui",module:r.ui,memberType:"public",memberName:"on",description:"illegal parameter"}),r[b]||(r[b]={}),r.__Std__.events.has(e)){var i=r[b];i[e]||(i[e]=[]),i[e].push(t)}else r[0].on(e,t)},{each:[u,s]}),off:v(function(e,t){x(this,"off");var r=this;if(e!==n&&o(t)||W.debug({path:"Std.ui",module:r.ui,memberType:"public",memberName:"off",description:"illegal parameter"}),r.__Std__.events.has(e)){var i=r[b];if(!i||!i[e])return r;t===n?i[e].clear():h(i[e],function(r,n){return n===t?(i[e].remove(r),!1):void 0})}else r[0].off(e,t)},{each:[u,s]}),move:function(o,u){x(this,"move");var l=this,c=l[0];(o===n||!s(o)&&!a(o))&&W.debug({path:"Std.ui",module:l.ui,memberType:"public",memberName:"move",description:"illegal parameter"});var f=r,d=function(){return f!==r?f:(f=c.offsetParent(),(!f||f.contains("body"))&&(f=O(e)),f)},m=function(e){return e.offsetWidth()||e[t]()},h=function(e){return e.offsetHeight()||e[i]()};if(u===n){if("cent"===o.left(4)){var p=d(),v=(m(p)-l[t]())/2,g=(h(p)-l[i]())/2;"central"==o&&(g-=.25*g),c.css({left:0>v?0:v,top:0>g?0:g})}}else c.css({left:o,top:u});return l},left:function(e){x(this,"left");var t=this,r=t.opts;return e===n?t[0].css("left"):(a(e)||s(e)||W.debug({path:"Std.ui",module:t.ui,memberType:"public",memberName:"left",description:"illegal parameter"}),t[0].css("left",r.left=e),t)},top:function(e){x(this,"top");var t=this,r=t.opts;return e===n?t[0].css("top"):(t[0].css("top",r.top=e),t)},opacity:v(function(e){x(this,"opacity");var t=this;return e===n?t[0].opacity():void t[0].opacity(e)}),renderTo:function(e){x(this,"renderTo");var t=this;return t.opt("renderTo",e,function(){t[0].is(e)&&W.debug({path:"Std.ui",module:t.ui,memberName:"renderTo",description:"target cannot be the same with this widget"}),t.appendTo(e),t.render()})},size:v(function(e,r){x(this,"size");var o=this;return e===n?{width:o[t](),height:o[i]()}:void(u(e)&&r===n?o.size(e[t],e[i]):o[t](e,!1)[i](r,!1))}),resize:function(e,r){x(this,"resize");var o=this,a=o.opts;return e===n?o[t](a[t],!1)[i](a[i],!1):e===t||e===i?o[e](a[e],!1):o.size(e,r),o},width:function(e,i){x(this,"width");var o=this,s=o.opts,u=o[f],l=u[t],c=o[d],m=s[t];if(e===n)return a(m)?m:c===!1?0:o[0][t]()+l;if(c===!1)return s[t]=e,o;if(a(e)){var h=s.minWidth,p=s.maxWidth;h&&h>e&&(e=h),p&&e>p&&(e=p),i===!1?o[0][t](e-l):o.animation("width",function(){o[0][t](e-l)},e-l)}else e===r&&0!==c?o[0].removeStyle(t):o[0][t](e);return c&&e!==m&&(s[t]=e,o.__final__("width",function(){o.emit("resize",{type:t,width:e})})),o},height:function(e,t){x(this,"height");var o=this,s=o.opts,u=o[f],l=u[i],c=o[d],m=s[i];if(e===n)return a(m)?m:c===!1?0:o[0][i]()+l;if(c===!1)return s[i]=e,o;if(a(e)){var h=s.minHeight,p=s.maxHeight;h&&h>e&&(e=h),p&&e>p&&(e=p),t===!1?o[0][i](e-l):o.animation("height",function(){o[0][i](e-l)},e-l)}else e===r&&0!==c?o[0].removeStyle(i):o[0][i](e);return c&&e!==m&&(s[i]=e,o.__final__("height",function(){o.emit("resize",{type:i,height:e})})),o},remove:function(e){x(this,"remove");var t=this;return e===n&&t.destroy(),t},removeLayout:v(function(e){x(this,"removeLayout");var t=this,n=t.opts,i=n.layout;m(i)&&i[d]&&(t.removeClass("StdUI_Layout").off("resize",t.updateLayout),e!==!1?i.destroy(e):i.rendered=i._items=r,n.layout=r)})},k:function(e,t,r){if(t.id&&r.id(t.id),t.action){var n=w(t.action);n&&n.bind(this)}t.appendTo?r.appendTo(t.appendTo):t.prependTo&&r.prependTo(t.prependTo)},l:function(e,t){h("parent level valueType validator invalidText fixedWidth fixedHeight",function(e,r){t[r]=function(e){return x(this,r),this.opt(r,e)}})},m:{rule:{"private":!0,content:"html",children:function(e){l(e)&&e.length>0&&B("layout").iof(e[0])&&this.layout(e[0])}},html:{"private":!0,create:function(e){var t=e.html(),r=this,n=e.attr("std-content");if(n&&"html"!=n){if("iframe"==n)r.iframe(t.trim());else if("url"==n)r.url(t.trim());else if("layout"==n){var i=e.attr("std-layout"),o=B.html.buildOption(e.attr("std-layout-option"),e.attr("std-layout-option-name"));if(s(i)){var a=B(i,o);r.layout(a),B.support("layout","html").create.call(a,e)}}}else r.html(t)}}}}}),B.module("locker",{b:"widget",e:{defaultClass:"StdUI_locker",level:5,opacity:.4,background:"#000",cursor:"default",position:"absolute",visible:!1,tabIndex:r},g:{render:function(){this.opts.visible&&this.resize(),this.on("contextmenu",v(!1))},visible:function(e){e===!0&&this.resize()},destroy:function(){O(e).off("resize",this._resize)}},j:{resize:function(){var e=this,r=e[0].offsetParent();return r?(r.contains("body")&&(r=O(t)),e[0].css({left:0,top:0,width:r.offsetWidth()||r.width(),height:r.offsetHeight()||r.height()}),e):e},cursor:function(e){return this.opt("cursor",e,function(){this[0].cursor(e)})}},k:function(t,r,n){n.css({opacity:r.opacity,background:r.background,cursor:r.cursor,overflow:"hidden",position:r.position,zIndex:++B.status.zIndex}),O(e).on("resize",t._resize=function(){t.resize.call(t)})},m:B.support()}),B.module("sep",{b:"widget",e:{level:3,defaultClass:"StdUI_Sep",tabIndex:r},m:B.support()}),B.module("spacing",{b:"widget",e:{level:1,defaultClass:"StdUI_Spacing",minHeight:1,minWidth:1,height:2,width:2,tabIndex:r},m:B.support()}),B.module("stretch",{b:"widget",e:{level:5,tabIndex:r,defaultClass:"StdUI_Stretch"},m:B.support()}),B.module("layoutItem",{b:"widget",e:{defaultClass:"StdUI_LayoutItem",item:r,level:1,type:"widget",initSize:!1,initBoxSize:!1,tabIndex:r},g:{destroy:function(){var e=this.item();e&&e.destroy(),this._rects=r},enable:function(e){var t=this.item();t&&t.enable(e)},left:function(e){a(e)&&(this.rect()[0]=e)},top:function(e){a(e)&&(this.rect()[1]=e)},beforeRender:function(){var e=this,t=e.opts,i=t.type,a=0,s=0,u=r,l=r,c=t.item;c!=n&&(o(c.render)&&c.render(),"dom"===i?(a=c.css("top"),s=c.css("left"),u=c.boxSize(),l=[c.offsetWidth(),c.offsetHeight(),~~int(c.minWidth()),~~int(c.minHeight())],c.css({left:0,top:0})):(a=c.opts.top,s=c.opts.left,u=c.boxSize,"widget"===i?(l=[c.width(),c.height(),c.minWidth(),c.minHeight()],c.left(0).top(0)):"layout"===i&&(e[0].addClass("StdUI_Layout"),l=[c.computeSize("width"),c.computeSize("height"),c.computeSize("minWidth"),c.computeSize("minHeight")])),t.minWidth=l[2],t.minHeight=l[3],e.boxSize=u,e._rects[0]=[t.left=s,t.top=a,l[0],l[1]],e[0].cssText("position:absolute;width:"+(t.width=l[0])+"px;height:"+(t.height=l[1])+"px"))}},i:{restore:function(e){var t=this,n=t._rects,i=n[e]||n[0];i[0]!=r&&t.left(i[0]),i[1]!=r&&t.top(i[1]),t.width(i[2]==r?n[0][2]:i[2]),t.height(i[3]==r?n[0][3]:i[3]),"layout"===t.type()&&t.item().layoutItems(function(t,r){r.restore(e)})},rect:function(e){var t=this,r=t._rects;return e===n&&(e=t.parent().ui),r[e]||(r[e]=new Array(4)),r[e]},item:function(e){var t=this,i=t.opts,o="";if(e===n)return i.item;if(S.icon(e)&&(e=e.element()),d(e))o="widget",e.appendTo(t[0]);else if(m(e))o="layout";else if(u(e)&&s(e.ui)){if(B.exist(e.ui)||W.debug({path:"Std.ui",module:"layout",description:"can't find ui module:"+e.ui}),!(e=B(e.ui,e)))return r;m(e)?o="layout":(o="widget",e.appendTo(t[0]))}else S.DOM(e)&&(o="dom",e.css("float","left").appendTo(t[0]));return(d(e)||m(e))&&e.parent(t),i.level=e.level(),i.type=o,i.item=e,t}},j:{type:function(e){return this.opt("type",e)},index:function(){return this.opts.parent._items.indexOf(this)},fixedWidth:function(){var e=this,t=e.type(),r=e.item(),n=!0;return 1!==e.level()&&("dom"===t?n=!1:"layout"===t&&"auto"===r.opts.width?n=!1:"widget"===t&&(n=r.fixedWidth())),n},fixedHeight:function(){var e=this,t=e.type(),r=e.item(),n=!0;return 1!==e.level()&&("dom"===t?n=!1:"layout"===t&&"auto"===r.opts.height?n=!1:"widget"===t&&(n=r.fixedHeight())),n},width:function(e){var t=this,r=t.opts,i=r.type,o=t.boxSize.width,a=r.item;return e===n?"dom"==i?a.width()+o:a.width():("dom"==i?a.width(e-o):"widget"===i&&a.width(e,!1),t[0].width(t.rect()[2]=e),t)},height:function(e){var t=this,r=t.opts,i=r.type,o=t.boxSize.height,a=r.item;return e===n?"dom"==i?a.height()+o:a.height():("dom"==i?a.height(e-o):"widget"===i&&a.height(e,!1),t[0].height(t.rect()[3]=e),t)}},k:function(e,t){e._rects={},t.item&&e.item(t.item)}}),B.module("layout",function(){var e="width",t="height",i="layoutItem",c=function(e,t){e.rendered===r&&W.debug({path:"Std.ui",module:e.ui,memberName:t,description:"cannot call method "+t+",because this layout has been destroyed!"})};return{a:"events plugin",c:"render update beforeDestroy destroy remove levelChange",e:{level:4,spacing:4,padding:r,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,tabIndex:"*",name:r,parent:r,items:r,plugins:r,value:r,width:"auto",height:"auto",minWidth:"auto",minHeight:"auto",baseWidth:200,baseHeight:200,enable:!0,forceParentWidth:!1,forceParentHeight:!1,align:"left",verticalAlign:"top"},n:{destroy:function(){var e=this;e.emit("beforeDestroy"),e.__final__("destroy",function(){e.clear(!0,!1),e.removePlugin(),e._items=r,e.emit("destroy"),e.rendered=r})},render:function(){c(this,"render");var e=this,t=e.opts;e.updateBoxSize(),e.layoutItems(function(e,r){r.renderTo(t.parent)}),e.rendered=!0,t.plugins&&e.plugin(t.plugins),t.enable||e.enable(!1),e.refresh().__final__("render",!0)}},i:{rendered:!1,items:function(e,t){c(this,"items");var l=this,f=r,m=l._items;return e===n?f=m.items(function(e,t){return t.item()},!0):a(e)||s(e)?(f=m.items(e))&&(f=f.item()):o(e)?f=h(m._list,function(t,r){return e.call(l,t,r.item())},t):u(e)&&(d(e)&&e.ui===i||(e=e.parent()),f=m.items(e)),f},updateBoxSize:function(){c(this,"updateBoxSize");var n=this,i=n.opts,o=r,u=i.parent,f=i.padding,h=i.paddingTop,p=i.paddingRight,v=i.paddingBottom,g=i.paddingLeft;return d(u)||m(u)?o=W.clone(u.boxSize):O.iof(u)&&(o=u.boxSize()),a(f)?h=p=v=g=f:(l(f)||s(f)&&(f=f.split(" ")))&&(h=~~int(f[0]),p=~~int(f[1]),v=~~int(f[2]),g=~~int(f[3])),o[e]+=g+p,o[t]+=h+v,o.paddingTop+=h,o.paddingBottom+=v,o.paddingLeft+=g,o.paddingRight+=p,n.boxSize=o,n}},j:{orientation:"auto",name:function(e){return c(this,"name"),this.opt("name",e)},sizeModel:function(){return c(this,"sizeModel"),r},itemCount:function(){return c(this,"itemCount"),this._items.length},align:function(e){return c(this,"align"),this.opt("align",e,function(){this.update()})},verticalAlign:function(e){return c(this,"verticalAlign"),this.opt("verticalAlign",e,function(){this.update()})},enable:function(e){return c(this,"enable"),this.layoutItems(function(t,r){r.enable(e)}),this},layoutItems:function(e,t){return c(this,"layoutItems"),this._items.items(e,t)},spacing:function(e){return c(this,"spacing"),this.opt("spacing",e,function(){this.update()})},refresh:function(){c(this,"refresh");var e=this,t=e.opts,r=t.level,n=e.itemCount(),i=1;return 0>=n?i=4:e.layoutItems(function(e,t){var r=t.opts.level;r>i&&(i=r)}),i!==r&&(t.parent.level(i),e.emit("levelChange",t.level=i)),e},overflow:function(e){c(this,"overflow");var t=O(this.parent());t&&t.css("overflow",e)},valid:function(){return c(this,"valid"),!1!==h(this.find("*"),function(e,t){return d(t)&&!t.valid()?!1:void 0})},prepend:function(e,t){return c(this,"prepend"),this.insert(e,t,0)},insert:function(e,t,r){c(this,"insert");var n=this,i=n._items.insert(e,t,r);return i.item()||W.debug({path:"Std.ui",module:n.ui,memberType:"public",memberName:"insert",description:"illegal parameter",content:Array.from(arguments)}),n.rendered&&n.refresh(),i},append:function(e,t){c(this,"append");var r=this,n=function(e,t){return t=r._items.append(e,t),t.item()||W.debug({path:"Std.ui",module:r.ui,memberType:"public",memberName:"append",description:"illegal parameter",content:Array.from(arguments)}),t},i=l(e)?h(e,function(e,t){n(null,t)},!0):n(e,t);return r.rendered&&r.refresh(),i},map:function(e){c(this,"map");var t=this,n={};return h(t.find("*"),function(i,a){var s=r;d(a)?s=a.opts.name:S.DOM(a)&&(s=a.name()),f(s)||(n[s]=o(e)?e.call(t,a,s,n):a)}),s(e)?n[e]||r:n},find:function(e,t){c(this,"find");var n=this,i=[];return n.layoutItems(function(r,n){var o=n.item(),a=n.type();return"*"===e?i.push(o):"dom"===a?u(e)&&!1!==h(e,function(e,t){
return o.attr(e)!==t?!1:void 0})&&i.push(o):s(e)&&o.ui===e?i.push(o):u(e)&&!1!==h(e,function(e,t){return o.opts[e]!==t?!1:void 0})&&i.push(o),"widget"===a&&"layout"===o.opts.contentType&&["auto","layout"].has(o.opts.valueType)&&(o=o.layout(),a="layout"),"layout"===a&&(o=o.find(e,t))&&!f(o)&&(l(o)?i.merge(o):i.push(o)),t!==!1||f(i)?void 0:!0}),t===!1?f(i)?r:i[0]:i},computeSize:function(r){c(this,"computeSize");for(var n=this,i=0,o=n._items._list,a=n.orientation,s=r===t||"minHeight"===r,u=r===e||"minWidth"===r,l=0,f=o.length;f>l;l++){var d=o[l].item()[r]();o[l].fixedWidth()&&u?d=o[l][e]():o[l].fixedHeight()&&s&&(d=o[l][t]()),u&&"horizontal"===a||"vertical"===a&&s?i+=d+(l>0?n.spacing():0):i=d>i?d:i}return i},updateLayout:function(r,n,i){c(this,"updateLayout");var o=this,a=i.parent,s=n[e],u=n[t];if(!a||!o.rendered)return!1;for(var l,f=0,d=r.length,m=[];d>f;f++)m[f]={};for(o.sizeModel(m,r,d,s,u,i),f=0;l=m[f],d>f;f++){var h=r[f],p=l.left||0,v=l.top||0,g=l[e],b=l[t];e in l&&h[e](g),t in l&&h[t](b),"layout"===h.type()&&h.item().update(g,b),r[f].left(p+(h.__x=n.left)),r[f].top(v+(h.__y=n.top))}return o},update:function(r,i){c(this,"update");var o=this,a=o.opts,s=a.parent,u=o.boxSize,l="overflow";return o.rendered&&s?(a.forceParentWidth&&!s[e]()&&s[e](o.computeSize(e)+u[e]),a.forceParentHeight&&!s[t]()&&s[t](o.computeSize(t)+u[t]),O(s).styleTo(l,"visible"),o.updateLayout(o.layoutItems(function(e,t){return"layout"==t.type()||t.item().visible()?t:void 0},!0),{width:(r=r===n?o[e]():r)-u[e],height:(i=i===n?o[t]():i)-u[t],left:u.paddingLeft+u.borderLeftWidth,top:u.paddingTop+u.borderTopWidth},a),d(s)&&"layoutItem"===s.ui&&(s[e](r),s[t](i)),O(s).styleBack(l),o.emit("update")):o},clear:function(e,t){c(this,"clear");var r=this,n=r._items;return e!==!1&&n.items(function(e,t){t.destroy()}),n.clear(),t!==!1&&r.refresh(),r},remove:function(e,t){c(this,"remove");var r=this,o=r._items;if(e===n)r.destroy();else if(d(e)&&e.ui!==i)r.remove(e.parent());else{var a=o.items(e);a?(o.remove(a),t!==!1?a.destroy():a[0].detach(),r.__final__("remove",function(t){r.emit(t,e)})):W.debug({path:"Std.ui",module:r.ui,memberType:"public",memberName:"remove",description:"illegal parameter",content:e})}return r.refresh()},value:function(e){c(this,"value");var t=this,i=!1;return e===n&&(e={},i=!0),h(t.find("*"),function(t,n){var o=r;d(n)?s(n.opts.name)&&(o=n.opts.name):S.DOM(n)&&(o=n.attr("std-name")),i&&s(o)?e[o]=n.value():!i&&o in e&&n.value(e[o])}),i?e:t}},k:function(e,t){e._items=W.items(function(t,r){return t=d(t)&&t.ui===i?t.parent(e):B(i,{parent:e,item:t}),e.rendered&&(O(e.parent()).insert(t,r.index),t.render()),t}),l(t.items)&&e.append(t.items)},l:function(r,o){h("parent level spacing",function(e,t){o[t]=function(e){return c(this,t),this.opt(t,e)}}),h("width minWidth height minHeight",function(r,a){o[a]=function(o){c(this,a);var s=this,u=s.opts,l=u.parent,f=s.boxSize;return o===n?(l?"auto"===u[a]?(o=l.ui===i?s.computeSize(a):l[a](),(0===r||2===r)&&!o&&s.itemCount()<=0?o=0===r?u.baseWidth:2===r?u.baseHeight:0:l.ui===i&&(o+=2>r?f[e]:f[t])):o=u[a]:o=0,o):(u[a]=o,s.rendered&&s.update(),s)}})},m:{rule:{children:"append"},html:{create:function(e){var t=this;e.children(function(e,r){var n=r.attr("std-name"),i=r.attr("std-ui");i&&(r=B.build(r,!1)),r&&(n?t.append(n,r):t.append(r))})}}}}}),B.module("AbsLayout",{b:"layout",j:{sizeModel:function(e,t,r){for(var n=0;r>n;n++)e[n].top=t[n].top()-(t[n].__y||0),e[n].left=t[n].left()-(t[n].__x||0)}}}),B.module("VBoxLayout",{b:"layout",j:{orientation:"vertical",sizeModel:function(e,t,n,i,o,a){for(var s,u=this,l=a.spacing,c=[],f=(n-1)*l,d=0,m=o,h=0,p=0;n>d;d++){var v=(s=t[d]).level();(v>1&&!s.fixedWidth()||"layout"===s.type())&&(e[d].width=i),v>3&&v==u.level()&&!s.fixedHeight()?(c.push(d),p++):f+=s.height()}for(d=0,m-=f;s=t[c[d]],p>d;d++){var g=m/(p-d),b=s.minHeight();b>g&&(g=e[c[d]].height=b,f+=g,c[d]=r),m-=g}for(d=p-1;d>=0;d--)c[d]===r&&(c.remove(d),p--);for(d=0,m=o-f;p>d;d++)m-=e[c[d]].height=m/(p-d);for(d=0;s=t[d],n>d;d++){if(m>0){var y=m/(n+1);y>0&&(h+=y)}e[d].top=h,h+=(e[d].height||s.height())+l}}}}),B.module("HBoxLayout",{b:"layout",j:{orientation:"horizontal",sizeModel:function(e,t,n,i,o,a){for(var s,u=this,l=a.spacing,c=(n-1)*l,f=0,d=[],m=0,h=i,p=0;n>m;m++){var v=(s=t[m]).level();2==v&&v<u.level()||s.fixedWidth()?c+=s.width():(d.push(m),p++)}for(m=0,h-=c;s=t[d[m]],p>m;m++){var g=h/(p-m),b=s.minWidth();b>g&&(g=e[d[m]].width=b,c+=g,d[m]=r),h-=g}for(m=p-1;m>=0;m--)d[m]===r&&(d.remove(m),p--);for(m=0,h=i-c;p>m;m++)h-=e[d[m]].width=h/(p-m);for(m=0;s=t[m],n>m;m++){if((s.level()>3||"layout"==s.type())&&!s.fixedHeight()?e[m].height=o:e[m].top=(o-s.height())/2,h>0){var y=h/(n+1);y>0&&(f+=y)}e[m].left=f,f+=(e[m].width||s.width())+l}}}}),B.module("VArrayLayout",{b:"layout",j:{orientation:"vertical",resetLevel:function(){return this.level(1)},sizeModel:function(e,t,n,i,o,a){for(var s=a.align,u=a.verticalAlign,l=a.spacing,c=0,f=(n-1)*l,d=0,m=r;n>d;d++)f+=(m=t[d]).height();for(d=0;n>d;d++){var h=0,p=0,v=(m=t[d]).width(),g=m.height();"center"===s?p=(i-v)/2:"right"===s?p=i-v:"both"===s&&(e[d].width=i),"top"===u?h=c:"middle"===u?h=c+(o-f)/2:"bottom"===u&&(h=o-f+c),e[d].top=h,e[d].left=p,c+=g+l}}}}),B.module("HArrayLayout",{b:"layout",j:{orientation:"horizontal",resetLevel:function(){return this.level(1)},sizeModel:function(e,t,n,i,o,a){for(var s=a.align,u=a.verticalAlign,l=a.spacing,c=0,f=(n-1)*l,d=0,m=r;n>d;d++)f+=(m=t[d]).width();for(d=0;n>d;d++){var h=0,p=0,v=(m=t[d]).width(),g=m.height();"middle"===u?h=(o-g)/2:"bottom"===u&&(h=o-g),"left"===s?p=c:"center"===s?p=c+(i-f)/2:"right"===s&&(p=i-f+c),e[d].top=h,e[d].left=p,c+=v+l}}}}),B.module("GridLayout",{e:{rowCount:1,columnCount:3,rowSpacing:4,columnSpacing:4,autoincrement:!0,autodecrement:!0,orientation:"horizontal",rowHeight:"auto",columnWidth:"auto"},b:"layout",g:{refresh:function(){var e=this,t=e.opts,r=e._items.length,n=t.rowCount,i=t.columnCount;t.autoincrement&&r>n*i?t.rowCount++:t.autodecrement&&n>Math.ceil(r/n)&&t.rowCount--}},i:{each:function(e,t){for(var r=this,n=r.opts,i=n.orientation,a=0,s=0,u=0;a<e.length;a++)o(t)&&t.call(e,e[a],s,u,a),"horizontal"===i&&++u>=n.columnCount?(s++,u=0):"vertical"===i&&++s===n.rowCount&&(u++,s=0);return r}},j:{columnWidth:function(e){return this.opt("columnWidth",e,function(){this.update()})},rowHeight:function(e){return this.opt("rowHeight",e,function(){this.update()})},rowCount:function(e){var t=this,r=t.opts;return e===n?r.rowCount:(r.rowCount=e,t.update())},columnCount:function(e){var t=this,r=t.opts;return e===n?r.columnCount:(r.columnCount=e,t.update())},computeSize:function(e){var t=this,i=t.opts,o=0,a=[],s=[],u="height"===e||"minHeight"===e,l="width"===e||"minWidth"===e;return t.each(t._items._list,function(t,r,i){var o=t.item()[e]();a[r]===n&&(a[r]=0),s[i]===n&&(s[i]=0),l?s[i]=o>s[i]?o:s[i]:u&&(a[r]=o>a[r]?o:a[r])}),h(l?s:u?a:r,function(e,t){o+=t+(e>0?l?i.columnSpacing:i.rowSpacing:0)}),o},sizeModel:function(e,t,n,i,o,a){var s=this,u=a.rowCount,l=a.rowHeight,c=a.rowSpacing,f=a.columnCount,d=a.columnWidth,m=a.columnSpacing;if(s.each(t,function(t,r,n,a){"stretch"===d&&(e[a].left=(e[a].width=(i-m*(f-1))/f)*n+m*n),"stretch"===l&&(e[a].top=(e[a].height=(o-c*(u-1))/u)*r+c*r)}),"auto"===d||"auto"===l){var p=[],v=[],g=[],b=[],y=(f-1)*m,x=(u-1)*c,_=0,w=0;s.each(t,function(e,t,r,n){var i=e.level(),o={i:n,row:t,col:r,width:"auto",height:"auto",level:i,item:e};"auto"===l&&(v[t]||(v[t]={height:0,minHeight:0}),b[r]||(b[r]={level:1,items:[]}),b[r].level<i&&(b[r].level=i),b[r].items.push(o)),"auto"===d&&(p[r]||(p[r]={width:0,minWidth:0}),g[t]||(g[t]={level:1,items:[]}),g[t].level<i&&(g[t].level=i),g[t].items.push(o))}),s.each(t,function(e,t,r){var n,i;if("auto"===l){var o=e.minHeight(),a=b[r],s=v[t].height;n=a.items[t],i=n.level,v[t]||(v[t]={height:0}),i>3&&i==a.level&&!e.fixedHeight()?v[t].strech=!0:s<(n.height=e.height())&&(s=n.height),o>v[t].minHeight&&(v[t].minHeight=o),v[t].height=s}if("auto"===d){var u=e.minWidth(),c=g[t],f=p[r].width;n=c.items[r],i=n.level,2==i&&i<c.level||e.fixedWidth()?f<(n.width=e.width())&&(f=n.width):p[r].strech=!0,u>p[r].minWidth&&(p[r].minWidth=u),p[r].width=f}}),h(p,function(e,t){t.strech||(y+=t.width,_++)}),h(v,function(e,t){t.strech||(x+=t.height,w++)});var k=y,S=x,T=_,C=w;h(p,function(e,t){t.strech&&t.width>(i-k)/(f-T)&&(t.strech=!1,y+=t.width,_++)}),h(v,function(e,t){t.strech&&t.height>(o-S)/(u-C)&&(t.strech=!1,x+=t.height,w++)});for(var N=0,F=i-y,A=r,L=0,z=p.length;z>N;N++)(A=p[N]).strech&&(F-=A.width=Math.max(A.minWidth,(i-y)/(f-_)));for(N=0;A=p[N],z>N;N++){if(F>0){var D=F/(z+1);D>0&&(L+=D)}A.left=L,L+=A.width+m}for(N=0,F=o-x,A=r,L=0,z=v.length;z>N;N++)(A=v[N]).strech&&(F-=A.height=Math.max(A.minHeight,(o-x)/(u-w)));for(N=0;A=v[N],z>N;N++){if(F>0){var H=F/(z+1);H>0&&(L+=H)}A.top=L,L+=A.height+c}s.each(t,function(t,n,i,o){var a=r;if("auto"===d){var s=p[i].left,u=p[i].width;"auto"===(a=g[n].items[i]).width&&(e[o].width=u),e[o].left=s}if("auto"===l){var c=v[n].top,f=v[n].height;"auto"===(a=b[i].items[n]).height?(e[o].top=c,e[o].height=f):e[o].top=c+(f-a.height)/2}})}}}}),B.module("layoutWidget",function(){var e={defaultClass:"Std_LayoutWidget",type:"VBoxLayout",width:200,height:200,tabIndex:null},t={type:function(){return this.opt("type")},create:function(e,t,n,i){t.padding=r,i.on=r,i.plugins=t.layoutPlugins,i.width="auto",i.height="auto",e.layout(B(t.type,i))}};return h("layout GridLayout",function(e,r){var n=B.modules[r],i=B.modules.widget,o="prototype";for(var r in n[o])r in i[o]||!function(e){t[e]=function(){m(this.opts.layout)||W.debug({path:"Std.ui",module:"layoutWidget",memberType:"public",memberName:e,description:"layout have not been created!"});var t=this,r=t.opts.layout,n=r[e].apply(r,arguments);return n===r?t:n}}(r)}),{b:"widget",e:e,g:{remove:function(e){e!=r&&(m(this.opts.layout)||W.debug({path:"Std.ui",module:"layoutWidget",memberType:"public",memberName:"remove",description:"layout have not been created!"}),this.opts.layout.remove(e))}},j:t,m:B.support("layout")}}),W.require=b({f:{loader:new z},k:function(){var e=W.require.loader;e.require.apply(e,arguments)},l:function(e){h("basePath on off",function(t,r){e[r]=function(){var e=this.loader;return e[r].apply(e,arguments)}})}}),j({".Std_hidden":{visibility:"hidden"},".Std_wordwrap":{wordBreak:"break-all",wordWrap:"break-word"},".Std_wordnowrap":{overflow:"hidden",wordBreak:"keep-all",whiteSpace:"nowrap",textOverflow:"ellipsis"},".Std_Icon_Img":{border:0},".Std_widget":function(){var e={verticalAlign:"middle"};return W.init.css.inlineBlock?e.display="inline-block":(e.display="inline",e.zoom=1),e}(),".Std_Icon":{fontSize:0," ":{img:{width:"100%",height:"100%"}}},".Std_unselect":function(){var e="user-select",t={};return h(W.init.platformPrefix,function(r,n){t[n+e]="none"}),t[e]="none",t}(),".Std_rect":{border:"1px dotted #353535",background:"#9C9C9C"}}),I=W.main=b(function(){var i="status",a="loading",s="complete",u={},l=new W.holder,c=D.repository,f=new x,d=W.require.loader,m=!1;return{f:{state:!1,holder:l,hold:function(e){this.holder.hold(e)}},k:v(function(e,h){var p=function(){I.state="locked";for(var e=0;10>e;e++){var t=r;if(u[e])for(;t=u[e].shift();)t.call(W,W)}I.state=!0,f.emit("unlock")},v=function(){return 0==m?O(t).once("ready",v):d[i]==a?d.once(s,v):"reading"==c[i]?c.once("ready",v):c[i]==a?c.on(s,v):void l.complete(p)};e===n?v():o(e)&&("locked"===I.state?f.once("unlock",function(){I(e,h)}):(u[h=h===n?9:h]||(u[h]=[]),u[h].push(e),v()))}),l:function(){function n(){o.off("load",i),a.off(s?l:c,i)}function i(){(s||e.event&&"load"===e.event.type||t.readyState===u)&&(n(),O.united("script").each(function(e,t){O.behaviorScript(t.dom,!1)}),m=!0,a.emit("ready"))}var o=O(e),a=O(t),s=t.addEventListener,u="complete",l="DOMContentLoaded",c="readystatechange";if(t.readyState==u)return i();if(s)a.on(l,i),o.on("load",i);else{a.on(c,i),o.on("load",i);var f=!1;try{f=e.frameElement==r&&t.documentElement}catch(d){}f&&f.doScroll?!function h(){if(!m){try{f.doScroll("left")}catch(e){return v(h,30)()}i()}}():i()}}}})}(window,document,null,void 0,isFunction=function(e){return"function"==typeof e},isNumber=function(e){return"number"==typeof e},isString=function(e){return"string"==typeof e},isObject=function(e){return"object"==typeof e&&null!==e},isArray=function(e){return e instanceof Array},isPlainObject=function(){var e={}.hasOwnProperty,t="constructor";return function(r){if(!isObject(r)||r.nodeType||r===window)return!1;try{if(r[t]&&!e.call(r,t)&&!e.call(r[t].prototype,"isPrototypeOf"))return!1}catch(n){return!1}for(var i in r)if(!e.call(r,i))return!1;return!0}}(),isEmpty=function(e){if(null==e)return!0;if(isPlainObject(e)&&!isArray(e)){for(var t in e)return!1;return!0}return isElement(e)||Std.dom.iof(e)?!Std.dom(e).children():0===e.length},isWidget=function(e){return isObject(e)&&Std.ui.modules.widget.iof(e)},isLayout=function(e){return isObject(e)&&Std.ui.modules.layout.iof(e)},isBool=function(e){return"boolean"==typeof e},isElement=function(e){return isObject(e)&&1===e.nodeType&&isString(e.nodeName)},isNumeric=function(e){return!isNaN(float(e))&&isFinite(e)},isEqual=function(e,t){if(typeof e!=typeof t)return!1;if(!isObject(e))return e===t;if(isArray(e)){if(e.length!=t.length)return!1;for(var r=0,n=e.length;n>r;r++)if(!isEqual(e[r],t[r]))return!1}else{var i,o=isPlainObject(e);if(o!==isPlainObject(t))return!1;if(!o)return e===t;for(i in e)if(!isEqual(e[i],t[i]))return!1;for(i in t)if(!isEqual(e[i],t[i]))return!1}return!0});